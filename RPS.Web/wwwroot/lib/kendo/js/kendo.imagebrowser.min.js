/** 
 * Kendo UI v2021.2.616 (http://www.telerik.com/kendo-ui)                                                                                                                                               
 * Copyright 2021 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.                                                                                      
 *                                                                                                                                                                                                      
 * Kendo UI commercial licenses may be obtained at                                                                                                                                                      
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  
 * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       

*/
!function(e,define){define("kendo.imagebrowser.min",["kendo.filebrowser.min"],e)}(function(){return function(e,t){function i(t){return t.offsetTop-e(t).height()}function a(e,i){return e!==t&&e.match(/\/$/)||(e=(e||"")+"/"),e+i}function n(e){if(!e)return"";var t=" bytes";return e>=1073741824?(t=" GB",e/=1073741824):e>=1048576?(t=" MB",e/=1048576):e>=1024&&(t=" KB",e/=1024),Math.round(100*e)/100+t}var s,o=window.kendo,r=o.ui.FileBrowser,l=e.isPlainObject,d=e.proxy,p=e.extend,c=o.isFunction,f=/(^\/|\/$)/g,u="error",m=".kendoImageBrowser",h="name",g="size",v="type",_={field:v,dir:"asc"},w=o.template('<div class="k-listview-item k-listview-item-empty"><span class="k-file-preview"><span class="k-file-icon k-icon k-i-none"></span></span><span class="k-file-name">${text}</span></div>');p(!0,o.data,{schemas:{imagebrowser:{data:function(e){return e.items||e||[]},model:{id:"name",fields:{name:"name",size:"size",type:"type"}}}}}),p(!0,o.data,{transports:{imagebrowser:o.data.RemoteTransport.extend({init:function(t){o.data.RemoteTransport.fn.init.call(this,e.extend(!0,{},this.options,t))},_call:function(t,i){i.data=e.extend({},i.data,{path:this.options.path()}),c(this.options[t])?this.options[t].call(this,i):o.data.RemoteTransport.fn[t].call(this,i)},read:function(e){this._call("read",e)},create:function(e){this._call("create",e)},destroy:function(e){this._call("destroy",e)},update:function(){},options:{read:{type:"POST"},update:{type:"POST"},create:{type:"POST"},destroy:{type:"POST"}}})}}),s=r.extend({init:function(e,t){var i=this;t=t||{},r.fn.init.call(i,e,t),i.element.addClass("k-imagebrowser")},options:{name:"ImageBrowser",fileTypes:"*.png,*.gif,*.jpg,*.jpeg"},value:function(){var e,t=this,i=t._selectedItem(),n=t.options.transport.imageUrl;if(i&&"f"===i.get(v))return e=a(t.path(),i.get(h)).replace(f,""),n&&(e=c(n)?n(e):o.format(n,encodeURIComponent(e))),e},_fileUpload:function(e){var i,a=this,n=a.options,s=n.fileTypes,r=RegExp(("("+s.split(",").join(")|(")+")").replace(/\*\./g,".*."),"i"),l=e.files[0].name,d=e.files[0].size,p=h,c=g;r.test(l)?(e.data={path:a.path()},i=a._createFile(l,d),i?(i._uploading=!0,a.upload.one("error",function(){i=t}),a.upload.one("success",function(e){if(i){delete i._uploading;var t=a._insertFileToList(i);t.set(p,e.response[a._getFieldName(p)]),t.set(c,e.response[a._getFieldName(c)]),a._tiles=a.listView.items().filter("["+o.attr("type")+"=f]"),a._scroll()}})):e.preventDefault()):(e.preventDefault(),a._showMessage(o.format(n.messages.invalidFileType,l,s)))},_content:function(){var t=this;t.list=e('<div class="k-filemanager-listview" />').appendTo(t.element).on("dblclick"+m,".k-listview-item",d(t._dblClick,t)),t.listView=new o.ui.ListView(t.list,{layout:"flex",flex:{direction:"row",wrap:"wrap"},dataSource:t.dataSource,template:t._itemTmpl(),editTemplate:t._editTmpl(),selectable:!0,autoBind:!1,dataBinding:function(e){t.toolbar.find(".k-i-close").parent().addClass("k-state-disabled"),"remove"!==e.action&&"sync"!==e.action||(e.preventDefault(),o.ui.progress(t.listView.content,!1))},dataBound:function(){t.dataSource.view().length?(t._tiles=this.items().filter("["+o.attr("type")+"=f]"),t._scroll()):this.content.append(w({text:t.options.messages.emptyFolder}))},change:d(t._listViewChange,t)}),t.listView.content.on("scroll"+m,d(t._scroll,t))},_dataSource:function(){var e,t=this,i=t.options,a=i.transport,n=p({},_),s={field:h,dir:"asc"},r={type:a.type||"imagebrowser",sort:[n,s]};l(a)&&(a.path=d(t.path,t),r.transport=a),l(i.schema)?r.schema=i.schema:a.type&&l(o.data.schemas[a.type])&&(e=o.data.schemas[a.type]),t.dataSource&&t._errorHandler?t.dataSource.unbind(u,t._errorHandler):t._errorHandler=d(t._error,t),t.dataSource=o.data.DataSource.create(r).bind(u,t._errorHandler)},_loadImage:function(t){var i=this,a=e(t),n=i.dataSource.getByUid(a.attr(o.attr("uid"))),s=n.get(h),r=i.options.transport.thumbnailUrl,l=e("<img />",{alt:s}),d="?";n._uploading||(l.hide().on("load"+m,function(){e(this).prev().remove().end().addClass("k-image k-file-image").fadeIn()}),a.find(".k-i-loading").after(l),c(r)?r=r(i.path(),encodeURIComponent(s)):(r.indexOf("?")>=0&&(d="&"),r=r+d+"path="+encodeURIComponent(i.path()+s),n._override&&(r+="&_="+(new Date).getTime(),delete n._override)),l.attr("src",r),t.loaded=!0)},_scroll:function(){var e=this;e.options.transport&&e.options.transport.thumbnailUrl&&(clearTimeout(e._timeout),e._timeout=setTimeout(function(){var t=o._outerHeight(e.listView.content),a=e.listView.content.scrollTop(),n=a+t;e._tiles.each(function(){var t=i(this),s=t+this.offsetHeight;if((t>=a&&t<n||s>=a&&s<n)&&e._loadImage(this),t>n)return!1}),e._tiles=e._tiles.filter(function(){return!this.loaded})},250))},_itemTmpl:function(){var e=this,t='<div class="k-listview-item" '+o.attr("uid")+'="#=uid#" ';return t+=o.attr("type")+'="${'+v+'}">',t+="#if("+v+' == "d") { #',t+='<div class="k-file-preview"><span class="k-file-icon k-icon k-i-folder"></span></div>',t+="#}else{#",t+=e.options.transport&&e.options.transport.thumbnailUrl?'<div class="k-file-preview"><span class="k-file-icon k-icon k-i-loading"></span></div>':'<div class="k-file-preview"><span class="k-file-icon k-icon k-i-file"></span></div>',t+="#}#",t+='<span class="k-file-name">${'+h+"}</span>",t+="#if("+v+' == "f") { # <span class="k-file-size">${this.sizeFormatter('+g+")}</span> #}#",t+="</div>",d(o.template(t),{sizeFormatter:n})}}),o.ui.plugin(s)}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()});
//# sourceMappingURL=kendo.imagebrowser.min.js.map
