/** 
 * Kendo UI v2021.2.616 (http://www.telerik.com/kendo-ui)                                                                                                                                               
 * Copyright 2021 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.                                                                                      
 *                                                                                                                                                                                                      
 * Kendo UI commercial licenses may be obtained at                                                                                                                                                      
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  
 * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       

*/
!function(e,define){define("util/text-metrics.min",["kendo.core.min"],e)}(function(){!function(e){function t(e){return(e+"").replace(i,s)}function o(e){var t,o=[];for(t in e)o.push(t+e[t]);return o.sort().join("")}function r(e){var t,o=2166136261;for(t=0;t<e.length;++t)o+=(o<<1)+(o<<4)+(o<<7)+(o<<8)+(o<<24),o^=e.charCodeAt(t);return o>>>0}function l(){return{width:0,height:0,baseline:0}}function n(e,t,o){return u.current.measure(e,t,o)}var a,i,s,d,c,u;window.kendo.util=window.kendo.util||{},a=kendo.Class.extend({init:function(e){this._size=e,this._length=0,this._map={}},put:function(e,t){var o=this._map,r={key:e,value:t};o[e]=r,this._head?(this._tail.newer=r,r.older=this._tail,this._tail=r):this._head=this._tail=r,this._length>=this._size?(o[this._head.key]=null,this._head=this._head.newer,this._head.older=null):this._length++},get:function(e){var t=this._map[e];if(t)return t===this._head&&t!==this._tail&&(this._head=t.newer,this._head.older=null),t!==this._tail&&(t.older&&(t.older.newer=t.newer,t.newer.older=t.older),t.older=this._tail,t.newer=null,this._tail.newer=t,this._tail=t),t.value}}),i=/\r?\n|\r|\t/g,s=" ",d={baselineMarkerSize:1},"undefined"!=typeof document&&(c=document.createElement("div"),c.style.cssText="position: absolute !important; top: -4000px !important; width: auto !important; height: auto !important;padding: 0 !important; margin: 0 !important; border: 0 !important;line-height: normal !important; visibility: hidden !important; white-space: pre!important;"),u=kendo.Class.extend({init:function(t){this._cache=new a(1e3),this.options=e.extend({},d,t)},measure:function(e,n,a){var i,s,d,u,p,h,f,g,m;if(void 0===a&&(a={}),void 0===e||null===e)return l();if(i=o(n),s=r(e+i),d=this._cache.get(s))return d;u=l(),p=a.box||c,h=this._baselineMarker().cloneNode(!1);for(f in n)g=n[f],void 0!==g&&(p.style[f]=g);return m=a.normalizeText!==!1?t(e):e+"",p.textContent=m,p.appendChild(h),document.body.appendChild(p),m.length&&(u.width=p.offsetWidth-this.options.baselineMarkerSize,u.height=p.offsetHeight,u.baseline=h.offsetTop+this.options.baselineMarkerSize),u.width>0&&u.height>0&&this._cache.put(s,u),p.parentNode.removeChild(p),u},_baselineMarker:function(){var e=document.createElement("div");return e.style.cssText="display: inline-block; vertical-align: baseline;width: "+this.options.baselineMarkerSize+"px; height: "+this.options.baselineMarkerSize+"px;overflow: hidden;",e}}),u.current=new u,kendo.deepExtend(kendo.util,{LRUCache:a,TextMetrics:u,measureText:n,objectKey:o,hashKey:r,normalizeText:t})}(window.kendo.jQuery)},"function"==typeof define&&define.amd?define:function(e,t,o){(o||t)()}),function(e,define){define("kendo.grid.min",["kendo.data.min","kendo.columnsorter.min","kendo.editable.min","kendo.window.min","kendo.filtermenu.min","kendo.columnmenu.min","kendo.groupable.min","kendo.pager.min","kendo.selectable.min","kendo.sortable.min","kendo.reorderable.min","kendo.resizable.min","kendo.ooxml.min","kendo.excel.min","kendo.pane.min","kendo.progressbar.min","kendo.pdf.min","kendo.dialog.min","kendo.pane.min","kendo.switch.min"],e)}(function(){return function(e,t){function o(e,t){return"["+Je.attr(e)+"="+t+"]"}function r(e){return Array(e+1).join('<td class="k-group-cell">&nbsp;</td>')}function l(e){var t,o=" ";if(e){if(typeof e===Mo)return e;for(t in e)""!==e[t]&&(o+=t+'="'+e[t]+'"')}return o}function n(t,o){e("th, th .k-grid-filter, th .k-link",t).add(document.body).css("cursor",o)}function a(t,o,r,l,n){var a,i=o;for(o=e(),n=n||1,a=0;a<n;a++)o=o.add(t.eq(i+a));"number"==typeof r?o[l?"insertBefore":"insertAfter"](t.eq(r)):o.appendTo(r)}function i(t,o,r){return e(t).add(o).find(r)}function s(e,t,o){var r,l,n,a;for(o=ct(o)?o:[o],r=0,l=o.length;r<l;r++)n=o[r],at(n)&&n.click&&(a=n.name||n.text,t.on(zo+Dt,"a.k-grid-"+(a||"").replace(/\s/g,""),{commandName:a},ht(n.click,e)))}function d(e,t,o,r,l){return st(e,function(e){var n,a;return e=typeof e===Mo?{field:e}:e,e.parentIds=l,b(e)&&!o||(e.attributes=ce(e.attributes),e.footerAttributes=ce(e.footerAttributes),e.headerAttributes=ce(e.headerAttributes),n=!0),a=Je.guid(),r&&!e.locked&&(e.locked=r),e.headerAttributes=it({headers:l},e.headerAttributes),e.headerAttributes.id?a=e.headerAttributes.id:(e.headerAttributes=it({id:a},e.headerAttributes),e.uid=a),e.columns&&(e.columns=d(e.columns,t,n,e.locked,l?l+" "+a:a)),it({encoded:t,hidden:n,locked:r},e)})}function c(e,t){var o=[];return u(e,t,o),o[o.length-1]}function u(e,t,o){var r,l;for(o=o||[],r=0;r<t.length;r++){if(e===t[r])return!0;if(t[r].columns){if(l=o.length,o.push(t[r]),u(e,t[r].columns,o))return!0;o.splice(l,o.length-l)}}return!1}function p(e,t){h(e,t,t)}function h(e,t,o){var r=o?pe:ce;e.hidden=!t,e.attributes=r(e.attributes),e.footerAttributes=r(e.footerAttributes),e.headerAttributes=r(e.headerAttributes)}function f(e,t){g(e);var o=e._hideByMedia;h(e,t,o?e.matchesMedia:t)}function g(e){e.matchesMedia=m(e)}function m(e){return e&&(w(e.media)||!w(e.media)&&Je.matchesMedia(e.media))}function _(){return"none"!==this.style.display}function k(t){return"none"!==e(t)[0].style.display}function b(e){return v([e]).length>0}function v(e){return dt(e,function(e){var t=!e.hidden&&e.matchesMedia!==!1;return t&&e.columns&&(t=v(e.columns).length>0),t})}function C(e){var t,o,r=[];for(o=0;o<e.length;o++){if(t=e[o],!w(t.media)){if(!w(t.minScreenWidth))throw Error("Using 'media' and 'minScreenWidth' options at the same time is not supported.");r.push(t)}t.columns&&(r=r.concat(C(t.columns)))}return r}function w(e){return t===e}function y(t){return e(t).map(function(){return this.toArray()})}function S(e,t,o){var r=I(Q(t)),l=I(J(t)),n=e.rowSpan;e.rowSpan=o?r>l?n-(r-l)||1:n+(l-r):r>l?n+(r-l):n-(l-r)||1}function T(e,t){for(var o=0;o<e.length;o++)if(e[o].uid==t)return e[o]}function x(e,t){for(var o=0;o<e.length;o++)if(e[o].field==t)return e[o]}function H(t,o,r,l,n,a,i,s){var d,c,u=I(t),p=I([o]);u>p&&(d=Array(i+1).join('<th class="k-group-cell k-header" scope="col">&nbsp;</th>'),c=a.children(":not(.k-filter-row)"),e(Array(u-p+1).join("<tr>"+d+"</tr>")).insertAfter(c.last())),O(a,u-p),E(r,l,n,a,s)}function R(t,o,r){var l,n,a,i,s,d,c,u;for(r=r||0,a=o,o=le(o),i={},s=t.find(">tr:not(.k-filter-row)"),d=function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")},c=0,u=o.length;c<u;c++)l=z(o[c],a),i[l.row]||(i[l.row]=s.eq(l.row).find(".k-header").filter(d)),n=i[l.row].eq(l.cell),n.attr(Je.attr("index"),r+c);return o.length}function I(e){var t,o,r=1,l=0;for(t=0;t<e.length;t++)e[t].columns&&(o=I(e[t].columns),o>l&&(l=o));return r+l}function E(t,o,r,l,n){var a,i,s=L(t[0],o),d=r.find(">tr:not(.k-filter-row):eq("+s.row+")>th.k-header"),c=e(),u=s.cell;for(a=0;a<t.length;a++)c=c.add(d.eq(u+a));for(l.find(">tr:not(.k-filter-row)").eq(s.row)[n](c),i=[],a=0;a<t.length;a++)t[a].columns&&(i=i.concat(t[a].columns));i.length&&E(i,o,r,l,n)}function z(e,t,o,r){var l,n;for(o=o||0,r=r||{},r[o]=r[o]||0,n=0;n<t.length;n++){if(t[n]==e){l={cell:r[o],row:o};break}if(t[n].columns&&(l=z(e,t[n].columns,o+1,r)))break;r[o]++}return l}function A(e,t,o,r){var l,n,a=!!o.locked;do l=e[t],t+=r?1:-1,n=!!l.locked;while(l&&t>-1&&t<e.length&&l!=o&&!l.columns&&n===a);return l}function D(e,t,o,r,l){var n,a,i,s,d;return t.columns?(t=t.columns,t[r?0:t.length-1]):(n=c(t,e),a=n?n.columns:e,i=ut(t,a),0===i&&r?i++:i==a.length-1&&!r||!o.locked&&!t.columns&&!r?i--:(i>0||0===i&&!r)&&i++,s=ut(o,a),t=A(a,i,o,s>i),d=ut(t,l),(!t.columns||d&&d!==a.length-1)&&t&&t!=o&&t.columns?D(e,t,o,r,l):null)}function L(e,t,o,r){var l,n;for(o=o||0,r=r||{},r[o]=r[o]||0,n=0;n<t.length;n++){if(t[n]==e){l={cell:r[o],row:o};break}if(t[n].columns&&(l=L(e,t[n].columns,o+1,r)))break;t[n].hidden||r[o]++}return l}function F(e){var t=P(Q(e));return t.concat(P(J(e)))}function M(e,t,o,r){var l=e[o],n=e[r],a=c(l,t);return t=a?a.columns:t,ut(n,t)}function P(e){var t,o=[],r=[];for(t=0;t<e.length;t++)o.push(e[t]),e[t].columns&&(r=r.concat(e[t].columns));return r.length&&(o=o.concat(P(r))),o}function W(e){var t,o,r=0;for(o=0;o<e.length;o++)t=e[o],t.columns?r+=W(t.columns):t.hidden&&r++;return r}function q(e){var t,o,r=0;for(t=0,o=e.length;t<o;t++)e[t].hidden||(r+=parseInt(e[t].width,10));return r}function V(e){var t,o,r,l=0;for(o=0,r=e.length;o<r;o++)t=e[o].style.width,t&&t.indexOf("%")==-1&&(l+=parseInt(t,10));return l}function B(e,t){var o,r,l=e.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)");for(r=0;r<l.length;r++)o=l[r].rowSpan,o>1&&(l[r].rowSpan=o-t||1)}function O(e,t){var o,r=e.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)");for(o=0;o<r.length;o++)r[o].rowSpan+=t}function G(t){var o,r=t.find("tr:not(.k-filter-row)"),l=r.filter(function(){return!e(this).children().length}).remove().length,n=r.find("th:not(.k-group-cell,.k-hierarchy-cell)");for(o=0;o<n.length;o++)n[o].rowSpan>1&&(n[o].rowSpan-=l);return r.length-l}function N(e,t,o,r,l){var n,a,i,s=[];for(n=0,i=e.length;n<i;n++)a=o[r]||[],a.push(t.eq(l+n)),o[r]=a,e[n].columns&&(s=s.concat(e[n].columns));s.length&&N(s,t,o,r+1,l+e.length)}function U(e,t,o){e.css({left:t,right:o})}function K(e,t,o){e[t]=e[t]||{},e[t][o]=e[t][o]||""}function j(e,t,o,r){K(e,t,o),""!==e[t][o]?e[t][o]+=" "+r:e[t][o]=r}function $(e,t,o,r){K(e,t,o),e[t][o]=e[t][o].replace(r,"")}function Q(e){return dt(e,function(e){return e.locked})}function J(e){return dt(e,function(e){return!e.locked})}function Y(e){return dt(e,function(e){return e.sticky&&!e.locked})}function X(e){return dt(e,function(e){return e.sticky&&!e.locked&&b(e)})}function Z(e){return dt(e,function(e){return!e.locked&&b(e)})}function ee(e){return dt(e,function(e){return e.locked&&b(e)})}function te(e){var t,o=[];for(t=0;t<e.length;t++)e[t].hidden||(e[t].columns?o=o.concat(te(e[t].columns)):o.push(e[t]));return o}function oe(e){var t,o=[];for(t=0;t<e.length;t++)e[t].columns&&(o=o.concat(e[t].columns));return o}function re(e){var t=oe(e);return t=t.filter(function(e){return!e.hidden})}function le(e){var t,o=[];for(t=0;t<e.length;t++)e[t].columns?o=o.concat(le(e[t].columns)):o.push(e[t]);return o}function ne(e){var t,o=[];for(e=le(e),t=0;t<e.length;t++)"string"==typeof e[t]?o.push(e[t]):e[t].field&&o.push(e[t].field);return o}function ae(o){var r,l=o.find(">tr:not(.k-filter-row)"),n=function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")},a=e();return l.length>1&&(a=l.find("th").filter(n).filter(function(){return this.rowSpan>1})),a=a.add(l.last().find("th").filter(n)),r=Je.attr("index"),a.sort(function(o,l){var n,a;return o=e(o),l=e(l),n=o.attr(r),a=l.attr(r),n===t&&(n=e(o).index()),a===t&&(a=e(l).index()),n=parseInt(n,10),a=parseInt(a,10),n>a?1:n<a?-1:0}),a}function ie(t){var o,r,l,n,a,i,s,d=t.closest("table"),c=e().add(t),u=t.closest("tr"),p=d.find("tr:not(.k-filter-row)"),h=p.index(u);if(h>0){for(o=p.eq(h-1),r=o.find("th:not(.k-group-cell,.k-hierarchy-cell)").filter(function(){return!e(this).attr("rowspan")}),l=0,n=u.find("th:not(.k-group-cell,.k-hierarchy-cell)").index(t),a=t.prevAll(":not(.k-group-cell,.k-hierarchy-cell)").filter(function(){return this.colSpan>1}),i=0;i<a.length;i++)l+=a[i].colSpan||1;for(n+=Math.max(l-1,0),l=0,i=0;i<r.length;i++)if(s=r.eq(i),l+=s.attr("data-colspan")?s[0].getAttribute("data-colspan"):1,n>=i&&n<l){c=ie(s).add(c);break}}return c}function se(t){var o,r,l,n,a,i,s,d=t.closest("thead"),c=e().add(t),u=t.closest("tr"),p=d.find("tr:not(.k-filter-row)"),h=p.index(u)+t[0].rowSpan,f=Je.attr("colspan");if(h<=p.length-1){for(o=u.next(),r=t.prevAll(":not(.k-group-cell,.k-hierarchy-cell)"),r=r.filter(function(){return!this.rowSpan||1===this.rowSpan}),n=0,l=0;l<r.length;l++)n+=parseInt(r.eq(l).attr(f),10)||1;for(a=o.find("th:not(.k-group-cell,.k-hierarchy-cell)"),i=parseInt(t.attr(f),10)||1,l=0;l<i;)o=a.eq(l+n),c=c.add(se(o)),s=parseInt(o.attr(f),10),s>1&&(i-=s-1),l++}return c}function de(t,o,r,l){var n,a=t;return l&&t.empty(),et?t[0].innerHTML=r:(n=document.createElement("div"),n.innerHTML="<table><tbody>"+r+"</tbody></table>",t=n.firstChild.firstChild,o[0].replaceChild(t,a[0]),t=e(t)),t}function ce(e){e=e||{};var t=e.style;return t?(t=t.replace(/display:[^;]*/i,"display:none"),t.match(/display:/i)||(t=t.replace(/(.*)?/i,"display:none;$1"))):t="display:none",it({},e,{style:t})}function ue(e){e=e||{};var t=e.style||"";return t.indexOf("display:none")!==-1}function pe(e){e=e||{};var t=e.style;return t&&(e.style=t.replace(/(display\s*:\s*none\s*;?)*/gi,"")),e}function he(t,o,r,l){var n,a=t.find(">colgroup"),i=st(o,function(e){return n=e.width,n&&0!==parseInt(n,10)?Je.format('<col style="width:{0}"/>',typeof n===Mo?n:n+"px"):"<col />"});(r||a.find(".k-hierarchy-col").length)&&i.splice(0,0,'<col class="k-hierarchy-col" />'),a.length&&a.remove(),a=e(Array(l+1).join('<col class="k-group-col">')+i.join("")),a.is("colgroup")||(a=e("<colgroup/>").append(a)),t.prepend(a)}function fe(e,t){var o,r,l=0,n=e.find("th:not(.k-group-cell)");for(o=0,r=t.length;o<r;o++)t[o].locked&&(n.eq(o).insertBefore(n.eq(l)),n=e.find("th:not(.k-group-cell)"),l++)}function ge(e){var t,o,r,l={};for(o=0,r=e.length;o<r;o++)t=e[o],l[t.value]=t.text;return l}function me(e,t,o,r){var l=o&&o.length&&at(o[0])&&"value"in o[0],n=l?ge(o)[e]:e;return n=null!=n?n:"",t?Je.format(t,n):r===!1?n:Je.htmlEncode(n)}function _e(e,t,o){for(var r,l=0,n=e[l];n;){if(r=!!o||"none"!==n.style.display,r&&!sr.test(n.className)&&--t<0){n.style.display=o?"":"none";break}n=e[++l]}}function ke(t,o){for(var r,l,n=0,a=t.length;n<a;n+=1)l=t.eq(n),l.is(".k-grouping-row,.k-detail-row")?(r=l.children(":not(.k-group-cell):first,.k-detail-cell").last(),r.attr("colspan",parseInt(r.attr("colspan"),10)-1)):(l.hasClass("k-grid-edit-row")&&(r=l.children(".k-edit-container")[0])&&(r=e(r),r.attr("colspan",parseInt(r.attr("colspan"),10)-1),r.find("col").eq(o).remove(),l=r.find("tr:first")),_e(l[0].cells,o,!1))}function be(e){var t,o,r=[];for(o=0;o<e.length&&(t=e[o],"field"in t&&"value"in t&&"items"in t);o++)r.push(t),t.hasSubgroups&&(r=r.concat(be(t.items)));return r}function ve(e){var t,o,r=[];for(o=0;o<e.length&&(t=e[o],"field"in t&&"value"in t&&"items"in t);o++)t.hasSubgroups&&(r=r.concat(ve(t.items))),r.push(t.aggregates);return r}function Ce(t,o){for(var r,l,n,a=0,i=t.length;a<i;a+=1)l=t.eq(a),l.is(".k-grouping-row,.k-detail-row")?(r=l.children(":not(.k-group-cell):first,.k-detail-cell").last(),r.attr("colspan",parseInt(r.attr("colspan"),10)+1)):(l.hasClass("k-grid-edit-row")&&(r=l.children(".k-edit-container")[0])&&(r=e(r),r.attr("colspan",parseInt(r.attr("colspan"),10)+1),he(r.find(">form>table"),v(n),!1,0),l=r.find("tr:first")),_e(l[0].cells,o,!0))}function we(e,t,o){o=o||1;var r,l,n;for(l=0,n=e.length;l<n;l++)r=e.eq(l).children().last(),r.attr("colspan",parseInt(r.attr("colspan"),10)+o),r=t.eq(l).children().last(),r.attr("colspan",parseInt(r.attr("colspan"),10)-o)}function ye(e){var t,o,r=0,l=e.find(">colgroup>col");for(t=0,o=l.length;t<o;t+=1)r+=parseInt(l[t].style.width,10);return r}function Se(e,t){var o,r,l,n;e=e[0],t=t[0],e.rows.length!==t.rows.length&&(o=e.offsetHeight,r=t.offsetHeight,o>r?(l=t.rows[t.rows.length-1],dr.test(l.className)&&(l=t.rows[t.rows.length-2]),n=o-r):(l=e.rows[e.rows.length-1],dr.test(l.className)&&(l=e.rows[e.rows.length-2]),n=r-o),l.style.height=l.offsetHeight+n+"px")}function Te(e,t){var o,r=e.offsetHeight,l=t.offsetHeight;r>l?o=r+"px":r<l&&(o=l+"px"),o&&(e.style.height=t.style.height=o)}function xe(e,t){var o,r,l;if(typeof e===Mo&&e===t)return e;if(at(e)&&e.name===t)return e;if(ct(e))for(o=0,r=e.length;o<r;o++)if(l=e[o],typeof l===Mo&&l===t||l.name===t)return l;return null}function He(t,o){if(o===!0){t=e(t);var r=Je.scrollLeft(t.parent());Je.focusElement(t),Je.scrollLeft(t.parent(),r)}else e(t).one("focusin",function(e){e.preventDefault()}).focus()}function Re(e,o){return e.options.groupable&&(o.groupable||o.groupable===t)}function Ie(t,o){return!!e.grep(t,function(e){return e.field===o}).length}function Ee(e,t){return!(!e.field||e.selectable)&&(!(t.editable&&!t.editable(e.field))&&!(e.editable&&!e.editable(t)))}function ze(t){return e(t).is(":button,a,:input,a>.k-icon,textarea,span.k-select,span.k-icon,span.k-link,label.k-checkbox-label,.k-input,.k-multiselect-wrap,.k-picker-wrap,.k-picker-wrap>.k-selected-color,.k-tool-icon,.k-dropdown")}function Ae(o){var r=e(o.currentTarget),l=r.is("th"),n=this.table.add(this.lockedTable),a=this.thead.parent().add(e(">table",this.lockedHeader)),i=ze(o.target),s=e(o.target).is(".k-checkbox"),d=e(o.target),c=r.closest("table")[0];return i&&r.find(Je.roleSelector("filtercell")).length?(this._setCurrent(r),t):(c!==n[0]&&c!==n[1]&&c!==a[0]&&c!==a[1]||d.is("a.k-i-expand, a.k-i-collapse")||(this.options.navigatable&&this._setCurrent(r,!1,s),!l&&i||setTimeout(function(){e(Je._activeElement()).hasClass("k-widget")||!e(Je._activeElement()).is(uo)&&ze(Je._activeElement())&&e.contains(c,Je._activeElement())||He(c,!0)}),l&&!Je.support.touch&&o.preventDefault()),t)}function De(e,t){if(!t)return 0;var o=0;return Je.support.browser.webkit&&(o=e.width()),o}function Le(e){var o;return"string"==typeof e?(o=e.toLowerCase(),"true"===o?{rows:!0}:{rows:o.indexOf("rows")>-1,columns:o.indexOf("columns")>-1}):e===!0?{rows:!0}:t}function Fe(t,o){var r,l;return!!t&&(o=e(o),!!(o[0]&&mt(t[0],o[0])&&(r=o.offset().top-t.offset().top,l=o.outerHeight()/2,(r>=0||_t.abs(r)<=l)&&_t.floor(r+l)<=t.height())))}function Me(e){return e&&(e.hasClass("k-edit-cell")||e.parent().hasClass("k-grid-edit-row"))}function Pe(e){return'<td colspan="#=data.colspan +'+e+'#"><p class="k-reset"><a class="k-icon k-i-collapse" href="\\#" tabindex="-1" '+or+'="'+er+'"></a>#=data.text#</p></td>'}function We(e){return'<td colspan="'+e+'"><p class="k-reset">&nbsp;</p></td>'}function qe(e,t,o,l,n,a){return'<tr role="row"'+(a?'data-group-uid="'+n+'"':"")+'class="k-grouping-row">'+r(t)+'<td colspan="'+e+'" aria-expanded="'+!!l+'"><p class="k-reset"><a class="k-icon '+(l?"k-i-collapse":"k-i-expand")+'" href="#" tabindex="-1" '+or+'="'+(l?er:tr)+'"></a>'+o+"</p></td></tr>"}function Ve(e){return'<tr role="row" class="k-grouping-row"><td colspan="'+e+'" aria-expanded="true"><p class="k-reset">&nbsp;</p></td></tr>'}function Be(t,o){t=e(t)[0],t.style.display=o?"":"none"}function Oe(e,t){var o=/&/g,r=/</g,l=/"/g,n=/'/g,a=/>/g;return(""+e).replace(o,"&amp;").replace(r,"&lt;").replace(a,"&gt;").replace(l,function(e){return t?"\\"+e:"&quot;"}).replace(n,"&#39;")}function Ge(e,t){return t.filter(function(t){return t.field===e})[0].title||e}function Ne(e,t){return this.dataSource.indexOf(this.dataSource.getByUid(e.uid))-this.dataSource.indexOf(this.dataSource.getByUid(t.uid))}function Ue(e){return!(e.exportable===!1||e.exportable&&e.exportable.excel===!1)}var Ke,je,$e,Qe,Je=window.kendo,Ye=Je.ui,Xe=Je.data.DataSource,Ze=Je.data.ObservableObject,et=Je.support.tbodyInnerHtml,tt=Je._activeElement,ot=Ye.Widget,rt=Je._outerWidth,lt=Je._outerHeight,nt=Je.keys,at=e.isPlainObject,it=e.extend,st=e.map,dt=e.grep,ct=e.isArray,ut=e.inArray,pt=Array.prototype.push,ht=e.proxy,ft=Je.isFunction,gt=e.isEmptyObject,mt=e.contains,_t=Math,kt=".",bt="progress",vt="error",Ct="k-hierarchy-cell",wt=":not(.k-group-cell):not(["+Je.attr("virtual")+"]):not(.k-hierarchy-cell:not(:has(.k-icon.k-i-collapse,.k-icon.k-i-expand))):visible",yt="tbody>tr:not(.k-grouping-row):not(.k-detail-row):not(.k-group-footer) > td:not(.k-group-cell):not(.k-hierarchy-cell)",St="tr:not(.k-footer-template):visible",Tt=":not(.k-group-cell):not(.k-detail-cell):not(.k-hierarchy-cell):visible",xt="tr:not(.k-grouping-row):not(.k-detail-row):not(.k-footer-template):not(.k-group-footer):visible",Ht="col:not(.k-group-col, .k-hierarchy-col)",Rt=xt+":first",It=xt+":last",Et=St+":first>"+Tt+":first",zt="th.k-header:not(.k-group-cell):not(.k-hierarchy-cell)",At=".k-grid.k-widget",Dt=".kendoGrid",Lt="k-grid-content-locked",Ft="k-group-cell",Mt="edit",Pt="beforeEdit",Wt="save",qt="remove",Vt="detailInit",Bt="filterMenuInit",Ot="columnMenuInit",Gt="filterMenuOpen",Nt="columnMenuOpen",Ut="cellClose",Kt="change",jt="columnHide",$t="columnShow",Qt="saveChanges",Jt="dataBound",Yt="detailExpand",Xt="detailCollapse",Zt="itemchange",eo="page",to="paging",oo="scroll",ro="sync",lo="loadStart",no="loadEnd",ao="k-state-focused",io=":kendoFocusable",so="k-state-selected",co="k-checkbox",uo="input[data-role='checkbox']."+co,po="k-grid-norecords",ho="k-link",fo="k-icon",go="k-sort-order",mo="k-sorted",_o="k-header-column-menu",ko="k-grid-filter",bo="k-grid-content-sticky",vo="k-grid-header-sticky",Co="k-grid-footer-sticky",wo="k-grid-no-left-border",yo="resize",So="columnResize",To="columnReorder",xo="columnLock",Ho="columnUnlock",Ro="columnStick",Io="columnUnstick",Eo="navigate",zo="click",Ao="mousedown",Do="height",Lo="tabIndex",Fo="function",Mo="string",Po="bottom",Wo="container-for",qo="field",Vo="input",Bo="incell",Oo="inline",Go="uid",No=1,Uo="colSpan",Ko="overflow",jo="hidden",$o="sort",Qo="group-sort",Jo="Are you sure you want to delete this record?",Yo="No records available.",Xo="Delete",Zo="Cancel",er="Collapse",tr="Expand",or="aria-label",rr=/(\}|\#)/gi,lr=/#/gi,nr="[\\x20\\t\\r\\n\\f]",ar=RegExp("(\\s*left\\s*:\\s*\\d*px;?)*","ig"),ir=RegExp("(\\s*right\\s*:\\s*\\d*px;?)*","ig"),sr=RegExp("(^|"+nr+")(k-group-cell|k-hierarchy-cell)("+nr+"|$)"),dr=RegExp("(^|"+nr+")(k-filter-row)("+nr+"|$)"),cr='# if (iconClass) {#<a role="button" class="k-button k-button-icontext #=className#" #=attr# href="\\#"><span class="#=iconClass#"></span>#=text#</a># } else { #<a role="button" class="k-button k-button-icontext #=className#" #=attr# href="\\#">#=text#</a># } #',ur='<input class="'+co+'" data-role="checkbox" aria-label="Select row" aria-checked="false" type="checkbox">',pr='<input class="'+co+'" data-role="checkbox" aria-label="Select all rows" aria-checked="false" type="checkbox">',hr=!1,fr=Je.support.browser,gr=fr.msie&&11===fr.version,mr=/Mac OS/.test(navigator.userAgent),_r={content:"k-content",widget:"k-widget",scrollContainer:"k-scroll-container"};Ye.Pager&&(Ke=Ye.Pager.extend({init:function(e,t){Ye.Pager.fn.init.call(this,e,it(!0,{},t)),this.dataSource.options.useRanges=!0,this.dataSource._omitPrefetch=!0},options:{name:"GroupsPager"},totalPages:function(){var e=this;return Math.ceil((e._collapsedTotal()||0)/(e.pageSize()||1))},_collapsedTotal:function(){var e=this.dataSource;return e?e.groupsTotal(!0)||0:0}})),je=ot.extend({init:function(e,t){var o=this;ot.fn.init.call(o,e,t),o._refreshHandler=ht(o.refresh,o),o.setDataSource(t.dataSource),o.wrap()},setDataSource:function(e){var t=this;t.dataSource&&t.dataSource.unbind(Kt,t._refreshHandler),t.dataSource=e,t.dataSource.bind(Kt,t._refreshHandler),t.dataSource.options.useRanges=!0},options:{name:"VirtualScrollable",itemHeight:e.noop,prefetch:!0,maxScrollHeight:25e4},events:[to,eo,oo,lo,no],destroy:function(){var e=this;ot.fn.destroy.call(e),e.dataSource.unbind(Kt,e._refreshHandler),e.wrapper.add(e.verticalScrollbar).off(Dt),clearTimeout(e._timeout),e._scrollingTimeout&&clearTimeout(e._scrollingTimeout),e.drag&&(e.drag.destroy(),e.drag=null),e.wrapper=e.element=e.verticalScrollbar=null,e._refreshHandler=null},wrap:function(){var t,o=this,r=Je.support.scrollbar()+1,l=o.element;l.css({width:"auto",overflow:"hidden"}).css(hr?"padding-left":"padding-right",r),o.content=l.children().first(),t=o.wrapper=o.content.wrap('<div class="k-virtual-scrollable-wrap"/>').parent().bind("DOMMouseScroll"+Dt+" mousewheel"+Dt,ht(o._wheelScroll,o)),o._wrapper(),(Je.support.kineticScrollNeeded||Je.support.touch)&&(o.wrapper.css("touch-action","none"),o.drag=new Je.UserEvents(o.wrapper,{global:!0,allowSelection:!0,start:function(e){e.sender.capture()},move:function(e){o.verticalScrollbar.scrollTop(o.verticalScrollbar.scrollTop()-e.y.delta),Je.scrollLeft(t,Je.scrollLeft(t)-e.x.delta),e.preventDefault()}})),o.verticalScrollbar=e('<div class="k-scrollbar k-scrollbar-vertical" />').css({width:r}).appendTo(l).bind("scroll"+Dt,ht(o._scroll,o))},_wrapper:function(){var e=this;gr&&(e.wrapper.css({"overflow-y":oo}),e.element.css(hr?"padding-left":"padding-right",0))},_wheelScroll:function(e){if(!e.ctrlKey){var t=this.verticalScrollbar,o=t.scrollTop(),r=Je.wheelDeltaY(e);!r||r>0&&0===o||r<0&&o+t[0].clientHeight==t[0].scrollHeight||(e.preventDefault(),this.verticalScrollbar.scrollTop(o+-r))}},_scroll:function(e){var o=this,r=!o.options.prefetch,l=e.currentTarget.scrollTop,n=o.dataSource,a=o.itemHeight,i=n.skip()||0,s=o._rangeStart||i,d=o.element.innerHeight(),c=!!(o._scrollbarTop&&o._scrollbarTop>l),u=_t.max(_t.floor(l/a),0),p=c?_t.ceil(d/a):_t.floor(d/a),h=_t.max(u+p,0);return o._preventScroll?(o._preventScroll=!1,t):(o._prevScrollTop=o._scrollTop,o._scrollTop=l-s*a,o._scrollbarTop=l,o._scrolling=r,o._fetch(u,h,c)||(o.wrapper[0].scrollTop=o._scrollTop),o.trigger(oo),r&&(o._scrollingTimeout&&clearTimeout(o._scrollingTimeout),o._scrollingTimeout=setTimeout(function(){o._scrolling=!1,o._page(o._rangeStart,o.dataSource.take())},100)),t)},scrollToTop:function(){this._scrollTo(0)},scrollToBottom:function(){var e=this.verticalScrollbar;this._scrollTo(e[0].scrollHeight-e.height())},_scrollWrapperToTop:function(){this.wrapper.scrollTop(0)},_scrollWrapperToBottom:function(){this.wrapper.scrollTop(this.wrapper[0].scrollHeight)},_scrollWrapperOnColumnResize:function(){var e=this,t=this.wrapper,o=t.scrollTop();t[0].scrollWidth>t[0].clientWidth?(!e._wrapperScrolled&&o||e._isScrolledToBottom())&&(t.scrollTop(o+Je.support.scrollbar()),e._scrollTop=t.scrollTop(),e._wrapperScrolled=!0):e._wrapperScrolled&&(e._isWrapperScrolledToBottom()||(t.scrollTop(o-Je.support.scrollbar()),e._scrollTop=t.scrollTop()),e._wrapperScrolled=!1)},_scrollTo:function(e){var t=this,o=t.verticalScrollbar;o.scrollTop()!==e&&(t._preventScroll=!0),t.wrapper.scrollTop(e),t._scrollTop=t.wrapper.scrollTop(),o.scrollTop(e),t._scrollbarTop=o.scrollTop()},_isScrolledToTop:function(){return 0===this.verticalScrollbar.scrollTop()},_isScrolledToBottom:function(){var e=this.verticalScrollbar,t=e.scrollTop();return t>0&&t>=parseInt(e[0].scrollHeight-e.height(),10)},_isWrapperScrolledToBottom:function(){var e=this.wrapper;return e.scrollTop()>=parseInt(e[0].scrollHeight-e.height(),10)},itemIndex:function(e){var t=this._rangeStart||this.dataSource.skip()||0;return t+e},position:function(e){var t,o=this._rangeStart||this.dataSource.skip()||0,r=this.dataSource.pageSize();return t=e>o?e-o:o-e-1,t>r?r:t},scrollIntoView:function(e){var t=this.wrapper[0],o=t.clientHeight,r=this._isScrolledToBottom()?t.scrollTop:this._scrollTop||t.scrollTop,l=e[0].offsetTop,n=e[0].offsetHeight;r>l?this.verticalScrollbar[0].scrollTop-=o/2:l+n>=r+o&&(this.verticalScrollbar[0].scrollTop+=o/2)},_fetch:function(t,o,r){var l=this,n=l.dataSource,a=l.itemHeight,i=n.take(),s=l._rangeStart||n.skip()||0,d=_t.floor(t/i)*i,c=!1,u=.33,p=l.verticalScrollbar,h=fr.webkit?1:0,f=n._isGroupPaged()?n.groupsTotal(!0):n.total();return t<s?(c=!0,s=_t.max(0,o-i),l._scrollTop=p.scrollTop()-s*a,l._page(s,i)):o>=s+i&&!r?(c=!0,s=_t.min(t,f-i),l._scrollTop=p.scrollTop()>=p[0].scrollHeight-p[0].offsetHeight-h?l.wrapper[0].scrollHeight-l.wrapper[0].offsetHeight:l.dataSource._isGroupPaged()&&t>=f-i?l.wrapper[0].scrollHeight-l.wrapper[0].offsetHeight-(l._scrollTop-l._prevScrollTop):a,l._page(s,i)):!l._fetching&&l.options.prefetch&&(t<d+i-i*u&&t>i&&n.prefetch(d-i,i,e.noop),o>d+i*u&&n.prefetch(d+i,i,e.noop)),c},fetching:function(){return this._fetching},_page:function(t,o,r){var l=this,n=!l.options.prefetch,a=l.dataSource,i=a._isGroupPaged();r=ft(r)?r:e.noop,l.trigger(to,{skip:t,take:o})||(clearTimeout(l._timeout),l._fetching=!0,l._rangeStart=t,i&&a._groupRangeExists(t,t+o)||!i&&a.inRange(t,o)?(l.trigger(lo),a.range(t,o,function(){l.trigger(no),r(),l.trigger(eo)},"page")):(n||l.trigger(lo),l._timeout=setTimeout(function(){l._scrolling||(n&&l.trigger(lo),a.range(t,o,function(){l.trigger(no),r(),l.trigger(eo)}))},100)))},repaintScrollbar:function(e){var o,r=this,l="",n=r.options.maxScrollHeight,a=r.dataSource,i=Je.support.kineticScrollNeeded?0:Je.support.scrollbar(),s=r.wrapper[0],d=r._isScrolledToBottom(),c=r.itemHeight=r.options.itemHeight()||0,u=s.scrollWidth>s.offsetWidth?i:0,p=(a._isGroupPaged()?a.groupsTotal(!0):a.total())*c+u;for(o=0;o<_t.floor(p/n);o++)l+='<div style="width:1px;height:'+n+'px"></div>';p%n&&(l+='<div style="width:1px;height:'+p%n+'px"></div>'),r.verticalScrollbar.html(l),!d||r._isScrolledToBottom()||r.dataSource._isGroupPaged()||r.scrollToBottom(),t!==r._scrollTop&&e&&(s.scrollTop=r._scrollTop,r._scrollWrapperOnColumnResize())},refresh:function(e){var o=this,r=o.dataSource,l=o._rangeStart,n=(e||{}).action,a=o._isScrolledToBottom()||!n||n!==Zt&&n!==qt&&n!==ro;o.trigger(no),clearTimeout(o._timeout),o.repaintScrollbar(a),o.drag&&o.drag.cancel(),t===l||o._fetching||((!n||n!==ro&&n!==Zt&&"expandGroup"!==n)&&(o._rangeStart=r.skip()),1!==r.page()||n&&(n===ro||n===Zt||"expandGroup"===n||"collapseGroup"===n)||(o.verticalScrollbar[0].scrollTop=0)),o._fetching=!1}}),$e={create:{text:"Add new record",className:"k-grid-add",iconClass:"k-icon k-i-plus"},cancel:{text:"Cancel changes",className:"k-grid-cancel-changes",iconClass:"k-icon k-i-cancel"},save:{text:"Save changes",className:"k-grid-save-changes",iconClass:"k-icon k-i-check"},destroy:{text:"Delete",className:"k-grid-delete",iconClass:"k-icon k-i-close"},edit:{text:"Edit",className:"k-grid-edit",iconClass:"k-icon k-i-edit"},update:{text:"Update",className:"k-primary k-grid-update",iconClass:"k-icon k-i-check"},canceledit:{text:"Cancel",className:"k-grid-cancel",iconClass:"k-icon k-i-cancel"},excel:{text:"Export to Excel",className:"k-grid-excel",iconClass:"k-icon k-i-file-excel"},pdf:{text:"Export to PDF",className:"k-grid-pdf",iconClass:"k-icon k-i-file-pdf"},search:{text:"Search...",className:"k-grid-search"}},Qe=Je.ui.DataBoundWidget.extend({init:function(t,o,r){var l=this;o=ct(o)?{dataSource:o}:o,ot.fn.init.call(l,t,o),r&&(l._events=r),hr=Je.support.isRtl(t),l._element(),l._aria(),l._columns(e.extend(!0,[],l.options.columns)),l._foreignKeyPromises?e.when.apply(null,l._foreignKeyPromises).then(function(){l._foreignKeyPromises=null,l._continueInit()}):l._continueInit()},_continueInit:function(){var t=this;t._dataSource(),t._stickyColumns(),t._tbody(),t._thead(),t._groupable(),t._toolbar(),t._pageable(),t._setContentHeight(),t._templates(),t._navigatable(),t._selectable(),t._clipboard(),t._details(),t._editable(),t._attachCustomCommandsEvent(),t._adaptiveColumns(),t._minScreenSupport(),t.options.autoBind?t.dataSource.fetch():(t._group=t._groups()>0,t._footer()),t.lockedContent&&(t.wrapper.addClass("k-grid-lockedcolumns"),t._resizeHandler=function(){t.resize()},e(window).on("resize"+Dt,t._resizeHandler)),Je.notify(t)},events:[Kt,"dataBinding","cancel",Jt,Yt,Xt,Vt,Bt,Gt,Ot,Nt,Mt,Pt,Wt,qt,Qt,Ut,So,To,$t,jt,xo,Ho,Ro,Io,Eo,"page","sort","filter","group","groupExpand","groupCollapse","kendoKeydown"],setDataSource:function(e){var t,o=this,r=o.options.scrollable;o.options.dataSource=e,o._dataSource(),o._pageable(),o._thead(),r&&(r.virtual?(t=o.content.find(">.k-virtual-scrollable-wrap"),Je.scrollLeft(t,De(t,hr))):(t=o.tbody,Je.scrollLeft(o.content,De(t,hr)))),o.options.groupable&&o._groupable(),o.virtualScrollable&&o.virtualScrollable.setDataSource(o.options.dataSource),o.options.navigatable&&o._navigatable(),o.options.selectable&&o._selectable(),o.options.autoBind?o.dataSource.fetch():o._footer()},options:{name:"Grid",columns:[],toolbar:null,autoBind:!0,filterable:!1,scrollable:!0,sortable:!1,selectable:!1,allowCopy:!1,navigatable:!1,pageable:!1,persistSelection:!1,editable:!1,encodeTitles:!1,groupable:!1,rowTemplate:"",altRowTemplate:"",search:!1,noRecords:!1,dataSource:{},height:null,resizable:!1,reorderable:!1,columnMenu:!1,detailTemplate:null,columnResizeHandleWidth:3,mobile:"",loaderType:"loadingPanel",messages:{editable:{cancelDelete:Zo,confirmation:Jo,confirmDelete:Xo},commands:{create:$e.create.text,cancel:$e.cancel.text,save:$e.save.text,destroy:$e.destroy.text,edit:$e.edit.text,update:$e.update.text,canceledit:$e.canceledit.text,excel:$e.excel.text,pdf:$e.pdf.text,search:$e.search.text},noRecords:Yo,expandCollapseColumnHeader:"",groupHeader:"Press ctrl + space to group",
ungroupHeader:"Press ctrl + space to ungroup"},width:null},destroy:function(){var t,o=this;o._angularItems("cleanup"),o._destroyColumnAttachments(),ot.fn.destroy.call(o),this._navigatableTables&&(this._navigatableTables.off(Dt),this._navigatableTables=null,this._headertables=null),o._resizeHandler&&e(window).off("resize"+Dt,o._resizeHandler),o.pager&&o.pager.element&&o.pager.destroy(),o.timer&&clearTimeout(o.timer),o._progressTimeOut&&clearTimeout(o._progressTimeOut),o._collapseGroupsTimeOut&&clearTimeout(o._collapseGroupsTimeOut),o._endlessFetchTimeOut&&clearTimeout(o._endlessFetchTimeOut),o.pager=null,o._destroyGroupable(),o.options.reorderable&&o.wrapper.data("kendoReorderable").destroy(),o.selectable&&o.selectable.element&&(o.selectable.destroy(),o.clearArea(),o._selectedIds=null,o.copyHandler&&(o.wrapper.off("keydown",o.copyHandler),o.unbind(o.copyHandler)),o.updateClipBoardState&&(o.unbind(o.updateClipBoardState),o.updateClipBoardState=null),o.clearAreaHandler&&o.wrapper.off("keyup",o.clearAreaHandler)),o.selectable=null,o.resizable&&(o.resizable.destroy(),o._resizeUserEvents&&(o._resizeHandleDocumentClickHandler&&e(document).off("click",o._resizeHandleDocumentClickHandler),o._resizeUserEvents.destroy(),o._resizeUserEvents=null),o.resizable=null),o._destroyVirtualScrollable(),o.editableUserEvents&&(o.editableUserEvents.destroy(),o.editableUserEvents=null),o._lockedContentUserEvents&&(o._lockedContentUserEvents.destroy(),o._lockedContentUserEvents=null),o._destroyEditable(),o.dataSource&&(o.dataSource.unbind(Kt,o._refreshHandler).unbind(bt,o._progressHandler).unbind(vt,o._errorHandler).unbind($o,o._clearSortClasses),o._refreshHandler=o._progressHandler=o._errorHandler=o._clearSortClasses=null),t=o.element.add(o.wrapper).add(o.table).add(o.thead).add(o.wrapper.find(">.k-grid-toolbar")),o.content&&(t=t.add(o.content).add(o.content.find(">.k-virtual-scrollable-wrap"))),o.lockedHeader&&o._removeLockedContainers(),o.pane&&o.pane.destroy(),o._isMobile&&(o.wrapper.off("transitionend"+Dt),o.wrapper.off("contextmenu"+Dt)),o.minScreenResizeHandler&&e(window).off("resize",o.minScreenResizeHandler),o._detachColumnMediaResizeHandler(),o._draggableInstance&&o._draggableInstance.element&&o._draggableInstance.destroy(),o._draggableInstance=null,t.off(Dt),Je.destroy(o.wrapper),o.rowTemplate=o.altRowTemplate=o.lockedRowTemplate=o.lockedAltRowTemplate=o.detailTemplate=o.footerTemplate=o.groupFooterTemplate=o.lockedGroupFooterTemplate=o.noRecordsTemplate=null,o.scrollables=o.thead=o.tbody=o.element=o.table=o.content=o.footer=o.wrapper=o.lockedTable=o.lockedContent=o.lockedHeader=o.lockedFooter=o._groupableClickHandler=o._groupRows=o._setContentWidthHandler=null},getOptions:function(){var o,r,l,n=this.options;return n.dataSource=null,o=it(!0,{},this.options),o.columns=Je.deepExtend([],this.columns),r=this.dataSource,l=r.options.data&&r._data,r.options.data=null,o.dataSource=e.extend(!0,{},r.options),r.options.data=l,o.dataSource.data=l,o.dataSource.page=r.page(),o.dataSource.filter=e.extend(!0,{},r.filter()),o.dataSource.pageSize=r.pageSize(),o.dataSource.sort=r.sort(),o.dataSource.group=r.group(),o.dataSource.aggregate=r.aggregate(),o.dataSource.transport&&(o.dataSource.transport.dataSource=null),o.pageable&&o.pageable.pageSize&&(o.pageable.pageSize=r.pageSize()),o.$angular=t,o},setOptions:function(e){var t,o,r,l,n=this.getOptions();Je.deepExtend(n,e),e.dataSource?e.dataSource.filter&&(n.dataSource.filter=e.dataSource.filter):n.dataSource=this.dataSource,t=this.wrapper,o=this._events,r=this.element,this.destroy(),this.options=null,this._isMobile&&(l=t.closest(Je.roleSelector("pane")).parent(),l.after(t),l.remove(),t.removeClass("k-grid-mobile")),t[0]!==r[0]&&(t.before(r),t.remove()),r.empty(),this.init(r,n,o),this._setEvents(n)},items:function(){return this.lockedContent?this._items(this.tbody).add(this._items(this.lockedTable.children("tbody"))):this._items(this.tbody)},_items:function(t,o){return t.children().filter(function(){var t=e(this);return!(t.hasClass(o?"k-detail-row":"k-grouping-row")||t.hasClass("k-detail-row")||t.hasClass("k-group-footer"))})},dataItems:function(){var e,t,o,r=Je.ui.DataBoundWidget.fn.dataItems.call(this);if(this.lockedContent){for(e=r.length,t=Array(2*e),o=e;--o>=0;)t[o]=t[o+e]=r[o];r=t}return r},_destroyColumnAttachments:function(){var t=this;t.resizeHandle=null,t.thead&&(this.angular("cleanup",function(){return{elements:t.thead.get()}}),t.thead.add(t.lockedHeader).find("th").each(function(){var t=e(this),o=t.data("kendoFilterMenu"),r=t.data("kendoColumnSorter"),l=t.data("kendoColumnMenu");o&&o.destroy(),r&&r.destroy(),l&&l.destroy()}))},_attachCustomCommandsEvent:function(){var e,t,o,r=this,l=le(r.columns||[]);for(t=0,o=l.length;t<o;t++)e=l[t].command,e&&s(r,r.wrapper,e)},_aria:function(){var e=this.element.attr("id")||"aria";e&&(this._cellId=e+"_active_cell")},_element:function(){var t=this,o=t.element;o.is("table")||(o=t.options.scrollable?t.element.find("> .k-grid-content > table"):t.element.children("table"),o.length||(o=e("<table />").appendTo(t.element))),t.table=o.attr("role",t._hasDetails()?"treegrid":"grid"),t._wrapper()},_createResizeHandle:function(t,o){var r,l,n,a,i,s,d,c,u,p,h=this,f=h.options.columnResizeHandleWidth,g=h.options.scrollable,m=h.resizeHandle,_=3*f/2,k=0;m&&h.lockedContent&&m.data("th")[0]!==o[0]&&(m.off(Dt).remove(),m=null),m||(m=h.resizeHandle=e('<div class="k-resize-handle"><div class="k-resize-handle-inner"></div></div>'),t.append(m)),c=Je.scrollLeft(t),hr&&(fr.mozilla||fr.webkit&&fr.version>=85)&&(c*=-1),d=parseFloat(t.css("borderLeftWidth")),u=o.offset().left+c-parseFloat(o.css("marginLeft"))-(t.offset().left+d),hr?g&&(k=u<=c?_:0,r=o.closest(".k-grid-header-wrap, .k-grid-header-locked"),s=r[0].scrollWidth-r[0].offsetWidth,i=parseFloat(r.css("marginLeft")),l=fr.msie?2*Je.scrollLeft(r)+d-i-k:0,n=-k,a=fr.mozilla?d-i-k:0,u-=n+a+l):u+=o[0].offsetWidth,p=o.offset().top-parseFloat(o.css("marginTop"))-(t.offset().top+parseFloat(t.css("borderTopWidth"))),m.css({top:p,left:u-_,height:lt(o),width:3*f-k}).data("th",o).show(),m.off("dblclick"+Dt).on("dblclick"+Dt,function(){h._autoFitLeafColumn(parseInt(o.attr(Je.attr("index")),10))})},_positionColumnResizeHandle:function(){var o=this,r=o.lockedHeader?o.lockedHeader.find("thead:first"):e();o.thead.add(r).on("mousemove"+Dt,"tr:not(.k-filter-row) > th",function(r){var l=t!==r.buttons?r.buttons:r.which||r.button,n=e(this);n.hasClass("k-group-cell")||n.hasClass("k-hierarchy-cell")||t!==l&&0!==l||n[0].hasAttribute(Je.attr(Uo))||o._createResizeHandle(n.closest("div"),n)})},_resizeHandleDocumentClick:function(t){e(t.target).closest(".k-column-active").length||(e(document).off(t),this._resetResizeHandleHeader(),this._hideResizeHandle())},_resetResizeHandleHeader:function(){var t;this.resizeHandle&&(t=e(this.resizeHandle).data("th"),t&&(t.find(kt+ho).find(kt+fo).show(),t.find(kt+go).show(),t.find(kt+_o).show(),t.find(kt+ko).show()))},_hideResizeHandle:function(){this.resizeHandle&&(this.resizeHandle.data("th").removeClass("k-column-active"),this.lockedContent&&!this._isMobile?(this.resizeHandle.off(Dt).remove(),this.resizeHandle=null):this.resizeHandle.hide())},_positionColumnResizeHandleTouch:function(){var t=this,o=t.lockedHeader?t.lockedHeader.find("thead:first"):e();t._resizeUserEvents=new Je.UserEvents(o.add(t.thead),{filter:"th:not(.k-group-cell):not(.k-hierarchy-cell)",threshold:10,minHold:500,hold:function(o){var r=e(o.target);o.preventDefault(),t.resizeHandle&&(t.resizeHandle.data("th").removeClass("k-column-active"),t._resetResizeHandleHeader()),r.addClass("k-column-active"),r.find(kt+ho).find(kt+fo).hide(),r.find(kt+go).hide(),r.find(kt+_o).hide(),r.find(kt+ko).hide(),t._createResizeHandle(r.closest("div"),r),t._resizeHandleDocumentClickHandler||(t._resizeHandleDocumentClickHandler=ht(t._resizeHandleDocumentClick,t)),e(document).on("click",t._resizeHandleDocumentClickHandler)}})},resizeColumn:function(o,r){var l,n,a,i,s=this,d=!!o.locked,c=!!o.hidden,u=this.options,p=Je.support.mobileOS?0:Je.support.scrollbar(),h=d?ut(o,ee(te(s.columns))):ut(o,Z(te(s.columns))),f=d?s.lockedTable:s.table,g=s.footer||e(),m=d?s.lockedHeader.find("table"):s.thead.closest("table"),_=o.minResizableWidth||10,k=rt(d?f.find("tbody"):s.tbody);return c?(o.width=r>_?r:_,t):(s.footer&&s.lockedContent&&(g=s.footer.children(d?".k-grid-footer-locked":".k-grid-footer-wrap")),l=u.scrollable?m.find("col:not(.k-group-col,.k-hierarchy-col):eq("+h+")").add(f.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+h+")")).add(g.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+h+")")):f.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+h+")"),u.scrollable?(n=!1,a=s.wrapper.width()-p,i=r=r>_?r:_,d&&k-r+i>a&&(i=r+(a-k-2*p),i<0&&(i=r),n=!0),i>10&&i>=_&&(l.css("width",i),k&&(i=n?a-2*p:k+(r-o.width),f.add(m).add(g).css("width",i),d||(s._footerWidth=i))),s._scrollVirtualWrapperOnColumnResize()):r>10&&r>=_&&l.css("width",r),o.width=r,s._applyLockedContainersWidth(),s._syncLockedContentHeight(),s._syncLockedHeaderHeight(),s._updateStickyColumns(),t)},_resizable:function(){var t,o,r,l,a,i,s,d,c=this,u=c.options,p=this._isMobile,h=Je.support.mobileOS?0:Je.support.scrollbar();u.resizable&&(t=u.scrollable?c.wrapper.find(".k-grid-header-wrap:first"):c.wrapper,p?c._positionColumnResizeHandleTouch(t):c._positionColumnResizeHandle(t),c.resizable&&c.resizable.destroy(),c.resizable=new Ye.Resizable(t.add(c.lockedHeader),{handle:(u.scrollable?"":">")+".k-resize-handle",hint:function(t){return e('<div class="k-grid-resize-indicator" />').css({height:lt(t.data("th"))+c.tbody.attr("clientHeight")})},start:function(t){var h,f,g,m,_;d=e(t.currentTarget).data("th"),p&&c._hideResizeHandle(),h=d.closest("table"),f=e.inArray(d[0],ae(d.closest("thead")).filter(":visible")),i=h.parent().hasClass("k-grid-header-locked"),g=i?c.lockedTable:c.table,m=c.footer||e(),c.footer&&c.lockedContent&&(m=c.footer.children(i?".k-grid-footer-locked":".k-grid-footer-wrap")),n(c.wrapper,"col-resize"),s=u.scrollable?h.find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+f+")").add(g.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+f+")")).add(m.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+f+")")):g.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+f+")"),_=e.map(c.columns,function(e){return!e.hidden&&(i&&e.locked||!i&&!e.locked)?e:null}),o=t.x.location,r=rt(d),l=le(_)[f].minResizableWidth||10,a=rt(i?g.children("tbody"):c.tbody),fr.webkit&&c.wrapper.addClass("k-grid-column-resizing")},resize:function(t){var n,p,f,g,m,_,k=hr?-1:1,b=r+t.x.location*k-o*k;u.scrollable?(i&&c.lockedFooter?n=c.lockedFooter.children("table"):c.footer&&(n=c.footer.find(">.k-grid-footer-wrap>table")),n&&n[0]||(n=e()),p=d.closest("table"),f=i?c.lockedTable:c.table,g=!1,m=c.wrapper.width()-h,_=b,i&&a-r+_>m&&(_=r+(m-a-2*h),_<0&&(_=b),g=!0),_>10&&_>=l&&(s.css("width",_),a&&(_=g?m-2*h:a+t.x.location*k-o*k,f.add(p).add(n).css("width",_),i||(c._footerWidth=_))),c._scrollVirtualWrapperOnColumnResize()):b>10&&b>=l&&s.css("width",b)},resizeend:function(){var e,t,o,l=rt(d);n(c.wrapper,""),fr.webkit&&c.wrapper.removeClass("k-grid-column-resizing"),r!=l&&(t=c.lockedHeader?c.lockedHeader.find("thead:first tr:first").add(c.thead.find("tr:first")):d.parent(),o=d.attr(Je.attr("index")),o||(o=t.find("th:not(.k-group-cell):not(.k-hierarchy-cell)").index(d)),e=le(c.columns)[o],e.width=l,c.trigger(So,{column:e,oldWidth:r,newWidth:l}),c._applyLockedContainersWidth(),c._syncLockedContentHeight(),c._syncLockedHeaderHeight(),c._updateStickyColumns()),c._resetResizeHandleHeader(),c._hideResizeHandle(),d=null}}))},_draggable:function(){var t,o=this;o.options.reorderable&&(o._draggableInstance&&o._draggableInstance.destroy(),t=o.wrapper.children(".k-grid-header"),o._draggableInstance=o.wrapper.kendoDraggable({group:Je.guid(),autoScroll:!0,filter:o.content?".k-grid-header:first "+zt:"table:first>.k-grid-header "+zt,dragstart:function(){t.children(".k-grid-header-wrap").unbind("scroll"+Dt+"scrolling").bind("scroll"+Dt+"scrolling",function(e){o.virtualScrollable?Je.scrollLeft(o.content.find(">.k-virtual-scrollable-wrap"),this.scrollLeft):Je.scrollLeft(o.scrollables.not(e.currentTarget),this.scrollLeft)})},dragend:function(){o._resetResizeHandleHeader(),t.children(".k-grid-header-wrap").unbind("scroll"+Dt+"scrolling")},drag:function(){o._hideResizeHandle()},hint:function(t){var o=t.attr(Je.attr("title"));return o&&(o=Je.htmlEncode(o)),e('<div class="k-header k-reorder-clue k-drag-clue" />').html(o||t.attr(Je.attr("field"))||t.text()).prepend('<span class="k-icon k-drag-status k-i-cancel"></span>')}}).data("kendoDraggable"))},_reorderable:function(){var t=this;t.options.reorderable&&(t.wrapper.data("kendoReorderable")&&t.wrapper.data("kendoReorderable").destroy(),t.wrapper.kendoReorderable({draggable:t._draggableInstance,dragOverContainers:function(e,o){var r=F(t.columns);return r[e].lockable!==!1&&M(r,t.columns,e,o)>-1},inSameContainer:function(o){return e(o.source).parent()[0]===e(o.target).parent()[0]&&M(F(t.columns),t.columns,o.sourceIndex,o.targetIndex)>-1},change:function(e){var o=F(t.columns),r=o[e.oldIndex],l=M(o,t.columns,e.oldIndex,e.newIndex);t.trigger(To,{newIndex:l,oldIndex:ut(r,o),column:r}),t.reorderColumn(l,r,"before"===e.position)}}))},_reorderHeader:function(e,t,o,r){var l,n,s,d,c,u=this,p=z(e[0],u.columns),h=z(t,u.columns),f=[];for(s=0;s<e.length;s++)e[s].columns&&(f=f.concat(e[s].columns));n=r?i(r,r,"tr:eq("+p.row+")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)"):i(u.lockedHeader,u.thead,"tr:eq("+p.row+")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)"),d=Q(e).length,c=Q([t]).length,f.length?(d>0&&0===c?(l="prepend",H(e,t,f,u.columns,u.lockedHeader.find("thead"),u.thead,this._groups(),l)):0===d&&c>0&&(l=0!==h.cell||!e[0].columns||t.columns||u._group?"append":"prepend",H(e,t,f,J(u.columns),u.thead,u.lockedHeader.find("thead"),this._groups(),l)),(t.columns||p.cell-h.cell>1||h.cell-p.cell>1)&&(t=D(u.columns,t,e[0],o,u.columns),t&&(d>0&&0===c?u._reorderHeader(f,t,o,u.thead):0===d&&c>0?u._reorderHeader(f,t,o,u.lockedHead):u._reorderHeader(f,t,o)))):d!==c&&S(n[p.cell],u.columns,d),a(n,p.cell,h.cell,o,e.length)},_reorderContent:function(t,o,r){var l,n,s,d,c,u,p=this,h=e(),f=t[0],g=v(t),m=ut(f,le(p.columns)),_=ut(o,le(p.columns)),k=ut(g[0],te(p.columns)),b=ut(o,te(p.columns)),C=Q(p.columns).length,w=!!o.locked,y=p.footer||p.wrapper.find(".k-grid-footer"),S=l=b;for(o.hidden&&(s=w?Q(p.columns):J(p.columns),v(s).length>0?(S=l=b=this._findClosestVisibleColumnIndex(s,_),n=v(s.slice(_)).length>0):w?(b=p.lockedTable.find("colgroup"),S=p.lockedHeader.find("colgroup"),l=e(p.lockedFooter).find(">table>colgroup")):(b=p.tbody.prev(),S=p.thead.prev(),l=y.find(".k-grid-footer-wrap").find(">table>colgroup"))),p._hasFilterRow()&&a(p.wrapper.find(".k-filter-row th:not(.k-group-cell,.k-hierarchy-cell)"),m,_,r,t.length),k>=0&&a(i(p.lockedHeader,p.thead.prev(),Ht),k,S,n?n:r,g.length),p.options.scrollable&&k>=0&&!p._hasVirtualColumns()&&a(i(p.lockedTable,p.tbody.prev(),Ht),k,b,n?n:r,g.length),y&&y.length&&(k>=0&&a(i(p.lockedFooter,y.find(".k-grid-footer-wrap"),">table>colgroup>col:not(.k-group-col,.k-hierarchy-col)"),k,l,n?n:r,g.length),a(y.find(".k-footer-template>td:not(.k-group-cell,.k-hierarchy-cell)"),m,_,r,t.length)),d=p.tbody.children(":not(.k-grouping-row,.k-detail-row)"),p.lockedTable&&(C>_?C<=m&&we(p.lockedTable.find(">tbody>tr.k-grouping-row"),p.table.find(">tbody>tr.k-grouping-row"),t.length):C>m&&we(p.table.find(">tbody>tr.k-grouping-row"),p.lockedTable.find(">tbody>tr.k-grouping-row"),t.length),h=p.lockedTable.find(">tbody>tr:not(.k-grouping-row,.k-detail-row)")),c=0,u=d.length;c<u;c+=1)a(i(h[c],d[c],">td:not(.k-group-cell,.k-hierarchy-cell)"),m,_,r,t.length)},_findClosestVisibleColumnIndex:function(e,t){var o=v(e.slice(t)).length>0?e.slice(t):e.slice(0,t+1).reverse(),r=v(o)[0];return ut(r,v(this.columns))},_autoFitLeafColumn:function(e){this.autoFitColumn(le(this.columns)[e])},autoFitColumn:function(t){var o,r,l,n,a,i,s,d,c,u,p,h,f,g,m,k,v,C,w,y,S,T,x=this,H=x.options,R=x.columns,I=x.lockedHeader?ae(x.lockedHeader.find(">table>thead")).filter(_).length:0,E="col:not(.k-group-col):not(.k-hierarchy-col)",z="td:visible:not(.k-group-cell):not(.k-hierarchy-cell)";if(t="number"==typeof t?R[t]:at(t)?dt(P(R),function(e){return e===t})[0]:dt(P(R),function(e){return e.field===t})[0],t&&b(t)){for(i=t.minResizableWidth,o=ut(t,le(R)),n=t.locked,l=n?x.lockedHeader.children("table"):x.thead.parent(),r=l.find("[data-index='"+o+"']"),c=r.find("a.k-header-column-menu, a.k-grid-filter"),p=n?x.lockedTable:x.table,h=x.footer||e(),x.footer&&x.lockedContent&&(h=x.footer.children(n?".k-grid-footer-locked":".k-grid-footer-wrap")),f=h.find("table").first(),x.lockedHeader&&!n&&(o-=I),g=0;g<R.length&&R[g]!==t;g++)R[g].hidden&&o--;if(H.scrollable?(a=l.find(E).eq(o).add(p.children("colgroup").find(E).eq(o)).add(f.find("colgroup").find(E).eq(o)),n||(s=p.parent(),d=Je.scrollLeft(s))):a=p.children("colgroup").find(E).eq(o),m=l.add(p).add(f),fr.safari&&r.css("white-space","initial"),k=rt(r),a.width(""),m.css("table-layout","fixed"),a.width("auto"),m.addClass("k-autofitting"),m.css("table-layout",""),u=c.length?rt(c)+rt(r):rt(r),v=Math.ceil(Math.max(u,rt(p.find("tr:not(.k-grouping-row)").eq(0).children(z).eq(o)),rt(f.find("tr").eq(0).children(z).eq(o))))+1,i&&i>v&&(v=i),a.width(v),t.width=v,fr.safari&&r.css("white-space",""),H.scrollable){for(C=l.find("col"),y=0,S=0,T=C.length;S<T;S+=1)if(w=C[S].style.width,w&&w.indexOf("%")==-1)y+=parseInt(w,10);else{if(!C.eq(S).hasClass("k-group-col")){y=0;break}y+=parseInt(C.eq(S).width(),10)}y&&m.each(function(){this.style.width=y+"px"})}m.removeClass("k-autofitting"),d&&Je.scrollLeft(s,d),x.trigger(So,{column:t,oldWidth:k,newWidth:v}),x._applyLockedContainersWidth(),x._syncLockedContentHeight(),x._syncLockedHeaderHeight(),x._updateStickyColumns()}},reorderColumn:function(e,o,r){var l,n,a=this,i=c(o,a.columns),s=i?i.columns:a.columns,d=ut(o,s),u=s[e],p=a.virtualScroll||{},h=!!u.locked,f=Q(a.columns).length,g=dt(le(a.columns),function(e){return e.groupHeaderColumnTemplate});d!==e&&(!o.locked&&h&&1==J(a.columns).length||o.locked&&!h&&1==f||(a._hideResizeHandle(),r===t&&(r=e<d),n=[o],a._reorderHeader(n,u,r),a.lockedHeader&&(G(a.thead),G(a.lockedHeader)),u.columns&&(u=le(u.columns),u=u[r?0:u.length-1]),o.columns&&(n=le(o.columns)),a._reorderContent(n,u,r),l=!!o.locked,l=l!=h,o.locked=h,s.splice(r?e:e+1,0,o),s.splice(d<e?d:d+1,1),a._updateLockedCols(),a._updateCols(),a._templates(),a._updateColumnCellIndex(),a._updateColumnSorters(),g.length>0&&a._renderGroupRows(),a._updateTablesWidth(),a._applyLockedContainersWidth(),a._syncLockedHeaderHeight(),a._syncLockedContentHeight(),a._updateFirstColumnClass(),a._updateStickyColumns(),p.columns&&a.refresh(),l&&(h?a.trigger(xo,{column:o}):a.trigger(Ho,{column:o}))))},_updateColumnCellIndex:function(){var e,t=0;this.lockedHeader&&(e=this.lockedHeader.find("thead"),t=R(e,Q(this.columns))),R(this.thead,J(this.columns),t)},lockColumn:function(e){var t,o=this.columns;e="number"==typeof e?o[e]:dt(o,function(t){return t.field===e})[0],!e||e.locked||e.hidden||(e.sticky&&this.unstickColumn(o.indexOf(e)),t=Q(o).length-1,this.reorderColumn(t,e,!1))},unlockColumn:function(e){var t,o=this.columns;e="number"==typeof e?o[e]:dt(o,function(t){return t.field===e})[0],e&&e.locked&&!e.hidden&&(t=Q(o).length,this.reorderColumn(t,e,!0))},stickColumn:function(e){var t=this.columns;e="number"==typeof e?t[e]:dt(t,function(t){return t.field===e})[0],!e||e.sticky||e.hidden||e.locked&&(this.unlockColumn(t.indexOf(e)),e.locked)||(e.sticky=!0,this._updateStickyColumns())},unstickColumn:function(e){var t=this.columns;e="number"==typeof e?t[e]:dt(t,function(t){return t.field===e})[0],e&&e.sticky&&!e.locked&&!e.hidden&&(this._removeStickyAttributes([e]),this._removeStickyStyles(Y(t)),e.sticky=!1,this._updateStickyColumns(),0===this._anyStickyColumns()&&(this._templates(),this._hasFilterRow()&&this._updateStickyFilterCells()))},cellIndex:function(t){var o=0;return this.lockedTable&&!e.contains(this.lockedTable[0],t[0])&&(o=le(Q(this.columns)).length),e(t).parent().children("td:not(.k-group-cell,.k-hierarchy-cell)").index(t)+o},_modelForContainer:function(t){t=e(t),t.is("tr")||"popup"===this._editMode()||(t=t.closest("tr"));var o=t.attr(Je.attr("uid"));return this.dataSource.getByUid(o)},_calculateColumnIndex:function(t){var o=this.cellIndex(t),r=0;return this._hasVirtualColumns()&&(r=parseInt(e(t).closest("tr").find("td:first").attr("colspan"),10),r=r>1?r-1:0),o+r},_editable:function(){var t,o=this,r=o.options.editable,l=function(){var t=tt(),r=o._editContainer;r&&r[0]&&!e.contains(r[0],t)&&r[0]!==t&&!e(t).closest(".k-animation-container").length&&(o.editable.end()?o.closeCell():o._scrollVirtualWrapper())};r&&(this.wrapper.addClass("k-editable"),t=o._editMode(),"incell"===t?(o.table.add(o.lockedTable).on("mousedown"+Dt,St+">"+Tt,function(t){var r=e(t.target);"incell"===o._editMode()&&r.hasClass("k-checkbox")&&r.prev().attr(Je.attr("bind"))&&t.preventDefault()}),r.update!==!1&&(mr&&o.wrapper.on(zo+Dt,".k-edit-cell > input[type='checkbox']",function(t){e(t.target).focus()}).on(zo+Dt,".k-edit-cell",function(t){e(t.target).is("input")||e(t.currentTarget).find("input[type='checkbox']").focus()}).on(Ao+Dt,"tr:not(.k-grouping-row) > td",function(t){var r=o._editContainer;o._mousedownOnEditCell=!(!r||!r[0]||!e.contains(r[0],t.target)&&r[0]!==t.target)}),o.editableUserEvents=new Je.UserEvents(o.wrapper,{filter:"tr:not(.k-grouping-row) > td",allowSelection:!0,tap:function(t){var r=e(t.target),l=o.lockedTable&&r.closest("table")[0]===o.lockedTable[0];o._mousedownOnEditCell=!1,r.hasClass("k-hierarchy-cell")||r.hasClass("k-detail-cell")||r.hasClass("k-group-cell")||r.hasClass("k-edit-cell")||r.has("a.k-grid-delete").length||r.has("button.k-grid-delete").length||r.closest("tbody")[0]!==o.tbody[0]&&!l||e(t.target).is(":input")||(o.editable?o.editable.end()?(e(tt()).blur(),o.closeCell(),o.editCell(r)):o._scrollVirtualWrapper():o.editCell(r))}}),o.wrapper.on("focusin"+Dt,function(){e.contains(this,tt())||(clearTimeout(o.timer),o.timer=null)}).on("focusout"+Dt,function(e){var t=!0;(mr&&o._mousedownOnEditCell||o._virtualColScroll)&&(t=!1),o._mousedownOnEditCell=!1,t&&(o.timer=setTimeout(function(){l(e)},1))}))):r.update!==!1&&(o.wrapper.on(zo+Dt,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible a.k-grid-edit",function(t){var r=e(this);o._belongsToGrid(r)&&(t.preventDefault(),o.editRow(r.closest("tr")))}),o._isVirtualInlineEditable()&&o.wrapper.on("focusout"+Dt,"tr:not(.k-grouping-row) > td",function(){o.editable&&!o.editable.end()&&o._scrollVirtualWrapper()})),r.destroy!==!1?o.wrapper.on(zo+Dt,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-delete",function(t){var r=e(this);o._belongsToGrid(r)&&(t.preventDefault(),t.stopPropagation(),o.removeRow(r.closest("tr")))}):o.wrapper.on(zo+Dt,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible button.k-grid-delete",function(t){o._belongsToGrid(e(this))&&(t.stopPropagation(),o._confirmation()||t.preventDefault())}))},editCell:function(t){var o,r,l,n;if(t=e(t),o=this,r=le(o.columns)[o._calculateColumnIndex(t)],l=o._modelForContainer(t),o.closeCell(),l&&Ee(r,l)&&!r.command){if(o.trigger(Pt,{model:l}))return;o._attachModelChange(l),o._editContainer=t,o._shouldClearEditableState&&o._clearEditableState(),o.editable=t.addClass("k-edit-cell").kendoEditable({fields:{field:r.field,format:r.format,editor:r.editor,values:r.values},model:l,target:o,change:function(e){o.trigger(Wt,{values:e.values,container:t,model:l})&&e.preventDefault()},skipFocus:!(!o._isVirtualIncellEditable()&&!o._hasVirtualColumns()||!o._editableState)}).data("kendoEditable"),n=t.parent().addClass("k-grid-edit-row"),o.lockedContent&&(Te(n[0],o._relatedRow(n).addClass("k-grid-edit-row")[0]),o._syncLockedScroll()),o.trigger(Mt,{container:t,model:l})}},_adjustLockedHorizontalScrollBar:function(){var e=this.table,t=e.parent(),o=e[0].offsetWidth>t[0].clientWidth?Je.support.scrollbar():0;this.lockedContent.height(t[0].offsetHeight-o)},_syncLockedScroll:function(){this.lockedContent[0].scrollTop=this.content[0].scrollTop,this.virtualScrollable&&(this.lockedContent[0].scrollTop=this.wrapper.find(".k-virtual-scrollable-wrap")[0].scrollTop)},_syncLockedContentHeight:function(){this.lockedTable&&(this.touchScroller||this._adjustLockedHorizontalScrollBar(),this._adjustRowsHeight(this.table,this.lockedTable))},_syncLockedHeaderHeight:function(){var e,t;this.lockedHeader&&(e=this.lockedHeader.children("table"),t=this.thead.parent(),this._adjustRowsHeight(e,t),Se(e,t))},_syncLockedFooterHeight:function(){this.lockedFooter&&this.footer&&this.footer.length&&this._adjustRowsHeight(this.lockedFooter.children("table"),this.footer.find(".k-grid-footer-wrap > table"))},_destroyEditable:function(){var e=this,t=function(){if(e.editable){var t=e.editView?e.editView.element:e._editContainer;t&&(t.off(zo+Dt,"a.k-grid-cancel",e._editCancelClickHandler),t.off(zo+Dt,"a.k-grid-update",e._editUpdateClickHandler)),e._detachModelChange(),e.editable.destroy(),e.editable=null,e._editContainer=null,e._destroyEditView(),e._editableIsClosing=null}};e.editable&&("popup"!==e._editMode()||e._isMobile?t():e._editableIsClosing?e._editContainer.data("kendoWindow").bind("deactivate",t):(e._editableIsClosing=!0,e._editContainer.data("kendoWindow").bind("deactivate",t).close())),e._confirmDialog&&(e._confirmDialog.close(),e._confirmDialog.destroy(),e._confirmDialog=null)},_destroyEditView:function(){this.editView&&(this.editView.purge(),this.editView=null,this.pane.navigate(""))},_attachModelChange:function(e){var t=this;t._modelChangeHandler=function(e){t._modelChange({field:e.field,model:this})},e.bind("change",t._modelChangeHandler)},_detachModelChange:function(){var e=this,t=e._editContainer,o=e._modelForContainer(t);o&&o.unbind(Kt,e._modelChangeHandler)},closeCell:function(e){var t,o,r,l=this,n=l._editContainer;n&&(r=l._modelForContainer(n),e&&l.trigger("cancel",{container:n,model:r})||(l.trigger(Ut,{type:e?"cancel":"save",model:r,container:n}),n.removeClass("k-edit-cell"),t=le(l.columns)[l._calculateColumnIndex(n)],o=n.parent().removeClass("k-grid-edit-row"),l.lockedContent&&l._relatedRow(o).removeClass("k-grid-edit-row"),l._destroyEditable(),l._displayCell(n,t,r),l._shouldClearEditableState&&l._clearEditableState(),l.trigger("itemChange",{item:o,data:r,ns:Ye}),l.lockedContent&&Te(o.css("height","")[0],l._relatedRow(o).css("height","")[0])))},_displayCell:function(e,t,o){var r=this,l={storage:{},count:0},n=it({},Je.Template,r.options.templateSettings),a=Je.template(r._cellTmpl(t,l),n);l.count>0&&(a=ht(a,l.storage)),e.empty().html(a(o)),r.angular("compile",function(){return{elements:e,data:[{dataItem:o}]}})},removeRow:function(e){this._confirmation(e)&&this._removeRow(e)},_removeRow:function(t){var o,r,l,n,a=this,i=a._editMode();"incell"!==i&&a.cancelRow(),t=e(t),a.lockedContent&&(t=t.add(a._relatedRow(t))),t=t.hide(),a.dataSource._isGroupPaged()&&a._removeGroupIfEmpty(t),o=a._modelForContainer(t),o&&!a.trigger(qt,{row:t,model:o})?(n=a.dataSource.options.schema,a._selectedIds&&n&&n.model&&(r=ft(a.dataSource.options.schema.model)?a.dataSource.options.schema.model.fn.idField:a.dataSource.options.schema.model.id,l=o[r],delete a._selectedIds[l]),a.dataSource.remove(o),"inline"!==i&&"popup"!==i||a.dataSource.sync()):"incell"===i&&a._destroyEditable()},_editMode:function(){var e="incell",t=this.options.editable;return t!==!0&&(e="string"==typeof t?t:t.mode||e),e},editRow:function(t){var o,r,l,n=this;t instanceof Ze?o=t:(t=e(t),o=n._modelForContainer(t)),r=n._editMode(),n.cancelRow(),o&&(t=n.tbody.children("["+Je.attr("uid")+"="+o.uid+"]"),n._attachModelChange(o),"popup"===r?n._createPopupEditor(o):"inline"===r?n._createInlineEditor(t,o):"incell"===r&&e(t).children(wt).each(function(){var t=e(this),r=le(n.columns)[n._calculateColumnIndex(t)];if(o=n._modelForContainer(t),o&&(!o.editable||o.editable(r.field))&&r.field&&!r.selectable)return n.editCell(t),!1}),l=n.editView?n.editView.element:n._editContainer,l&&(this._editCancelClickHandler||(this._editCancelClickHandler=ht(this._editCancelClick,this)),l.on(zo+Dt,"a.k-grid-cancel",this._editCancelClickHandler),this._editUpdateClickHandler||(this._editUpdateClickHandler=ht(this._editUpdateClick,this)),l.on(zo+Dt,"a.k-grid-update",this._editUpdateClickHandler)))},_editUpdateClick:function(e){e.preventDefault(),e.stopPropagation(),this.saveRow()},_editCancelClick:function(t){var o,r=this,l=r.options.navigatable,n=r.editable.options.model,a=r.editView?r.editView.element:r._editContainer;t.preventDefault(),t.stopPropagation(),r.trigger("cancel",{container:a,model:n})||(o=r.items().index(e(r.current()).parent()),r.cancelRow(),l&&(r._setCurrent(r.items().eq(o).children().filter(Tt).first()),He(r.table,!0)))},_createPopupEditor:function(o){var r,l,n,a,i,s,d,c,u,p,h,f,g,m=this,_="<div "+Je.attr("uid")+'="'+o.uid+'" class="k-popup-edit-form"><'+(m._isMobile?'ul class="k-edit-form-container k-listgroup k-listgroup-flush">':'div class="k-edit-form-container">'),k=[],b=le(m.columns),v=Je.guid(),C=m.options.editable,w=C.template,y=at(C)?C.window:{},S=it({},Je.Template,m.options.templateSettings);if(!m.trigger(Pt,{model:o})){if(y=y||{},w)for(typeof w===Mo&&(w=Je.unescape(w)),_+=Je.template(w,S)(o),n=0,a=b.length;n<a;n++)r=b[n],r.command&&(p=xe(r.command,"edit"),p&&(l=p));else for(n=0,a=b.length;n<a;n++)r=b[n],r.selectable||(r.command?r.command&&(p=xe(r.command,"edit"),p&&(l=p)):m._isMobile?(_+='<li class="k-item k-listgroup-item">',Ee(r,o)?(k.push({field:r.field,title:r.title,format:r.format,editor:r.editor,values:r.values}),_+='<label class="k-label k-listgroup-form-row">',_+='<span class="k-item-title k-listgroup-form-field-label">'+(r.title&&(m.options.encodeTitles?Oe(r.title,!0):r.title)||r.field||"")+"</span>",_+='<div class="k-listgroup-form-field-wrapper" id="'+r.field+"_"+v+'" '+Je.attr("container-for")+'="'+r.field+'"></div>',_+="</label>"):(f={storage:{},count:0},i=Je.template(m._cellTmpl(r,f),S),f.count>0&&(i=ht(i,f.storage)),_+='<label class="k-label k-listgroup-form-row k-no-click">',_+='<span class="k-item-title k-listgroup-form-field-label">'+(r.title&&(m.options.encodeTitles?Oe(r.title,!0):r.title)||r.field||"")+"</span>",_+='<span class="k-no-editor k-listgroup-form-field-wrapper">'+i(o)+"</span>",_+="</label>"),_+="</li>"):(_+='<div class="k-edit-label"><label for="'+r.field+'">'+(r.title&&(m.options.encodeTitles?Oe(r.title):r.title)||r.field||"")+"</label></div>",Ee(r,o)?(k.push({field:r.field,title:r.title,format:r.format,editor:r.editor,values:r.values}),_+="<div "+Je.attr("container-for")+'="'+r.field+'" class="k-edit-field"></div>'):(f={storage:{},count:0},i=Je.template(m._cellTmpl(r,f),S),f.count>0&&(i=ht(i,f.storage)),_+='<div class="k-edit-field k-no-editor">'+i(o)+"</div>")));l&&at(l)&&(at(l.text)&&(s=l.text.update,d=l.text.cancel),at(l.iconClass)&&(c=l.iconClass.update,u=l.iconClass.cancel),l.attr&&(h=l.attr)),m._isMobile?(_+="</ul></div>",m.editView=m.pane.append("<div data-"+Je.ns+'role="view" class="k-grid-edit-form"><div data-'+Je.ns+'role="header" class="k-header"><a href="\\#" class="k-header-cancel k-link k-grid-cancel" title="#=messages.cancel#" aria-label="#=messages.cancel#"><span class="k-icon k-i-arrow-chevron-left"></span></a>'+(m.options.messages.commands.edit||"Edit")+'<a href="\\#" class="k-header-done k-link k-grid-update" title="#=messages.done#" aria-label="#=messages.done#"><span class="k-icon k-i-check"></span></a></div><div data-'+Je.ns+'role="content" class="'+_r.content+'">'+_+"</div></div>"),g=m._editContainer=m.editView.element.find(".k-popup-edit-form")):(_+='<div class="k-edit-buttons k-state-default">',_+=m._createButton({name:"update",text:s,attr:h,iconClass:c})+m._createButton({name:"canceledit",text:d,attr:h,iconClass:u}),_+="</div></div></div>",
g=m._editContainer=e(_).appendTo(m.wrapper).eq(0).kendoWindow(it({modal:!0,resizable:!1,draggable:!0,title:m.options.messages.commands.edit||"Edit",visible:!1,close:function(r){if(r.userTriggered){if(r.sender.element.focus(),m.trigger("cancel",{container:g,model:o}))return r.preventDefault(),t;var l=m.items().index(e(m.current()).parent());m._editableIsClosing=!0,m.cancelRow(),m.options.navigatable&&(m._setCurrent(m.items().eq(l).children().filter(Tt).first()),He(m.table,!0))}}},y))),m.editable=m._editContainer.kendoEditable({fields:k,model:o,clearContainer:!1,target:m}).data("kendoEditable"),m._openPopUpEditor(),m.trigger(Mt,{container:g,model:o})}},_openPopUpEditor:function(){var e=this,t=e._editContainer?e._editContainer.data("kendoWindow"):null,o=(e.options.editable||{}).window||{};this._isMobile?this.pane.navigate(this.editView,this._editAnimation):t&&(o.position||t.center(),t.open())},_createInlineEditor:function(t,o){var r,l,n,a=this,i=[];a.trigger(Pt,{model:o})||(a.lockedContent&&(t=t.add(a._relatedRow(t))),t.children(":not(.k-group-cell,.k-hierarchy-cell)").each(function(){if(l=e(this),r=le(a.columns)[a._calculateColumnIndex(l)],!r.command&&Ee(r,o))i.push({field:r.field,title:r.title,format:r.format,editor:r.editor,values:r.values}),l.attr(Je.attr("container-for"),r.field),l.empty();else if(r.command&&(n=xe(r.command,"edit"))){l.empty();var t,s,d,c,u;at(n)&&(at(n.text)&&(t=n.text.update,s=n.text.cancel),at(n.iconClass)&&(d=n.iconClass.update,c=n.iconClass.cancel),n.attr&&(u=n.attr)),e(a._createButton({name:"update",text:t,attr:u,iconClass:d})+a._createButton({name:"canceledit",text:s,attr:u,iconClass:c})).appendTo(l)}}),a._editContainer=t,a._editContainer.addClass("k-grid-edit-row"),a._shouldClearEditableState&&a._clearEditableState(),a.editable=new Je.ui.Editable(a._editContainer,{target:a,fields:i,model:o,skipFocus:a._isVirtualInlineEditable()&&a._editableState&&!!a._editableState.field||a._hasVirtualColumns(),clearContainer:!1}),t.length>1&&(Te(t[0],t[1]),a._applyLockedContainersWidth()),a.trigger(Mt,{container:t,model:o}))},cancelRow:function(e){var t,o=this,r=o._editContainer;if(r){if(t=o._modelForContainer(r),!t||e&&o.trigger("cancel",{container:r,model:t}))return;o._destroyEditable(),o.dataSource.cancelChanges(t),o._clearEditableState(),o._displayRow("popup"!==o._editMode()?r:o.tbody.find("["+Je.attr("uid")+"="+t.uid+"]"))}},saveRow:function(){var t,o=this,r=this._editContainer,l=this._modelForContainer(r),n=e.Deferred();return r&&this.editable?(t=o.editable&&o.editable.end(),!t||this.trigger(Wt,{container:r,model:l})?(t||o._scrollVirtualWrapper(),n.reject().promise()):(o._clearEditableState(),this.dataSource.sync())):n.resolve().promise()},_displayRow:function(t){var o,r,l,n,a,i=this,s=i._modelForContainer(t),d=t.hasClass("k-state-selected"),c=t.hasClass("k-alt");s&&(i.lockedContent&&(o=e((c?i.lockedAltRowTemplate:i.lockedRowTemplate)(s)),i._relatedRow(t.last()).replaceWith(o)),i.angular("cleanup",function(){return{elements:t.get()}}),r=e((c?i.altRowTemplate:i.rowTemplate)(s)),t.is(":visible")||r.hide(),t.replaceWith(r),i.trigger("itemChange",{item:r,data:s,ns:Ye}),o&&o.length&&i.trigger("itemChange",{item:o,data:s,ns:Ye}),n=r,a=[{dataItem:s}],o&&o.length&&(n=r.add(o),a.push({dataItem:s})),i.angular("compile",function(){return{elements:n.get(),data:a}}),d&&(i.options.selectable||i._checkBoxSelection)&&i.select(r.add(o)),o&&Te(r[0],o[0]),l=r.next(),l.hasClass("k-detail-row")&&l.is(":visible")&&r.find(".k-hierarchy-cell .k-icon").removeClass("k-i-expand").addClass("k-i-collapse"))},_showMessage:function(t,o){var r,l=this;return l._isMobile?(r=l._confirmDialog=new Je.ui.Confirm(e("<div />").appendTo(document.body),{modal:{preventScroll:!0},closable:!1,title:!1,content:t.title,messages:{okText:t.confirmDelete,cancel:t.cancelDelete},open:function(){l.content&&(l.content.data(Ko,l.content.css(Ko)),l.content.css(Ko,jo))},close:function(){l.content&&l.content.css(Ko,l.content.data(Ko))}}),r.result.done(function(){l._removeRow(o)}).fail(function(){var e=l._confirmDialog;e&&(e.close(),e.destroy())}),!1):window.confirm(t.title)},_confirmation:function(e){var t=this,o=t.options.editable,r=o===!0||typeof o===Mo?t.options.messages.editable.confirmation:o.confirmation;return at(o)&&typeof o.mode===Mo&&typeof r!==Fo&&typeof r!==Mo&&r!==!1&&(r=t.options.messages.editable.confirmation),r===!1||null==r||(typeof r===Fo&&(r=r(t._modelForContainer(e))),t._showMessage({confirmDelete:o.confirmDelete||t.options.messages.editable.confirmDelete,cancelDelete:o.cancelDelete||t.options.messages.editable.cancelDelete,title:r===!0?t.options.messages.editable.confirmation:r},e))},cancelChanges:function(){var e=this;e.dataSource.cancelChanges(),e._isVirtualEditable()&&e._virtualPageToTop(function(){e.virtualScrollable.scrollToTop()})},saveChanges:function(){var e=this,t=e.editable&&e.editable.end();!t&&e.editable||e.trigger(Qt)?t||e._scrollVirtualWrapper():e.dataSource.sync()},addRow:function(){var e,t,o=this,r=o.dataSource,l=o._editMode(),n=o.options.editable.createAt||"",a=r.pageSize(),i=r.view()||[],s=n.toLowerCase()===Po,d=o._isVirtualEditable();o.editable&&o.editable.end()||!o.editable?("incell"!=l&&o.cancelRow(),e=r.indexOf(i[0]),s&&(e+=i.length,a&&!r.options.serverPaging&&a<=i.length&&(e-=1)),e<0&&(e=r.page()>r.totalPages()?(r.page()-1)*a:0),o.options.navigatable&&"incell"==l&&o._removeCurrent(),d?o._virtualAddRow():(t=r.insert(e,{}),o._editModel(t))):o._scrollVirtualWrapper()},_editModel:function(e){var t,o,r,l,n=this,a=n.options.editable.createAt||"",i=n._editMode();e&&(t=e.uid,o=n.lockedContent?n.lockedTable:n.table,r=o.find("tr["+Je.attr("uid")+"="+t+"]"),l=r.children("td:not(.k-group-cell,.k-hierarchy-cell)").eq(n._firstEditableColumnIndex(r)),"inline"===i&&r.length?n.editRow(r):"popup"===i?n.editRow(e):l.length&&n.editCell(l),"bottom"==a.toLowerCase()&&n.lockedContent&&(n.lockedContent[0].scrollTop=n.content[0].scrollTop=n.table[0].offsetHeight))},_virtualAddRow:function(){var e=this,t=(e.options.editable.createAt||"").toLowerCase()===Po;e._clearEditableState(),t?e._virtualAddRowAtBottom():e._virtualAddRowAtTop()},_virtualAddRowAtTop:function(){var e,t=this,o=t.dataSource,r=t.virtualScrollable;1===o.page()?(e=o.insert(0,{}),t._editModel(e),r.scrollToTop()):t._virtualPageToTop(function(){e=o.insert(0,{}),t._editModel(e),r.scrollToTop()})},_virtualAddRowAtBottom:function(){var e,t=this,o=t.dataSource,r=t.virtualScrollable,l=o.total();o.at(l-1)instanceof Ze?(e=o.insert(l,{}),t._virtualPageToBottom(function(){t._editModel(e),r.scrollToBottom()})):t._virtualPageToBottom(function(){e=o.insert(l,{}),t._editModel(e),r.scrollToBottom()})},_virtualPageToTop:function(e){var t=this;t._virtualPage(0,t.dataSource.take(),function(){e()})},_virtualPageToBottom:function(e){var t=this,o=t.dataSource,r=o.take(),l=o.total(),n=l>r?l-r:0;t._virtualPage(n,r,function(){e()})},_virtualPage:function(e,t,o){var r=this;r._isVirtualEditable()&&(r.virtualScrollable._preventScroll=!0,r.virtualScrollable._page(e,t,o))},_firstEditableColumnIndex:function(e){var t,o,r,l=this,n=le(l.columns),a=l._modelForContainer(e);for(o=0,r=n.length;o<r;o++)if(t=n[o],a&&(!a.editable||a.editable(t.field))&&!t.command&&t.field&&t.hidden!==!0)return o;return-1},_toolbar:function(){var t,o=this,r=o.wrapper,l=o.options.toolbar,n=o.options.editable;l&&(t=o.wrapper.find(".k-grid-toolbar"),t.length||(ft(l)||(l=typeof l===Mo?l:o._toolbarTmpl(l).replace(lr,"\\#"),l=ht(Je.template(l),o)),t=e('<div class="k-toolbar k-grid-toolbar" />').html(l({})).prependTo(r),o.angular("compile",function(){return{elements:t.get()}})),n&&n.create!==!1&&t.on(zo+Dt,".k-grid-add",function(e){e.preventDefault(),o.addRow()}).on(zo+Dt,".k-grid-cancel-changes",function(e){e.preventDefault(),o.cancelChanges()}).on(zo+Dt,".k-grid-save-changes",function(e){e.preventDefault(),o.saveChanges()}),t.on(zo+Dt,".k-grid-excel",function(e){e.preventDefault(),o.saveAsExcel()}),t.on(zo+Dt,".k-grid-pdf",function(e){e.preventDefault(),o.saveAsPDF()}),t.on(Vo+Dt,".k-grid-search input",function(e){var t=e.currentTarget;clearTimeout(o._searchTimeOut),o._searchTimeOut=setTimeout(function(){var e,r,l,n,a;if(o._searchTimeOut=null,e=o.options,r=e.search?e.search.fields:null,l={filters:[],logic:"or"},n=t.value,r||(r=ne(e.columns)),o.dataSource.options.endless&&(o.dataSource.options.endless=null,o._endlessPageSize=o.dataSource.options.pageSize),n)for(a=0;a<r.length;a++)l.filters.push({field:r[a],operator:"contains",value:n});else l={};o.dataSource.filter(l)},300)}))},_toolbarTmpl:function(e){var t,o,r,l=this,n="",a="",i=l.options.messages.commands;if(ct(e))for(t=0,o=e.length;t<o;t++)r="string"==typeof e[t]?e[t].toLowerCase():(e[t].name||"").toLowerCase(),"search"===r?("string"!=typeof e[t]&&(a=e[t].text),a=a||i.search,n+="<span class='k-textbox k-grid-search k-display-flex'>",n+="<input autocomplete='off' placeholder='"+a+"' title='"+a+"' class='k-input' />",n+="<span class='k-input-icon'><span class='k-icon k-i-search'></span></span>",n+="</span>"):n+=l._createButton(e[t]);return n},_createButton:function(e){var o,r=e.template||cr,n=typeof e===Mo?e:e.name||e.text,a=$e[n]?$e[n].className:"k-grid-"+(n||"").replace(/\s/g,""),i={className:a,text:n,attr:"",iconClass:""},s=this.options.messages.commands;if(!(n||at(e)&&e.template))throw Error("Custom commands should have name specified");return at(e)?(e=it(!0,{},e),e.className&&ut(i.className,e.className.split(" "))<0?e.className+=" "+i.className:e.className===t&&(e.className=i.className),"edit"===n&&(e=it(!0,{},e),e.text=at(e.text)?e.text.edit:e.text,e.iconClass=at(e.iconClass)?e.iconClass.edit:e.iconClass),e.attr&&(at(e.attr)&&(e.attr=l(e.attr)),typeof e.attr===Mo&&(o=e.attr.match(/class="(.+?)"/),o&&ut(o[1],e.className.split(" "))<0&&(e.className+=" "+o[1]))),i=it(!0,i,$e[n],{text:s[n]},e)):i=it(!0,i,$e[n],{text:s[n]}),Je.template(r)(i)},_hasFooters:function(){return!!this.footerTemplate||!!this.groupFooterTemplate||this.footer&&this.footer.length>0||this.wrapper.find(".k-grid-footer").length>0},_groupable:function(){var t=this;t._groupableClickHandler?t.table.add(t.lockedTable).off(zo+Dt,t._groupableClickHandler):t._groupableClickHandler=function(o){var r=e(this),l=r.closest("tr"),n=t._groupRows?t._groupRows[t.wrapper.find(".k-grouping-row").index(l)]:{};r.hasClass("k-i-collapse")?t.trigger("groupCollapse",{group:n,element:l})||t.collapseGroup(l):t.trigger("groupExpand",{group:n,element:l})||t.expandGroup(l),o.preventDefault(),o.stopPropagation()},t._isLocked()?t.lockedTable.on(zo+Dt,".k-grouping-row .k-i-expand, .k-grouping-row .k-i-collapse",t._groupableClickHandler):t.table.on(zo+Dt,".k-grouping-row .k-i-expand, .k-grouping-row .k-i-collapse",t._groupableClickHandler),t._attachGroupable()},_attachGroupable:function(){var t=this,o=t.wrapper,r=t.options.groupable,l=zt+"["+Je.attr("field")+"]",n=t.content?".k-grid-header:first "+l:"table:first>.k-grid-header "+l;r&&r.enabled!==!1&&(o.has("div.k-grouping-header")[0]||e("<div>&nbsp;</div>").addClass("k-grouping-header").prependTo(o),t.groupable&&t._destroyGroupable(),fr.chrome&&(o.find("div.k-grouping-header").css("touch-action","none"),o.find(n).css("touch-action","none")),t.groupable=new Ye.Groupable(o,it({},r,{draggable:t._draggableInstance,groupContainer:">div.k-grouping-header",dataSource:t.dataSource,draggableElements:n,filter:n,allowDrag:t.options.reorderable,change:function(e){t.trigger("group",{groups:e.groups})?e.preventDefault():(t._clearEditableState(),t.dataSource.options.endless&&(t.dataSource.options.endless=null,t._endlessPageSize=t.dataSource.options.pageSize,t.dataSource._skip=0,t.dataSource._pageSize=t.dataSource._take=t._endlessPageSize,t.dataSource._page=1))}})),t._addGroupableOptionsToHeader())},_addGroupableOptionsToHeader:function(){var e,t,o,r=this,l=P(r.columns),n={},a="",i=r._headerCells(),s="";for(o=0;o<l.length;o++)a=l[o].field,n[l[o].field]=l[o];for(o=0;o<i.length;o++)e=i.eq(o),s=e.attr(Je.attr(qo)),t=n[s],t&&t.groupable&&t.groupable.sort&&e.data(Qo,t.groupable.sort)},_destroyGroupable:function(){var e=this;e.groupable&&e.groupable.element&&e.groupable.element.kendoGroupable("destroy"),e.groupable=null,e._removeGroupableOptionsFromHeader()},_removeGroupableOptionsFromHeader:function(){var e,t=this,o=t._headerCells();for(e=0;e<o.length;e++)o.eq(e).removeData(Qo)},_continuousItems:function(t,o){var r,l,n,a,i,s,d,c;if(this.lockedContent){for(r=this,l=r.table.add(r.lockedTable),n=e(t,l[0]),a=e(t,l[1]),i=o?Q(r.columns).length:1,s=o?r.columns.length-i:1,d=[],c=0;c<n.length;c+=i)pt.apply(d,n.slice(c,c+i)),pt.apply(d,a.splice(0,s));return d}},_selectable:function(){var o,r,l,n,a=this,i=[],s=a._isLocked(),d=a.options.selectable;d&&(a.selectable&&a.selectable.destroy(),a._selectedIds={},d=Je.ui.Selectable.parseOptions(d),o=d.multiple,r=d.cell,a._hasDetails()&&(i[i.length]=".k-detail-row"),(a.options.groupable||a._hasFooters()||a._groups())&&(i[i.length]=".k-grouping-row,.k-group-footer"),i=i.join(","),""!==i&&(i=":not("+i+")"),l=a.table,s&&(l=l.add(a.lockedTable)),n=">"+(r?yt:"tbody>tr"+i),a.selectable=new Je.ui.Selectable(l,{filter:n,aria:!0,multiple:o,change:function(){var e;r||a._persistSelectedRows(),a._checkBoxSelection&&(e=a.selectable.value(),a._uncheckCheckBoxes(),a._checkRows(e),a._toggleHeaderCheckState(e.length&&e.length===a.items().length?!0:!1)),a.trigger(Kt)},useAllItems:s&&o&&r,relatedTarget:function(t){var o,l,n,i;if(!r&&s){for(l=e(),n=0,i=t.length;n<i;n++)o=a._relatedRow(t[n]),ut(o[0],t)<0&&(l=l.add(o));return l}},continuousItems:function(){return a._continuousItems(n,r)},ignoreOverlapped:a.options.selectable&&a.options.selectable.ignoreOverlapped,addIdToRanges:!0}),a.options.navigatable&&l.on("keydown"+Dt,function(n){var i=a.current(),d=n.target;if(i)if(n.keyCode===nt.SPACEBAR&&!n.shiftKey&&e.inArray(d,l)>-1&&!i.is(".k-edit-cell,.k-header")&&i.parent().is(":not(.k-grouping-row,.k-detail-row,.k-group-footer)")){if(n.preventDefault(),n.stopPropagation(),i=r?i:i.parent(),s&&!r&&(i=i.add(a._relatedRow(i))),o)if(n.ctrlKey){if(i.hasClass(so))return a._deselectCheckRows(i),t}else a.selectable.clear();else a.selectable.clear();r||(a.selectable._lastActive=i),a.selectable.value(i)}else!r&&(e(d).is("td")||e(d).is("table")&&ut(d,this._navigatableTables))&&(n.shiftKey&&n.keyCode==nt.LEFT||n.shiftKey&&n.keyCode==nt.RIGHT||n.shiftKey&&n.keyCode==nt.UP||n.shiftKey&&n.keyCode==nt.DOWN||n.keyCode===nt.SPACEBAR&&n.shiftKey)&&(n.preventDefault(),n.stopPropagation(),i=i.parent(),s&&(i=i.add(a._relatedRow(i))),o?(a.selectable._lastActive||(a.selectable._lastActive=i),a.selectable.selectRange(a.selectable._firstSelectee(),i)):(a.selectable.clear(),a.selectable.value(i)))}))},_clipboard:function(){var e,t=this.options,o=t.selectable;o&&t.allowCopy&&(e=this,t.navigatable||e.table.add(e.lockedTable).attr("tabindex",0).on("mousedown"+Dt+" keydown"+Dt,".k-detail-cell",function(e){e.target!==e.currentTarget&&e.stopImmediatePropagation()}).on("mousedown"+Dt,St+">"+Tt,ht(Ae,e)),e.copyHandler=ht(e.copySelection,e),e.updateClipBoardState=function(){e.areaClipBoard&&e.areaClipBoard.val(e.getTSV()).focus().select()},e.bind("change",e.updateClipBoardState),e.wrapper.on("keydown",e.copyHandler),e.clearAreaHandler=ht(e.clearArea,e),e.wrapper.on("keyup",e.clearAreaHandler))},copySelectionToClipboard:function(e){this._createAreaClipBoard(),this.areaClipBoard.val(this.getTSV(e)).focus().select(),document.execCommand("copy")},copySelection:function(t){t instanceof jQuery.Event&&!t.ctrlKey&&!t.metaKey||e(t.target).is("input:visible,textarea:visible")||window.getSelection&&""+window.getSelection()||document.selection&&document.selection.createRange().text||(this._createAreaClipBoard(),this.areaClipBoard.val(this.getTSV()).focus().select())},_createAreaClipBoard:function(){this.areaClipBoard||(this.areaClipBoard=e("<textarea />").css({position:"fixed",top:"50%",left:"50%",opacity:0,width:0,height:0}).appendTo(this.wrapper))},getTSV:function(t){var o,r,l,n,a,i,s,d,c,u=this,p=u.select(),h="\t",f=u.options.allowCopy,g=!0,m=u._isLocked()&&Q(u.columns).length;return e.isPlainObject(f)&&f.delimeter&&(h=f.delimeter),o="",p.length&&(p.eq(0).is("tr")&&(p=p.find("td:not(.k-group-cell)")),g&&p.filter(":visible"),r=[],l=this.columns.length,n=u._isLocked()&&Q(u.columns).length,a=!0,i=[],d=te(this.columns),e.each(p,function(t,o){var d,c,p,h;o=e(o),s=u._getCellField(o,m),d=o.closest("tr"),c=d.index(),p=o.index(),g&&(p-=o.prevAll(":hidden").length),n&&a&&(a=e.contains(u.lockedTable[0],o[0])),u._groups()&&a&&(p-=u._groups()),p=a?p:p+n,s&&(i[p]=s),l>p&&(l=p),h=o.text(),r[c]||(r[c]=[]),r[c][p]=h}),c=r.length,r=e.each(r,function(e,t){t&&(r[e]=t.slice(l),c>e&&(c=e))}),t&&i.length&&r.splice(c,0,i.map(function(e){return Ge(e,d)})),e.each(r.slice(c),function(e,t){o+=t?t.join(h)+"\r\n":"\r\n"})),o},clearArea:function(t){var o;this.areaClipBoard&&t&&t.target===this.areaClipBoard[0]&&(o=this.options.navigatable?e(this.current()).closest("table"):this.table,He(o,!0)),this.areaClipBoard&&(this.areaClipBoard.remove(),this.areaClipBoard=null)},_adaptiveColumns:function(){var e=this;e._anyColumnHasMediaQuery()&&(e._setColumnsMediaVisibility(e.columns),e._attachColumnMediaResizeHandler())},_anyColumnHasMediaQuery:function(){return this._columnsWithMediaQuery().length},_columnsWithMediaQuery:function(){return C(this.columns)},_attachColumnMediaResizeHandler:function(){var t=this;t._detachColumnMediaResizeHandler(),t._columnMediaResizeHandler=ht(t._onColumnMediaResize,t),e(window).on(yo+Dt,t._columnMediaResizeHandler)},_detachColumnMediaResizeHandler:function(){var t=this;t._columnMediaResizeHandler&&e(window).off(yo+Dt,t._columnMediaResizeHandler)},_onColumnMediaResize:function(){var e=this;e._setColumnsMediaVisibility(e.columns),e._setContentMediaWidth()},_setColumnsMediaVisibility:function(e){var t,o=e||[];for(t=0;t<o.length;t++)this._setColumnMediaVisibility(o[t])},_setColumnMediaVisibility:function(e){var t=this;w(e.media)?t._setColumnsMediaVisibility(e.columns):m(e)?(t._showColumnByMedia(e),e.hidden||t._setColumnsMediaVisibility(e.columns)):t._hideColumnByMedia(e)},_showColumnByMedia:function(e){e.hidden||this.showColumn(e),g(e)},_hideColumnByMedia:function(e){var t=e.hidden;t||(e._hideByMedia=!0,this.hideColumn(e),e._hideByMedia=!1,e.hidden=t),g(e)},_setContentMediaWidth:function(){var t,o,r,l,n,a,i,s,d,c,u,p,h,f,g,m=this,b=m.options,v=m._isLocked();if(b.scrollable&&b.resizable&&(v&&m.lockedFooter?t=m.lockedFooter.children("table"):m.footer&&(t=m.footer.find(">.k-grid-footer-wrap>table")),t&&t[0]||(t=e()),o=v?m.wrapper.find(".k-grid-header-locked").find("table"):m.wrapper.find(".k-grid-header").find("table"),r=v?m.lockedTable:m.table,l=o.find("th"),n=o.find("colgroup"),a=l.length,i=l.filter(_).length,s=l.length-i,d=0,""!==o[0].style.width&&parseFloat(o[0].style.width)!==d)){for(c=o.css("width"),u=0;u<a;u++)k(l[u])&&(h=Math.max(u,u-s),f=n.children()[h],g=f?f.style.width:"",""!==g?p=parseFloat(g):(o.css("width","auto"),p=rt(l.eq(u)),o.css("width",c)),d+=p);r.css("width",d-1),o.css("width",d),t.css("width",d),m._updateStickyColumns()}},_minScreenSupport:function(){var t=this.hideMinScreenCols();t&&(this.minScreenResizeHandler=ht(this.hideMinScreenCols,this),e(window).on("resize",this.minScreenResizeHandler))},hideMinScreenCols:function(){var e=this.columns,t=window.innerWidth>0?window.innerWidth:screen.width;return this._iterateMinScreenCols(e,t)},_iterateMinScreenCols:function(e,o){var r,l,n,a=!1;for(r=0;r<e.length;r++)l=e[r],n=l.minScreenWidth,n!==t&&null!==n&&(a=!0,n>o?this.hideColumn(l):this.showColumn(l)),!l.hidden&&l.columns&&(a=this._iterateMinScreenCols(l.columns,o)||a);return a},_stickyColumns:function(){var e=this;e._anyStickyColumns()&&e._setStickyColumns(!1)},_updateStickyColumns:function(){var e=this,t=dt(le(e.columns),function(e){return e.groupHeaderColumnTemplate});e._anyStickyColumns()&&(e._setStickyColumns(!0),e._templates(),t.length>0&&e._renderGroupRows(),e._hasFilterRow()&&e._updateStickyFilterCells())},_updateStickyFilterCells:function(){var t=this,o=t.thead.find(".k-filter-row").find("th:not(.k-group-cell,.k-hierarchy-cell)"),r=le(t.columns);o.length&&o.each(function(){var t,o,l=e(this),n=l.find("span").first().getKendoFilterCell();n&&(t=T(r,n.options.column.uid),o=l.attr("style")||"",t.sticky?(l.attr("style",o+t.stickyStyle),l.addClass(vo)):(o=o.replace(ar,""),o=o.replace(ir,""),l.attr("style",o),l.removeClass(vo)))})},_anyStickyColumns:function(){var e=this;return Y(e.columns).length},_setStickyColumns:function(e){var t=this,o=Y(t.columns),r=X(t.columns),l=t._calculateStickyWidths(r);t._removeStickyAttributes(o),t._setStickyClassAttributes(o),t._setStickyStyleAttributes(r,l,e),e&&t._setStickyStyles(r,l)},_calculateStickyWidths:function(e,t,o){var r,l,n,a,i,s=this,d=hr?"right":"left",c=hr?"left":"right",u={left:Array(e.length).fill(t?t:0),right:Array(e.length).fill(o?o:0)};for(r=0;r<e.length-1;r++)l=e[r],n=s._sumColumnWidth(l),a=n+u[d][r],u[d][r+1]=a;for(r=e.length-1;r>0;r--)l=e[r],n=s._sumColumnWidth(l),i=n+u[c][r],u[c][r-1]=i;return u},_setStickyClassAttributes:function(e,t){var o,r,l=this;for(o=0;o<e.length;o++)r=e[o],r.columns&&(!t&&o&&(t=o),l._setStickyClassAttributes(oe([r]),t)),t&&j(r,"headerAttributes","class",wo),j(r,"attributes","class",bo),j(r,"headerAttributes","class",vo),j(r,"footerAttributes","class",Co)},_setStickyStyleAttributes:function(e,t,o){var r,l,n,a,i,s,d,c=this;for(r=0;r<e.length;r++)l=e[r],n=t.left[r],a=t.right[r],i="left: "+n+"px; right: "+a+"px;",l.columns&&(s=re([l]),d=c._calculateStickyWidths(s,n,a),c._setStickyStyleAttributes(s,d,o),o&&c._setStickyStyles(s,d)),j(l,"attributes","style",i),j(l,"headerAttributes","style",i),j(l,"footerAttributes","style",i),l.stickyStyle=i},_removeStickyAttributes:function(e){var t,o,r=this,l=RegExp("(\\s*"+bo+")*","ig"),n=RegExp("(\\s*"+vo+")*","ig"),a=RegExp("(\\s*"+Co+")*","ig"),i=RegExp("(\\s*"+wo+")*","ig");for(t=0;t<e.length;t++)o=e[t],o.columns&&r._removeStickyAttributes(oe([o])),$(o,"attributes","class",l),$(o,"attributes","style",ar),$(o,"attributes","style",ir),$(o,"headerAttributes","class",n),$(o,"headerAttributes","class",i),$(o,"headerAttributes","style",ar),$(o,"headerAttributes","style",ir),$(o,"footerAttributes","class",a),$(o,"footerAttributes","style",ar),$(o,"footerAttributes","style",ir)},_setStickyStyles:function(t,o){var r,l,n,a,i,s,d,c,u,p,h,f=this,g=le(J(f.columns)),m=f.tbody.children(":not(.k-detail-row)");for(r=0;r<t.length;r++)if(a=t[r],s=o.left[r],d=o.right[r],i=g.indexOf(a),c=f._getColumnHeader(a),c.addClass(vo),a.headerAttributes["class"]&&a.headerAttributes["class"].indexOf(wo)!==-1&&c.addClass(wo),U(c,s,d),!a.columns)for(f.footer&&(u=f.footer.find(".k-grid-footer-wrap tr.k-footer-template").children().filter(":not(.k-group-cell,.k-hierarchy-cell)").eq(i),u.addClass(Co),U(u,s,d)),l=0;l<m.length;l++)n=e(m[l]),n.hasClass("k-grouping-row")?(p=n.find("."+a.groupHeaderColumnTemplateClass),p.addClass(bo),U(p,s,d)):(h=n.children().filter(":not(.k-group-cell,.k-hierarchy-cell)").eq(i),h.addClass(bo),U(h,s,d))},_removeStickyStyles:function(t){var o,r,l,n,a,i,s,d,c,u=this,p=le(J(u.columns)),h=u.tbody.children(":not(.k-detail-row)");for(o=0;o<t.length;o++)if(n=t[o],a=p.indexOf(n),i=u._getColumnHeader(n),i.removeClass(vo),i.removeClass(wo),U(i,"",""),n.columns)u._removeStickyStyles(n.columns);else for(n.footerTemplate&&u.footer&&(s=u.footer.find(".k-grid-footer-wrap tr.k-footer-template").children().filter(":not(.k-group-cell,.k-hierarchy-cell)").eq(a),s.removeClass(Co),U(s,"","")),r=0;r<h.length;r++)l=e(h[r]),l.hasClass("k-grouping-row")?(d=l.find("."+n.groupHeaderColumnTemplateClass),d.removeClass(bo),U(d,"","")):(c=l.children().filter(":not(.k-group-cell,.k-hierarchy-cell)").eq(a),c.removeClass(bo),U(c,"",""))},_getColumnHeader:function(t){var o=this,r=e(e("#"+t.headerAttributes.id).length?"#"+t.headerAttributes.id:"#"+o._cellId);return r},_sumColumnWidth:function(e){var t=this,o=0;return o=t._sumCurrentWidths(e.columns?le([e]):[e])},_sumCurrentWidths:function(e){var t,o,r,l=this,n=0,a=0,i=e.length;for(r=0;r<i;r++)t=e[r],o=l._getColumnHeader(t),!t.hidden&&m(t)&&(a=o.is(":visible")?o.outerWidth():t.width,n+=a?parseInt(a,10):0);return n},_belongsToGrid:function(e){return this.wrapper[0]===e.closest(At)[0]},getSelectedData:function(){var e,t=this,o=t.selectable.selectedRanges(),r=Object.keys(o),l=t.selectable.selectedSingleItems(),n=[],a=te(t.columns);for(e=0;e<r.length;e++)n=n.concat(t._mapSelectionToData(o[r[e]],a));return l.length&&(n=n.concat(t._mapSelectionToData(l,a))),n},exportSelectedToExcel:function(e){var t,o,r,l,n,a,i,s,d,c,u,p,h,f;if(!Je.excel||!Je.ooxml)throw Error("The excel export functionality depends on both kendo.excel.js and kendo.ooxml.js scripts, please make sure they are included.");for(t=this,o=this.options.excel||{},r=te(t.columns),l=new Je.excel.ExcelExporter({}),n=function(){return{autoWidth:!0}},a={sheets:[{columns:Array.apply(0,Array(r.length)).map(n),rows:[],freezePane:{},filter:!1}]},i=t.selectable.selectedRanges(),s=Object.keys(i),d=t.selectable.selectedSingleItems(),u=[],p=t._isLocked()&&Q(t.columns).length,h=Ne.bind(t),c=0;c<s.length;c++)u=u.concat(t._mapSelectionToData(i[s[c]],r,Ue));u.length&&t._addRangeSelectionRows(a,l,u,e),u=d.length?t._mapSelectionToData(d,r,Ue):[],u.length&&(p&&(u=u.sort(h)),t._addSingleSelectionRows(a,l,u,e)),a.sheets[0].rows.length&&(f=new Je.ooxml.Workbook(a),f.options||(f.options={}),f.options.skipCustomHeight=!0,f.toDataURLAsync().then(function(e){Je.saveAs({dataURI:e,fileName:a.fileName||o.fileName,proxyURL:o.proxyURL,forceProxy:o.forceProxy})}))},_addSingleSelectionRows:function(e,t,o,r){var l,n=0,a=te(this.columns);for(n=0;n<o.length;n++)l=o[n],t.data=[l],this._setExporterColumns(t,a,l),this._createExportRows(e,t,r)},_addRangeSelectionRows:function(e,t,o,r){var l=te(this.columns);t.data=o,this._setExporterColumns(t,l,o[0]),this._createExportRows(e,t,r)},_createExportRows:function(e,t,o){e.sheets[0].rows=e.sheets[0].rows.concat(o?t._rows():t._dataRows(t.data,0))},_setExporterColumns:function(t,o,r){t.columns=t.options.columns=e.map(o.filter(function(e){return Object.keys(r).indexOf(e.field)>=0}),t._prepareColumn)},_mapSelectionToData:function(t,o,r){var l,n,a,i,s,d,c=this,u=t[0][0].nodeName,p="TR"===u,h={},f=function(e){var t={};if(e.field&&(!r||r(e)))return t[e.field]=l[e.field],t},g=c._isLocked()&&Q(c.columns).length;for(d=0;d<t.length;d++)if(n=t[d],l=c.dataItem(p?n:n.parent()),p)h[l.uid]=e.extend.apply(null,o.map(f));else{if(i=c._getCellField(n,g),!i)continue;if(a=h[l.uid],a||(a=h[l.uid]={}),s=x(o,i),!s||r&&!r(s))continue;a[i]=l[i]}return Object.keys(h).map(function(e){return h[e].uid=e,h[e]})},_getCellField:function(t,o){var r=this,l=o&&e.contains(r.lockedTable[0],t[0]),n=Je.attr("field");return o?r.element.find(".k-grid-header-"+(l?"locked":"wrap")+" th").eq(t.index()).attr(n):r.thead.find("th").eq(t.index()).attr(n)},_relatedRow:function(t){var o,r,l=this.lockedTable;return t=e(t),l?(o=t.closest(this.table.add(this.lockedTable)),r=o.find(">tbody>tr").index(t),o=o[0]===this.table[0]?l:this.table,o.find(">tbody>tr").eq(r)):t},_relatedCell:function(t){var o,r,l=this.lockedTable;return t=e(t),l?(o=t.closest(this.table.add(this.lockedTable)),r=o.find(">tbody>tr>td").index(t),o=o[0]===this.table[0]?l:this.table,o.find(">tbody>tr>td").index(r)):t},clearSelection:function(){var e=this;return e.selectable&&!e._checkBoxSelection&&e.selectable.clear(),e._checkBoxSelection?(e._deselectCheckRows(e.select()),t):(e.options.persistSelection?e._persistSelectedRows():e._selectedIds={},e.trigger(Kt),t)},select:function(e){var o=this,r=o.selectable,l=Je.ui.Selectable.parseOptions(this.options.selectable),n=l.cell;return e=o.table.add(o.lockedTable).find(e),e.length?(r&&!r.options.multiple&&(r.clear(),e=e.first()),o._isLocked()&&(e=e.add(e.map(function(){return n?o._relatedCell(this):o._relatedRow(this)}))),r&&!o._checkBoxSelection?r.value(e):(o._checkRows(e),o.select().length===o.items().length&&o._toggleHeaderCheckState(!0),n||o._persistSelectedRows(),o.trigger(Kt)),t):r?r.value():o.items().filter("."+so)},_toggleHeaderCheckState:function(e){var t=this;e?t.thead.add(t.lockedHeader).find("tr "+uo).prop("checked",!0).attr("aria-checked",!0).attr("aria-label","Deselect all rows"):t.thead.add(t.lockedHeader).find("tr "+uo).prop("checked",!1).attr("aria-checked",!1).attr("aria-label","Select all rows")},_uncheckCheckBoxes:function(){var e=this,t=e.table.add(e.lockedTable);t.find("tbody "+uo).attr("aria-checked",!1).prop("checked",!1).attr("aria-label","Select row")},_deselectCheckRows:function(t){var o=this;t=o.table.add(o.lockedTable).find(t),o._isLocked()&&(t=t.add(t.map(function(){return o._relatedRow(this)}))),t.each(function(){e(this).removeClass(so).find(uo).attr("aria-checked",!1).prop("checked",!1).attr("aria-label","Select row")}),o._toggleHeaderCheckState(!1),o._persistSelectedRows(),o.trigger(Kt)},_checkRows:function(t){t.each(function(){e(this).addClass(so).find(uo).prop("checked",!0).attr("aria-label","Deselect row").attr("aria-checked",!0)})},_persistSelectedRows:function(){var e,t,o,r,l=this,n=l.items(),a=l.dataSource.options,i=a.schema,s={};if(i&&i.model&&l._data&&(o=ft(i.model)?i.model.fn.idField:i.model.id))for(l.select().each(function(){t=l.dataItem(this),s[t[o]]=!0}),r=0;r<n.length;r++)t=l.dataItem(n[r]),e=t[o],s[e]?l._selectedIds[e]=!0:delete l._selectedIds[e]},selectedKeyNames:function(){var e,t=this,o=[];for(e in t._selectedIds)o.push(e);return o.sort(),o},_updateCurrentAttr:function(t,o){var r,l,n=e(t).data("headerId");e(t).removeClass(ao).closest("table").removeAttr("aria-activedescendant"),n?(n=n.replace(this._cellId,""),e(t).attr("id",n)):e(t).removeAttr("id"),r=o.attr("id"),r!=this._cellId&&o.data("headerId",r),o.is("th")?l=r:o.attr("id",this._cellId),o.addClass(ao).closest("table").attr("aria-activedescendant",l||this._cellId),this._current=o},_scrollCurrent:function(){var t,o,r,l,n,a,i=this._current,s=this.options.scrollable;i&&s&&(t=i.parent(),o=t.closest("table").parent(),r=o.is(".k-grid-content-locked,.k-grid-header-locked"),l=o.is(".k-grid-content-locked,.k-grid-content,.k-virtual-scrollable-wrap"),n=e(this.content).find(">.k-virtual-scrollable-wrap").addBack().last()[0],l&&(this.virtualScroll?(a=Math.max(ut(t[0],this._items(t.parent())),0),this.virtualScroll.rows?(this._rowVirtualIndex=this.virtualScrollable.itemIndex(a),this.virtualScrollable.scrollIntoView(t)):(this._rowVirtualIndex=a,this._scrollTo(this._relatedRow(t)[0],n))):this._scrollTo(this._relatedRow(t)[0],n)),this.lockedContent&&(this.lockedContent[0].scrollTop=n.scrollTop),r||this._scrollTo(i[0],n))},current:function(e){return this._setCurrent(e,!0)},_setCurrent:function(t,o,r){var l,n,a,i=this._current;return t=e(t),t.length&&(i&&i[0]===t[0]||(l=t.parent(),n=l.children(wt),a=parseInt(l.children().first().attr("colspan"),10),this._hasVirtualColumns()&&(this._virtualCellIndex=(a>1?a:0)+n.index(t)),this._updateCurrentAttr(i,t),r||this._scrollCurrent(),o||this.trigger(Eo,{element:t}))),t&&t.length&&(this._lastCellIndex=t.parent().children(wt).index(t)),this._current},_removeCurrent:function(){this._current&&(this._current.removeClass(ao),this._current=null)},_scrollTo:function(t,o){var r=t.tagName.toLowerCase(),l="td"===r||"th"===r,n=e(t).closest("table")[0],a=t[l?"offsetWidth":"offsetHeight"],i=o[l?"scrollLeft":"scrollTop"],s=o[l?"clientWidth":"clientHeight"],d="relative"===e(t).css("position")&&hr&&l?Math.abs(n.offsetLeft-t.offsetLeft):t[l?"offsetLeft":"offsetTop"],c=d+a,u=0,p=0,h=0;hr&&l&&(fr.msie||fr.edge?p=n.offsetLeft:(fr.mozilla||fr.webkit&&fr.version>85)&&(h=n.offsetLeft-Je.support.scrollbar())),i=Math.abs(i+p-h),u=i>d?d:c>i+s?a<=s?c-s:d:i,u=Math.abs(u+p)+h,o[l?"scrollLeft":"scrollTop"]=u},_navigatable:function(){var t,o,r,l=this;l.options.navigatable&&(t=l.table.add(l.lockedTable),o=l.thead.parent().add(e(">table",l.lockedHeader)),r=t,l.options.scrollable&&(r=r.add(o),o.attr(Lo,-1)),this._navigatableTables=r,this._headertables=o,r.off("mousedown"+Dt+" focus"+Dt+" focusout"+Dt+" keydown"+Dt),
o.on("keydown"+Dt,ht(l._openHeaderMenu,l)).find("a.k-link").attr("tabIndex",-1),t.attr(Lo,_t.max(t.attr(Lo)||0,0)).on("keydown"+Dt,".k-detail-cell",function(e){e.target!==e.currentTarget&&e.stopImmediatePropagation()}),r.on(Je.support.touch?"touchstart"+Dt:"mousedown"+Dt,St+">"+Tt,ht(Ae,l)).on("focus"+Dt,ht(l._tableFocus,l)).on("focusout"+Dt,ht(l._tableBlur,l)).on("keydown"+Dt,l,ht(l._tableKeyDown,l)))},_openHeaderMenu:function(e){e.altKey&&e.keyCode==nt.DOWN&&(this.current().find(".k-grid-filter, .k-header-column-menu").click(),e.stopImmediatePropagation())},_setTabIndex:function(e){this._navigatableTables.attr(Lo,-1),e.attr(Lo,0)},_tableFocus:function(t){var o=this.current(),r=e(t.currentTarget);o&&o.is(":visible")?o.addClass(ao):this._virtualColScroll?this._setCurrent(r.find(Et),!0,!0):this._setCurrent(r.find(Et)),this._setTabIndex(r)},_tableBlur:function(){var e=this.current();e&&e.removeClass(ao)},_findCellIndex:function(e,t,o){var r,l;if(o)for(l=t;l>=0&&(r=l,e[l].hidden);l--);else for(l=t;l<e.length&&(r=l,e[l].hidden);l++);return r},_scrollToColumn:function(e,o){var r,l,n,a,i;if(this._virtualCellIndex===t)return!1;for(r=this,l=r._virtualCellIndex,n=le(J(r.columns)),a=0,e==(hr?nt.LEFT:nt.RIGHT)&&l!==n.length-1?l=r._findCellIndex(n,l+1):e==(hr?nt.RIGHT:nt.LEFT)&&l?l=r._findCellIndex(n,l-1,!0):e==nt.HOME?l=r._findCellIndex(n,0):e==nt.END&&(l=r._findCellIndex(n,n.length-1,!0)),i=0;i<l;i++)a+=n[i].width;return r._virtualCellIndex=l,o&&(o.preventDefault(),o.stopPropagation()),Je.scrollLeft(r.content,a),!0},_tableKeyDown:function(o){var r,l=this.current(),n=this.virtualScroll||{},a=this.virtualScrollable&&this.virtualScrollable.fetching(),i=e(o.target),s=!o.isDefaultPrevented()&&!i.is(":button,a,:input,a>.k-icon");return a?(o.preventDefault(),t):((!n.columns||l&&document.body.contains(l[0])||!this._scrollToColumn(o.keyCode,o))&&(l||(l=e(this.lockedTable).add(this.options.scrollable?this.table:this.tbody).find(Et).first()),l.length&&(r=!1,s&&o.keyCode==nt.UP&&(r=this._moveUp(l,o.shiftKey)),s&&o.keyCode==nt.DOWN&&(r=this._moveDown(l,o.shiftKey)),s&&o.keyCode==(hr?nt.LEFT:nt.RIGHT)&&(r=this._moveRight(l,o.altKey,o.shiftKey,o.ctrlKey,o.currentTarget)),s&&o.keyCode==(hr?nt.RIGHT:nt.LEFT)&&(r=this._moveLeft(l,o.altKey,o.shiftKey,o.ctrlKey,o.currentTarget)),s&&o.keyCode==nt.PAGEDOWN&&(r=this._handlePageDown()),s&&o.keyCode==nt.PAGEUP&&(r=this._handlePageUp()),s&&o.keyCode==nt.HOME&&(r=this._handleHome(l,o.ctrlKey)),s&&o.keyCode==nt.END&&(r=this._handleEnd(l,o.ctrlKey)),s&&o.keyCode==nt.SPACEBAR&&(r=this._handleSpaceKey(l,o.ctrlKey)),o.keyCode!=nt.ENTER&&o.keyCode!=nt.F2||(r=this._handleEnterKey(l,o.currentTarget,i)),o.keyCode==nt.ESC&&(r=this._handleEscKey(l,o.currentTarget)),o.keyCode==nt.TAB&&(r=this._handleTabKey(l,o.currentTarget,o.shiftKey,i)),r&&(o.preventDefault(),o.stopPropagation()))),t)},_moveLeft:function(t,o,r,l,n){var a,i,s=t.parent(),d=s.parent();return o?this.collapseRow(s):l&&t.is(".k-header")&&this.options.reorderable?this._moveColumn(t,!0):(i=d.find(St).index(s),a=this._prevHorizontalCell(d,t,i),a[0]||(r?this.lockedTable?(a=this._relatedRow(s),e.contains(this.lockedTable[0],s[0])&&(a=a.prevAll(xt+":first")),a=a.children(wt+":last")):a=this._tabNext(t,n,!0):(d=this._horizontalContainer(d),a=this._prevHorizontalCell(d,t,i),a[0]!==t[0]&&He(d.parent(),!0))),this._setCurrent(a)),!0},_moveRight:function(t,o,r,l,n){var a,i,s=t.parent(),d=s.parent();return o?this.expandRow(s):l&&t.is(".k-header")&&this.options.reorderable?this._moveColumn(t,!1):(i=d.find(St).index(s),a=this._nextHorizontalCell(d,t,i),a[0]||(r?this.lockedTable?(a=this._relatedRow(s),e.contains(this.table[0],s[0])&&(a=a.nextAll(xt+":first")),a=a.children(wt+":first")):a=this._tabNext(t,n,!1):(d=this._horizontalContainer(d,!0),a=this._nextHorizontalCell(d,t,i),a[0]!==t[0]&&He(d.parent(),!0))),this._setCurrent(a)),!0},_moveUp:function(e,t){var o,r,l=e.parent().parent();return t?(o=e.parent(),o=o.prevAll(xt+":first"),o=e.parent().is(xt)?o.children().eq(e.index()):o.children(wt+":last")):(o=this._prevVerticalCell(l,e),o[0]||(this._lastCellIndex=0,l=this._verticalContainer(l,!0),o=this._prevVerticalCell(l,e),o[0]&&He(l.parent(),!0))),r=this._lastCellIndex||0,this._setCurrent(o),this._lastCellIndex=r,!0},_moveDown:function(e,t){var o,r,l=e.parent().parent();return t?(o=e.parent(),o=o.nextAll(xt+":first"),o=e.parent().is(xt)?o.children().eq(e.index()):o.children(wt+":first")):(o=this._nextVerticalCell(l,e),o[0]||(this._lastCellIndex=0,l=this._verticalContainer(l),o=this._nextVerticalCell(l,e),o[0]&&He(l.parent(),!0))),r=this._lastCellIndex||0,this._setCurrent(o),this._lastCellIndex=r,!0},_moveColumn:function(t,o){var r=this.wrapper.data().kendoReorderable.element.find(this._draggableInstance.options.filter+":visible"),l=v(F(this.columns)),n=r.index(e(t)),a=o?-1:1,i=l[n],s=M(l,this.columns,n,n+a);s>=0&&(this.reorderColumn(s,i,o),this.trigger(To,{newIndex:s,oldIndex:n,column:i}))},_handleHome:function(e,o){var r,l=e.parent(),n=l.parent(),a=this.lockedTable&&this.lockedTable.children("tbody")[0]===n[0],i=n[0]===this.tbody[0];return this._hasVirtualColumns()?(this._scrollToColumn(Je.keys.HOME),!0):(o?r=this.lockedTable?this.lockedTable.find(Rt+">"+Tt+":first"):this.table.find(Rt+">"+Tt+":first"):(i||a)&&(i&&this.lockedTable&&(l=this._relatedRow(l)),r=l.children(wt+":first")),r&&r.length?(this._setCurrent(r),!0):t)},_handleEnd:function(e,o){var r,l=e.parent(),n=l.parent(),a=this.lockedTable&&this.lockedTable.children("tbody")[0]===n[0],i=n[0]===this.tbody[0];return this._hasVirtualColumns()?(this._scrollToColumn(Je.keys.END),!0):(o?r=this.table.find(It+">"+Tt+":last"):(i||a)&&(!i&&this.lockedTable&&(l=this._relatedRow(l)),r=l.children(wt+":last")),r&&r.length?(this._setCurrent(r),!0):t)},_handlePageDown:function(){return!!this.options.pageable&&(this.dataSource.page(this.dataSource.page()+1),!0)},_handlePageUp:function(){return!!this.options.pageable&&(this.dataSource.page(this.dataSource.page()-1),!0)},_handleTabKey:function(t,o,r,l){var n,a=this.options.editable&&"incell"==this._editMode();return!(!a||t.is("th")||(this.options.scrollable?this._headertables.filter(o).length:this.thead.filter(l).length))&&(n=e(tt()).closest(".k-edit-cell"),n[0]&&n[0]!==t[0]&&(t=n),n=this._tabNext(t,o,r),n[0]!==t[0]&&(!!n.length&&(this._handleEditing(t,n,n.closest("table")),!0)))},_handleEscKey:function(t,o){var r,l=tt(),n="incell"==this._editMode();return Me(t)?(n?this.closeCell(!0):(r=e(t).parent().index(),l&&l.blur(),this.cancelRow(!0),r>=0&&this._setCurrent(this.items().eq(r).children(Tt).first())),He(o,!0),!0):!!t.has(l).length&&(He(o,!0),!0)},_toggleCurrent:function(e,t,o){var r=e.parent();return!e.is(".k-command-cell")&&(r.is(".k-grouping-row")?(r.find(".k-icon:first").click(),!0):!(t||!o)&&(r.find(".k-icon:first").click(),!0))},_handleSpaceKey:function(t,o){var r,l,n,a,i=this;if(o&&i.groupable&&t.hasClass("k-header"))return r=i.groupable.descriptors(),l=t.attr(Je.attr("field")),n=i.groupable.aggregates(),a=t.attr(Je.attr("title"))||l,i.groupable._canDrag(t)?(r.push({field:l,dir:"asc",aggregates:n||[]}),a+=" "+i.options.messages.ungroupHeader):(r=e.grep(r,function(e){return e.field!==l}),a+=" "+i.options.messages.groupHeader),t.attr("aria-label",a),i.dataSource.group(r),!0},_handleEnterKey:function(t,o,r){var l,n,a=this.options.editable&&this.options.editable.update!==!1,i=r.closest("[role=gridcell]"),s=this._hasDetails();return r.is("table")||e.contains(t[0],r[0])||(t=i),t.is("th")?(l=t.find(".k-link"),l.length?l.click():t.find(uo).focus(),!0):!!this._toggleCurrent(t,a,s)||(n=t.find(":kendoFocusable:first"),n[0]&&!t.hasClass("k-edit-cell")&&t.hasClass("k-state-focused")?(n.focus(),!0):!(!a||r.is(":button,.k-button,textarea"))&&(i[0]||(i=t),this._handleEditing(i,!1,o),!0))},_nextHorizontalCell:function(e,t,o){var r,l,n,a=t.nextAll(wt);return a.length||(r=e.find(St),l=r.index(t.parent()),l!=-1)?a.first():t.hasClass("k-header")?(n=[],N([Q(this.columns)[0]],se(r.eq(0).children(":visible").first()),n,0,0),n[o]?n[o][0]:t):t.parent().hasClass("k-filter-row")?r.last().children(wt).first():r.eq(o).children(wt).first()},_prevHorizontalCell:function(e,t,o){var r,l,n,a,i=t.prevAll(wt);return i.length||(r=e.find(St),l=r.index(t.parent()),l!=-1)?i.first():t.hasClass("k-header")?(n=[],a=Q(this.columns),N([a[a.length-1]],se(r.eq(0).children().last()),n,0,0),n[o]?n[o][0]:t):t.parent().hasClass("k-filter-row")?r.last().children(wt).last():r.eq(o).children(wt).last()},_currentDataIndex:function(e,o){var r,l=o.attr("data-index");return l?(r=Q(this.columns).length,r&&!e.closest("div").hasClass("k-grid-content-locked")[0]?l-r:l):t},_prevVerticalCell:function(t,o){var r,l=o.parent(),n=t.children(St),a=n.index(l),i=this._currentDataIndex(t,o);if(i||o.hasClass("k-header"))return r=ie(o),r.eq(r.length-2);if(i=Math.max(l.children(wt).index(o),this._lastCellIndex||0),l.hasClass("k-filter-row"))return ae(t).filter(_).eq(i);if(a==-1){if(this._hasVirtualColumns()&&(i=this._virtualCellIndex),l=t.find("tr.k-filter-row:visible"),!l[0])return(this._hasDetails()||o.parent().find(".k-hierarchy-cell").length)&&i&&i--,ae(t).filter(_).eq(i)}else l=0===a?e():n.eq(a-1);return r=l.children(wt),r.eq(r.length>i?i:0)},_nextVerticalCell:function(e,o){var r,l,n,a,i,s,d,c=o.parent(),u=e.children(St),p=u.index(c),h=this._currentDataIndex(e,o),f=this.virtualScroll||{};if(p!=-1&&h===t&&o.hasClass("k-header"))return se(o).eq(1);if(h=h?parseInt(h,10):c.children(wt).index(o),h=Math.max(h,this._lastCellIndex||0),p==-1?(c=u.eq(0),f.columns&&(l=parseInt(c.children().first().attr("colspan"),10),h=this._virtualCellIndex-(l>1?l:0)),(this._hasDetails()||c.find(".k-hierarchy-cell").length)&&h++):c=u.eq(p+o[0].rowSpan),n=h,this._currentDataIndex(e,o)!==t)for(a=c.children(":not(.k-group-cell):not(.k-hierarchy-cell)"),i=a.filter(":hidden"),s=0,d=i.length;s<d;s++)a.index(i[s])<h&&n--;return h=n,r=c.children(wt),r.eq(r.length>h?h:0)},_verticalContainer:function(e,t){var o=e.parent(),r=this._navigatableTables.length,l=Math.floor(r/2),n=ut(o[0],this._navigatableTables);return t&&(l*=-1),n+=l,(n>=0||n<r)&&(o=this._navigatableTables.eq(n)),o.find(t?">thead":">tbody")},_horizontalContainer:function(e,t){var o,r,l=this._navigatableTables.length;return l<=2?e:(o=e.parent(),r=ut(o[0],this._navigatableTables),r+=t?1:-1,!t||2!=r&&r!=l?!t&&(1==r||r<0)?e:this._navigatableTables.eq(r).find("thead, tbody"):e)},_tabNext:function(e,t,o){var r=!0,l=o?e.prevAll(wt+":first"):e.nextAll(":visible:first");if(!l.length){if(l=e.parent(),this.lockedTable&&(r=o&&t==this.lockedTable[0]||!o&&t==this.table[0],l=this._relatedRow(l)),r){if(this._hasVirtualColumns())return e;l=l[o?"prevAll":"nextAll"]("tr:not(.k-grouping-row):not(.k-detail-row):visible:first")}l=l.children(wt+(o?":last":":first"))}return l},_handleEditing:function(o,r,l){var n,a,i=this,s=e(tt()),d=i._editMode(),c=fr.msie,u=i._editContainer,p=i.options.editable&&i.options.editable.update!==!1;if(l=e(l),a="incell"==d?o.hasClass("k-edit-cell"):o.parent().hasClass("k-grid-edit-row"),i.editable){if(e.contains(u[0],s[0])&&(s.blur(),c&&s.blur()),!i.editable)return He(l),t;if(!i.editable.end())return i._setCurrent("incell"==d?u:u.children().filter(wt).first()),n=u.find(":kendoFocusable:first")[0],n&&n.focus(),t;"incell"==d?i.closeCell():(i.saveRow(),a=!0)}r&&i._setCurrent(r),He(l,!0),p&&(!a&&!r||r)&&(d===Bo?e(i.current()).hasClass(Ct)||i.editCell(i.current()):i.editRow(i.current().parent()))},_wrapper:function(){var e=this,t=e.table,o=e.options.height,r=e.options.width,l=e.element;l.is("div")||(l=l.wrap("<div/>").parent()),e.wrapper=l.addClass("k-grid k-widget k-grid-display-block"),o&&(e.wrapper.css(Do,o),t.css(Do,"auto")),r&&e.wrapper.css("width",r),e._initMobile()},_initMobile:function(){var e,t=this.options,o=this;this._isMobile=t.mobile===!0&&Je.support.mobileOS||"phone"===t.mobile||"tablet"===t.mobile,this._isMobile&&(e=this.wrapper.addClass("k-grid-mobile").wrap("<div data-"+Je.ns+'stretch="true" data-'+Je.ns+'role="view" data-'+Je.ns+'init-widgets="false"></div>').parent(),this.pane=this._createPane(e),this.view=this.pane.view(),t.height?this.pane.element.parent().css(Do,t.height):this.pane.element.parent().css(Do,this.wrapper[0].style.height),this._editAnimation="slide",o.wrapper.on("transitionend"+Dt,function(e){e.stopPropagation()}),o.wrapper.on("contextmenu"+Dt,"th a",function(e){return e.preventDefault(),!1}),this.view.bind("showStart",function(){o._isLocked()&&(o._updateTablesWidth(),o._applyLockedContainersWidth(),o._syncLockedContentHeight(),o._syncLockedHeaderHeight(),o._syncLockedFooterHeight())}))},_createPane:function(e){var t=Je.Pane.wrap(e,{viewEngine:{viewOptions:{renderOnInit:!0,wrap:!1,wrapInSections:!0,detachOnHide:!1,detachOnDestroy:!1}}});return t},_tbody:function(){var t,o=this,r=o.table;t=r.find(">tbody"),t.length||(t=e("<tbody/>").appendTo(r)),o.tbody=t.attr("role","rowgroup")},_scrollable:function(){var t,o,r,l,n,a,i,s=this,d=s.options,c=d.scrollable,u=c!==!0&&c.virtual,p=u?Le(c.virtual):null,h=!Je.support.kineticScrollNeeded||p&&p.rows?Je.support.scrollbar():0;c&&(t=s.wrapper.children(".k-grid-header"),t[0]||(t=e('<div class="k-grid-header" />').insertBefore(s.table)),t.css(hr?"padding-left":"padding-right",c.virtual?h+1:h),o=e('<table role="grid" />'),o.width(s.table[0].style.width),o.append(s.thead),t.empty().append(e('<div class="k-grid-header-wrap k-auto-scrollable" />').append(o)),s.content=s.table.parent(),s.virtualScroll=p,s.content.is(".k-virtual-scrollable-wrap, "+kt+_r.scrollContainer)&&(s.content=s.content.parent()),s.content.is(".k-grid-content, .k-virtual-scrollable-wrap")||(s.content=s.table.wrap('<div class="k-grid-content k-auto-scrollable" />').parent()),p&&p.rows&&!s.virtualScrollable&&s._createVirtualScrollable(),p&&p.columns&&s.table.css({width:q(te(Z(s.columns)))}),r=t.children(".k-grid-header-wrap"),s.scrollables=r.add(s.content),l=s.wrapper.find(".k-grid-footer"),l.length&&(s.scrollables=s.scrollables.add(l.children(".k-grid-footer-wrap"))),r.unbind("scroll"+Dt).bind("scroll"+Dt,function(e){s._scrollLeft!==this.scrollLeft&&Je.scrollLeft(s.scrollables.not(e.currentTarget),this.scrollLeft)}),p&&p.rows?s.content.find(">.k-virtual-scrollable-wrap").unbind("scroll"+Dt).bind("scroll"+Dt,function(){var e=this.scrollLeft!=s._scrollLeft;s._scrollLeft=this.scrollLeft,Je.scrollLeft(s.scrollables,this.scrollLeft),s.lockedContent&&(s.lockedContent[0].scrollTop=this.scrollTop),p.columns&&e&&s.refresh()}):(n=c.endless,a=s.dataSource.options.pageSize,n&&(s._endlessPageSize=a),s.content.unbind("scroll"+Dt).bind("scroll"+Dt,function(e){var t=this.scrollLeft!=s._scrollLeft;s._scrollLeft=this.scrollLeft,Je.scrollLeft(s.scrollables.not(e.currentTarget),s._scrollLeft),s.lockedContent&&e.currentTarget==s.content[0]&&(s.lockedContent[0].scrollTop=this.scrollTop),n&&this.scrollTop+this.clientHeight-this.scrollHeight>=-10&&!s._endlessFetchInProgress&&s._endlessPageSize<s.dataSource.total()&&(s._skipRerenderItemsCount=s._endlessPageSize,s._endlessPageSize=s._endlessPageSize+a,s.dataSource.options.endless=!0,s._endlessFetchInProgress=!0,s.dataSource.pageSize(s._endlessPageSize)),p&&p.columns&&t&&(s._virtualColScroll=!0,s._cacheEditableState(),s.refresh(),s._restoreEditableState(),s._virtualColScroll=!1)}),i=s.content.data("kendoTouchScroller"),i&&i.destroy(),i=Je.touchScroller(s.content),i&&i.movable&&(s.touchScroller=i,i.movable.bind("change",function(e){Je.scrollLeft(s.scrollables,-e.sender.x),s.lockedContent&&s.lockedContent.scrollTop(-e.sender.y)}),s.one(Jt,function(e){e.sender.wrapper.addClass("k-grid-backface")}))))},_createVirtualScrollable:function(){var e=this;e.virtualScrollable&&e.virtualScrollable.destroy(),e.virtualScrollable=new je(e.content,{dataSource:e.dataSource,itemHeight:function(){return e._averageRowHeight()},page:function(){e._restoreEditableState()},scroll:function(){e._focusEditable()},loadStart:function(){e._progress(!0)},loadEnd:function(){e._progress(!1)}}),e.virtualScrollable.bind(to,ht(e._onVirtualPaging,e))},_onVirtualPaging:function(){var e=this;e._cacheEditableState(),e._isVirtualIncellEditable()&&(e._shouldClearEditableState=!1,e.closeCell(),e._shouldClearEditableState=!0)},_isVirtualEditable:function(){return this._isVirtualIncellEditable()||this._isVirtualInlineEditable()||this._isVirtualPopupEditable()},_isVirtualInlineEditable:function(){return this.virtualScrollable&&this._editMode()===Oo},_isVirtualIncellEditable:function(){return this.virtualScrollable&&this._editMode()===Bo},_isVirtualPopupEditable:function(){return this.virtualScrollable&&"popup"===this._editMode()},_hasVirtualColumns:function(){return!!(this.virtualScroll||{}).columns},_scrollVirtualWrapper:function(){var e=this,t=e.virtualScrollable;(e._isVirtualInlineEditable()||e._isVirtualIncellEditable())&&(t._isScrolledToBottom()?t._scrollWrapperToBottom():t._isScrolledToTop()&&t._scrollWrapperToTop())},_scrollVirtualWrapperOnColumnResize:function(){var e=this.virtualScrollable;e&&e._scrollWrapperOnColumnResize()},_restoreEditableState:function(){var t,r,l=this,n=l._editableState||{},a=n.model,i=l.dataSource,s=l._isVirtualInlineEditable(),d=l._isVirtualIncellEditable(),c=l._hasVirtualColumns();(s||d||c)&&a&&i._getByUid(a.uid,i.view())&&(l._editMode()===Oo?(l._shouldClearEditableState=!1,l.editRow(a),c||l._focusEditable()):l._editMode()===Bo&&(t=l.tbody.children(o(Go,a.uid)),r=e(t).children(o(qo,n.field)),r[0]&&(l._shouldClearEditableState=!1,l.editCell(r),c||l._focusEditable()))),l._shouldClearEditableState=!0},_focusEditable:function(){var e=this,t=(e._editableState||{}).field,r=e._editContainer;r&&r.length&&!mt(r[0],tt())&&e._canFocusEditable()&&(e._isVirtualInlineEditable()||e._hasVirtualColumns()?r.find(o(Wo,t)).find(io).eq(0).focus():(e._isVirtualIncellEditable()||e._hasVirtualColumns())&&r.find(io).eq(0).focus())},_canFocusEditable:function(){var e=this,t=(e._isVirtualIncellEditable()||e._isVirtualInlineEditable()||e._hasVirtualColumns())&&(Fe((e.virtualScrollable||{}).wrapper,e._editContainer)||Fe(e.content,e._editContainer));return t},_cacheEditableState:function(){var t,o,r=this,l=r._editContainer,n=l?r._modelForContainer(l):null,a=r._isVirtualInlineEditable(),i=r._isVirtualIncellEditable(),s=r._hasVirtualColumns();(a||i||s)&&n&&(r._clearEditableState(),t=e(tt()),l&&t[0]&&mt(l[0],t[0])&&(t.change(),o=Je.widgetInstance(t,Je.ui),o&&ft(o.value)&&t.is(Vo)&&(o.value(t.val()),o.trigger(Kt))),r._editMode()===Oo?r._editableState={model:n,field:t.closest("["+Je.attr(Wo)+"]").attr(Je.attr(Wo))}:r._editMode()===Bo&&(r._editableState={model:n,field:l.attr(Je.attr(qo))}))},_clearSortClasses:function(){var e=this,t=e.content||e.table,o=e.lockedContent;t&&t.find(Ht).removeClass(mo),o&&o.find(Ht).removeClass(mo)},_clearEditableState:function(){var e=this;(e.virtualScrollable||e.virtualScroll&&e._hasVirtualColumns())&&(e._editableState=null)},_destroyVirtualScrollable:function(){var e=this;e._clearEditableState(),e.virtualScrollable&&e.virtualScrollable.element&&e.virtualScrollable.destroy(),e.virtualScrollable=null},_renderNoRecordsContent:function(){var t,o=this;o.options.noRecords&&(t=o.table.parent().children("."+po),t.length&&(o.angular("cleanup",function(){return{elements:t.get()}}),t.remove()),o.dataSource&&o.dataSource.view().length||(t=e(o.noRecordsTemplate({})).insertAfter(o.table),o.angular("compile",function(){return{elements:t.get(),data:[{}]}})))},_setContentWidth:function(t){var o,r=this,l="k-grid-content-expander",n='<div class="'+l+'"></div>',a=r.resizable;r.options.scrollable&&r.wrapper.is(":visible")&&(o=r.table.parent().children("."+l),r._setContentWidthHandler=ht(r._setContentWidth,r),r.dataSource&&r.dataSource.view().length?o[0]&&(o.remove(),a&&a.unbind("resize",r._setContentWidthHandler)):(o[0]||(o=e(n).appendTo(r.table.parent()),a&&a.bind("resize",r._setContentWidthHandler)),r.thead&&(o.width(r.thead.width()),isNaN(parseFloat(t,10))||Je.scrollLeft(r.content,t))),r._applyLockedContainersWidth(),r._syncLockedContentHeight(),r.lockedHeader&&0===r.table[0].clientWidth&&(r.table[0].style.width="1px"))},_applyLockedContainersWidth:function(){if(this.options.scrollable&&this.lockedHeader){var e,t=this.thead.parent(),o=t.parent(),r=this.wrapper[0].clientWidth,l=this._groups(),n=Je.support.scrollbar(),a=this.lockedHeader.find(">table>colgroup>col:not(.k-group-col, .k-hierarchy-col)"),i=t.find(">colgroup>col:not(.k-group-col, .k-hierarchy-col)"),s=V(a),d=V(i);l>0&&(s+=rt(this.lockedHeader.find(".k-group-cell:first"))*l),s>=r&&(s=r-3*n),this.lockedHeader.add(this.lockedContent).width(s),o[0].style.width=o.parent().width()-s-2+"px",t.add(this.table).width(d),this.virtualScrollable&&!gr&&(r-=n),this.content[0].style.width=r-s-1+"px",this.lockedFooter&&this.lockedFooter.length&&(this.lockedFooter.width(s),e=this.footer.find(".k-grid-footer-wrap"),e[0].style.width=o[0].clientWidth+"px",e.children().first().width(d))}},_setContentHeight:function(){var e,t,o=this,r=o.options,l=o.wrapper.children(".k-grid-header"),n=Je.support.scrollbar(),a=(r.scrollable||{}).height;r.scrollable&&o.wrapper.is(":visible")&&(a&&""===o.content[0].style.height&&(o.content[0].style.height=a),e=o.wrapper.innerHeight(),e-=lt(l),o.pager&&o.pager.element.is(":visible")&&(e-=lt(o.pager.element)),r.groupable&&(e-=lt(o.wrapper.children(".k-grouping-header"))),r.toolbar&&(e-=lt(o.wrapper.children(".k-grid-toolbar"))),o.footerTemplate&&(e-=lt(o.wrapper.children(".k-grid-footer"))),t=function(e){var t,o;return!!e[0].style.height||(t=e.height(),e.height("auto"),o=e.height(),t!=o?(e.height(""),!0):(e.height(""),!1))},t(o.wrapper)&&(e>2*n?(o.lockedContent&&(n=o.table[0].offsetWidth>o.table.parent()[0].clientWidth?n:0,o.lockedContent.height(e-n)),o.content.height(e)):o.content.height(2*n+1)))},_averageRowHeight:function(){var e,t=this,o=t._items(t.tbody,!0).length,r=t._rowHeight;return 0===o?r:(t._rowHeight||(t._rowHeight=r=lt(t.table)/o,t._sum=r,t._measures=1),e=lt(t.table)/o,r!==e&&(t._measures++,t._sum+=e,t._rowHeight=t._sum/t._measures),r)},_dataSource:function(){var e,o=this,r=o.options,l=r.dataSource;l=ct(l)?{data:l}:l,at(l)&&(it(l,{table:o.table,fields:o.columns}),e=r.pageable,at(e)&&e.pageSize!==t&&(l.pageSize=e.pageSize)),o.dataSource&&o._refreshHandler?o.dataSource.unbind(Kt,o._refreshHandler).unbind(bt,o._progressHandler).unbind(vt,o._errorHandler).unbind($o,o._sortHandler):(o._refreshHandler=ht(o.refresh,o),o._progressHandler=ht(o._requestStart,o),o._errorHandler=ht(o._error,o),o._sortHandler=ht(o._clearSortClasses,o)),o.dataSource=Xe.create(l).bind(Kt,o._refreshHandler).bind(bt,o._progressHandler).bind(vt,o._errorHandler).bind($o,o._sortHandler)},_error:function(){this._progress(!1)},_requestStart:function(){this._progress(!0)},_modelChange:function(t){var o,r,l,n,a,i,s,d,c,u,p=this,h=p.tbody,f=t.model,g=p.tbody.find("tr["+Je.attr("uid")+"="+f.uid+"]"),m=g.hasClass("k-alt"),_=p._items(h).index(g),k=p.lockedContent;if(k&&(o=p._relatedRow(g)),g.add(o).children(".k-edit-cell").length&&!p.options.rowTemplate)g.add(o).children(":not(.k-group-cell,.k-hierarchy-cell)").each(function(){r=e(this),l=le(p.columns)[p._calculateColumnIndex(r)],l.field===t.field&&(r.hasClass("k-edit-cell")?r.addClass("k-dirty-cell"):p._displayCell(r,l,f))});else if(!g.hasClass("k-grid-edit-row")){for(i=e().add(g),k&&(n=(m?p.lockedAltRowTemplate:p.lockedRowTemplate)(f),i=i.add(o),o.replaceWith(n)),p.angular("cleanup",function(){return{elements:i.get()}}),n=(m?p.altRowTemplate:p.rowTemplate)(f),g.replaceWith(n),n=p._items(h).eq(_),u=[{dataItem:f}],k&&(g=g.add(o),o=p._relatedRow(n)[0],Te(n[0],o),n=n.add(o),u.push({dataItem:f})),p.angular("compile",function(){return{elements:n.get(),data:u}}),a=p.options.selectable,(a||p._checkBoxSelection)&&g.hasClass("k-state-selected")&&p.select(n),d=i.children(":not(.k-group-cell,.k-hierarchy-cell)"),s=n.children(":not(.k-group-cell,.k-hierarchy-cell)"),_=0,c=p.columns.length;_<c;_++)l=p.columns[_],r=s.eq(_),a&&d.eq(_).hasClass("k-state-selected")&&r.addClass("k-state-selected");p.trigger("itemChange",{item:n,data:f,ns:Ye})}},_pageable:function(){var t,o=this,r=o.options.pageable;r&&(t=o.wrapper.children("div.k-grid-pager"),t.length||(t=e('<div class="k-pager-wrap k-grid-pager"/>')),"top"===r.position?t.prependTo(o.wrapper).addClass("k-grid-pager-top"):t.appendTo(o.wrapper),o.pager&&o.pager.destroy(),o.pager="object"==typeof r&&r instanceof Je.ui.Pager?r:o.dataSource._groupPaging?new Ke(t,it({},r,{dataSource:o.dataSource})):new Je.ui.Pager(t,it({},r,{dataSource:o.dataSource})),o.pager.bind("pageChange",function(e){o.trigger("page",{page:e.index})&&e.preventDefault()}),o._togglePagerVisibility())},_footer:function(){var t,o,r,l=this,n=l.dataSource.aggregates(),a="",i=l.footerTemplate,s=l.options,d=l.footer||l.wrapper.find(".k-grid-footer");i?(a=e(l._wrapFooter(i(n))),d.length?(o=a,l.angular("cleanup",function(){return{elements:d.get()}}),d.replaceWith(o),d=l.footer=o):d=l.footer=s.scrollable?s.pageable&&"top"!==s.pageable.position?a.insertBefore(l.wrapper.children("div.k-grid-pager")):a.appendTo(l.wrapper):a.insertBefore(l.tbody),l.angular("compile",function(){return{elements:d.find("td:not(.k-group-cell, .k-hierarchy-cell)").get(),data:st(l.columns,function(e){return{column:e,aggregate:n[e.field]}})}})):d&&!l.footer&&(l.footer=d),d.length&&(s.scrollable&&(t=d.attr("tabindex",-1).children(".k-grid-footer-wrap"),l.scrollables=e(l.scrollables.filter(function(){return!e(this).is(".k-grid-footer-wrap")}).toArray()).add(t)),l._footerWidth&&d.find("table").css("width",l._footerWidth),t&&(r=Je.scrollLeft(l.content),s.scrollable!==!0&&l.virtualScroll&&l.virtualScroll.rows&&(r=Je.scrollLeft(l.wrapper.find(".k-virtual-scrollable-wrap"))),Je.scrollLeft(t,r))),l.lockedContent&&(l._appendLockedColumnFooter(),l._applyLockedContainersWidth(),l._syncLockedFooterHeight())},_wrapFooter:function(t){var o=this,r="",l=Je.support.mobileOS?0:Je.support.scrollbar();return o.options.scrollable?(r=e('<div class="k-grid-footer"><div class="k-grid-footer-wrap"><table><tbody>'+t+"</tbody></table></div></div>"),o._appendCols(r.find("table")),r.css(hr?"padding-left":"padding-right",l),r):'<tfoot class="k-grid-footer">'+t+"</tfoot>"},_columnMenu:function(){var e,o,r,l,n,a,i,s,d,c=this,u=le(c.columns),p=c.options,h=p.columnMenu,f=dt(c.columns,function(e){return e.columns!==t}).length>0,g=dt(c.columns,function(e){return e.lockable!==!1}).length>0,m=dt(c.columns,function(e){return e.stickable===!0}).length>0,_=this._isMobile,k=function(e){c.trigger(Ot,{field:e.field,container:e.container})},b=function(e){c.trigger(Nt,{field:e.field,container:e.container})},v=function(e){He(e.closest("table"),!0)},C=function(e){c.trigger(Ro,{column:e.column})},w=function(e){c.trigger(Io,{column:e.column})},y=function(e){c.trigger("sort",{sort:e.sort})?e.preventDefault():(c._clearEditableState(),c.dataSource.options.endless&&(c.dataSource.options.endless=null,c._endlessPageSize=c.dataSource.options.pageSize,c.dataSource.pageSize(c.dataSource.options.pageSize)))},S=function(e){c.trigger("filter",{filter:e.filter,field:e.field})?e.preventDefault():(c._clearEditableState(),c.dataSource.options.endless&&(c.dataSource.options.endless=null,c._endlessPageSize=c.dataSource.options.pageSize,c.dataSource.pageSize(c.dataSource.options.pageSize)))},T=p.$angular;if(h)for("boolean"==typeof h&&(h={}),c._setColumnsMediaVisibility(u),a=ae(c.thead),i=0,s=a.length;i<s;i++)o=u[i],d=a.eq(i),o.command||!o.field&&!d.attr("data-"+Je.ns+"field")||(e=d.data("kendoColumnMenu"),e&&e.destroy(),l=o.sortable!==!1&&h.sortable!==!1&&p.sortable!==!1&&it({},p.sortable,{compare:(o.sortable||{}).compare}),n=!(!p.filterable||o.filterable===!1||h.filterable===!1)&&it({pane:c.pane},p.filterable,o.filterable),o.filterable&&o.filterable.dataSource&&(n.forceUnique=!1,n.checkSource=o.filterable.dataSource),n&&(n.format=o.format),r={dataSource:c.dataSource,values:o.values,columns:h.columns,sortable:l,filterable:n,messages:h.messages,owner:c,closeCallback:v,init:k,open:b,stick:C,unstick:w,pane:c.pane,sort:y,filtering:S,filter:_?":not(.k-column-active)":"",hasLockableColumns:Q(u).length>0&&g&&!f,hasStickableColumns:m&&!f,encodeTitles:c.options.encodeTitles,componentType:h.componentType},T&&(r.$angular=T),d.kendoColumnMenu(r))},_headerCells:function(){return e(this.thead).find("th").filter(function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")})},_filterable:function(){var e,t,o,r,l,n,a,i=this,s=le(i.columns),d=function(e){i.trigger(Bt,{field:e.field,container:e.container})},c=function(e){He(e.closest("table"),!0)},u=function(e){i.trigger("filter",{filter:e.filter,field:e.field})?e.preventDefault():(i._clearEditableState(),i.dataSource.options.endless&&(i.dataSource.options.endless=null,i._endlessPageSize=i.dataSource.options.pageSize,i.dataSource.pageSize(i.dataSource.options.pageSize)))},p=function(e){i.trigger(Gt,{field:e.field,container:e.container})},h=i.options.filterable;if(h&&typeof h.mode==Mo&&h.mode.indexOf("menu")==-1&&(h=!1),h&&!i.options.columnMenu)for(t=ae(i.thead),r=0,l=t.length;r<l;r++)o=t.eq(r),s[r].filterable===!1||s[r].command||!s[r].field&&!o.attr("data-"+Je.ns+"field")||(e=o.data("kendoFilterMenu"),e&&e.destroy(),e=o.data("kendoFilterMultiCheck"),e&&e.destroy(),n=s[r].filterable,a=it({},h,n,{dataSource:i.dataSource,values:s[r].values,format:s[r].format,closeCallback:c,title:s[r].title||s[r].field,init:d,open:p,pane:i.pane,change:u}),n&&n.messages&&(a.messages=it(!0,{},h.messages,n.messages)),n&&n.dataSource&&(a.forceUnique=!1,a.checkSource=n.dataSource),n&&n.multi?o.kendoFilterMultiCheck(a):o.kendoFilterMenu(a))},_filterRow:function(){var t,o,r,l,n,a,i,s,d,c,u,p,h,f,g,m=this;if(m._hasFilterRow())for(o=m.options.$angular,r=le(m.columns),l=m.options.filterable,n=m.thead.find(".k-filter-row"),a=function(e){m.trigger("filter",{filter:e.filter,field:e.field})?e.preventDefault():(m._clearEditableState(),m.dataSource.options.endless&&(m.dataSource.options.endless=null,m._endlessPageSize=m.dataSource.options.pageSize,m.dataSource.pageSize(m.dataSource.options.pageSize)))},this._updateHeader(this.dataSource.group().length),i=0;i<r.length;i++)if(d=r[i],c=m.options.filterable.operators,u=!1,p=e("<th/>"),h=d.field,d.hidden&&p.hide(),n.append(p),h&&d.filterable!==!1){if(f=d.filterable&&d.filterable.cell||{},s=m.options.dataSource,s instanceof Xe&&(s=m.options.dataSource.options),g=it(!0,{},l.messages),d.filterable&&it(!0,g,d.filterable.messages),f.enabled===!1){p.html("&nbsp;");continue}f.dataSource&&(s=f.dataSource,u=!0),d.filterable&&d.filterable.operators&&(c=d.filterable.operators),t={column:d,dataSource:m.dataSource,suggestDataSource:s,customDataSource:u,field:h,messages:g,values:d.values,template:f.template,delay:f.delay,inputWidth:f.inputWidth,suggestionOperator:f.suggestionOperator,minLength:f.minLength,dataTextField:f.dataTextField,operator:f.operator,operators:c,showOperators:f.showOperators,change:a},o&&(t.$angular=o),e("<span/>").attr(Je.attr("field"),h).appendTo(p).kendoFilterCell(t)}else p.html("&nbsp;")},_sortable:function(){var e,t,o,r,l,n,a=this,i=le(a.columns),s=a.options.sortable,d=function(e){a.trigger("sort",{sort:e.sort})?e.preventDefault():a._clearEditableState()};if(s){for(r=ae(a.thead),l=0,n=r.length;l<n;l++)e=i[l],e.sortable!==!1&&!e.command&&e.field&&(o=r.eq(l),t=o.data("kendoColumnSorter"),t&&t.destroy(),o.attr("data-"+Je.ns+"field",e.field).kendoColumnSorter(it({},s,e.sortable,{dataSource:a.dataSource,aria:!0,filter:":not(.k-column-active)",change:d})));r=null}},_columns:function(t){var o,r,l,n=this,a=n.table,i=a.find("col"),s=n.element.find("thead tr"),c=n.options.dataSource;if(t=t.length?t:st(a.find("th:not(.k-group-cell):not(.k-hierarchy-cell)"),function(t,o){t=e(t);var r=t.attr(Je.attr("sortable")),l=t.attr(Je.attr("filterable")),n=t.attr(Je.attr("type")),a=t.attr(Je.attr("groupable")),s=t.attr(Je.attr("field")),d=t.attr(Je.attr("title")),c=t.attr(Je.attr("menu"));return s||(s=t.text().replace(/\s|[^A-z0-9]/g,"")),{field:s,type:n,title:d,sortable:"false"!==r,filterable:"false"!==l,groupable:"false"!==a,
menu:"false"!==c,template:t.attr(Je.attr("template")),width:i.eq(o).css("width")}}),o=!(n.table.find("tbody tr").length>0&&(!c||!c.transport)),n.options.scrollable){if(l=t,r=Q(t),t=J(t),r.length>0&&0===t.length)throw Error("There should be at least one non locked column");fe(n.element.find("tr:has(th):first"),l),t=r.concat(t)}s.length&&t.length&&n._updateColumnIDs(t,s.first()),n.columns=d(t,o),e.grep(le(n.columns),function(e){return e.selectable}).length&&(n._selectedIds={},n._checkBoxSelection=!0,n.wrapper.on(zo+Dt,"tbody > tr "+uo,ht(n._checkboxClick,n)),n.wrapper.on(zo+Dt,"thead > tr "+uo,ht(n._headerCheckboxClick,n))),n._foreignKeyBindings(n.columns)},_foreignKeyBindings:function(e){var t,o,r=this,l=e.length;for(o=0;o<l;o++)t=e[o],t.dataSource&&r._fetchForeignKeyValues(t)},_fetchForeignKeyValues:function(t){var o=this,r=e.Deferred();o._hasBoundForeignKey=!0,t.dataSource=Xe.create(t.dataSource),o._foreignKeyPromises||(o._foreignKeyPromises=[]),o._foreignKeyPromises.push(r),t.dataSource.fetch().then(function(){var e=t.dataSource.data();t.values=e.map(function(e){return{value:e[t.dataValueField],text:e[t.dataTextField]}}),r.resolve()})},_updateColumnIDs:function(e,t){var o,r,l;if(e.length){for(o=t.find("th:not(.k-group-cell):not(.k-hierarchy-cell)"),l=0;l<e.length;l++)r=o.eq(l).attr("id"),r&&(e[l].headerAttributes=it(e[l].headerAttributes,{id:r}));this._updateColumnIDs(oe(e),t.next())}},_headerCheckboxClick:function(t){var o=this,r=e(t.target),l=r.prop("checked");o._belongsToGrid(r)&&(l?o.select(o.items()):o.clearSelection())},_checkboxClick:function(t){var o=this,r=e(t.target).closest("tr"),l=!r.hasClass(so);o._belongsToGrid(r)&&(l?o.select(r):o._deselectCheckRows(r))},_groups:function(){var e=this.dataSource.group();return e?e.length:0},_tmpl:function(e,o,n,a){var i,s,d,c,u,p=this,h=it({},Je.Template,p.options.templateSettings),f=h.paramName,g=o.length,m={storage:{},count:0},_=p._hasDetails(),k=[],b=p._groups(),v=p.options.navigatable,C=Je.attr("field"),w="";if(!e){for(e="<tr",n&&k.push("k-alt"),k.push("k-master-row"),k.length&&(e+=' class="'+k.join(" ")+'"'),g&&(e+=" "+Je.attr("uid")+'="#='+Je.expr("uid",h.paramName)+'#"'),e+=" role='row'>",b>0&&!a&&(e+=r(b)),_&&(e+='<td class="k-hierarchy-cell" aria-expanded="false"><a class="k-icon k-i-expand" href="\\#" '+or+'="'+tr+'" tabindex="-1"></a></td>'),i=0;i<g;i++)d=o[i],s=d.template,c=typeof s,u=d.field,p._editMode()===Bo&&u&&(d.attributes=d.attributes||{},p.virtualScroll&&(d.attributes[C]=u),w=p._dirtyCellTemplate(u,f),d.attributes["class"]=d.attributes["class"]||"",d.attributes["class"].indexOf(w)<0&&(d.attributes["class"]+=w)),d.colSpan&&d.colSpan>0&&ue(d.attributes)?d.attributes=pe(d.attributes):!d.colSpan&&d.hidden&&(d.attributes=ce(d.attributes)),d.command&&(d.attributes=d.attributes||{},t!==d.attributes["class"]?d.attributes["class"]+=" k-command-cell":d.attributes["class"]="k-command-cell"),e+="<td"+l(d.attributes),v&&(e+=" aria-describedby='"+d.headerAttributes.id+"'"),d.colSpan&&(d.colSpan>1&&(e+=" "+Je.attr("virtual")),e+=" colSpan='"+d.colSpan+"'"),e+=" role='gridcell'>",e+=p._cellTmpl(d,m),e+="</td>";e+="</tr>"}return e=Je.template(e,h),m.count>0?ht(e,m.storage):e},_dirtyCellTemplate:function(e,t){var o;return e&&t?(o="["===e.charAt(0)?Je.expr(e,t+".dirtyFields"):t+".dirtyFields['"+e+"']","#= "+t+" && "+t+".dirty && "+t+".dirtyFields && "+o+" ? ' k-dirty-cell' : '' #"):""},_headerCellText:function(e){var t=this,o=it({},Je.Template,t.options.templateSettings),r=e.headerTemplate,l=typeof r,n=e.title&&(t.options.encodeTitles?Oe(e.title):e.title)||e.field||"";return l===Fo?n=Je.template(r,o)({}):l===Mo&&(n=r),n},_cellTmpl:function(e,t){var o,r,l=this,n=it({},Je.Template,l.options.templateSettings),a=e.template,i=n.paramName,s=e.field,d="",c=e.format,u=typeof a,p=e.values;if(e.command){if(ct(e.command)){for(o=0,r=e.command.length;o<r;o++)d+=e.command[o].visible?Je.format("#= {0}(data)? '{1}':'' #",e.command[o].visible,l._createButton(e.command[o]).replace(lr,"\\#").replace(/'/gi,"\\'")):l._createButton(e.command[o]).replace(lr,"\\#");return d}return l._createButton(e.command).replace(lr,"\\#")}return e.selectable?ur:(d+=l._dirtyIndicatorTemplate(s,i),u===Fo?(t.storage["tmpl"+t.count]=a,d+="#=this.tmpl"+t.count+"("+i+")#",t.count++):u===Mo?d+=a:p&&p.length&&at(p[0])&&"value"in p[0]&&s?(d+="#var v ="+Je.stringify(ge(p)).replace(lr,"\\#")+"#",d+="#var f = v[",n.useWithBlock||(d+=i+"."),d+=s+"]#",d+="${f != null ? f : ''}"):(d+=e.encoded?"#:":"#=",c&&(d+='kendo.format("'+c.replace(rr,"\\$1")+'",'),s?(s=Je.expr(s,i),d+=s+"==null?'':"+s):d+="''",c&&(d+=")"),d+="#"),d)},_dirtyIndicatorTemplate:function(e,t){var o;return e&&t?(o="["===e.charAt(0)?Je.expr(e,t+".dirtyFields"):t+".dirtyFields['"+e+"']","#= "+t+" && "+t+".dirty && "+t+".dirtyFields && "+o+" ? '<span class=\"k-dirty\"></span>' : '' #"):""},_virtualCols:function(t){var o,r,l,n=this,a=e.map(t,function(e){return e.hidden?0:parseInt(e.width,10)}),i=Je.scrollLeft(n.virtualScrollable?n.content.find(">.k-virtual-scrollable-wrap"):n.content),s=rt(n.content),d=q(t),c=[],u=0,p=0,h=0,f=0,g=0;for(f=0;f<t.length;f++){if(o=f<a.length-1?a[f+1]:0,!(g+a[f]+2*o<i)){u=1+h;break}a[f]&&h++,g+=a[f]}for(h=0,g=0,r=t.length-1;r>=0;r--){if(!(g+3*a[r]<d-s-i)){for(p=1+h,l=f;l<=r;l++)t[l].locked||(c.push(t[l]),t[l].colSpan&&delete t[l].colSpan);c[0].colSpan=u,c[c.length-1].colSpan=p;break}a[r]&&h++,g+=a[r]}return c[0].hidden&&c[0].colSpan--,n.virtualCols=c,c},_templates:function(){var t=this,o=t.options,r=t.dataSource,l=r.group(),n=t.footer||t.wrapper.find(".k-grid-footer"),a=r.aggregate(),i=le(t.columns),s=le(Q(t.columns)),d=o.scrollable?le(J(t.columns)):i,c=(t.virtualScroll||{}).columns?t._virtualCols(d):d,u=dt(v(s),function(e,t){return e.groupHeaderColumnTemplate&&0!==t}),p=dt(v(c),function(e){return e.groupHeaderColumnTemplate});if(o.scrollable&&s.length){if(o.rowTemplate||o.altRowTemplate)throw Error("Having both row template and locked columns is not supported");t.rowTemplate=t._tmpl(o.rowTemplate,c,!1,!0),t.altRowTemplate=t._tmpl(o.altRowTemplate||o.rowTemplate,c,!0,!0),t.lockedRowTemplate=t._tmpl(o.rowTemplate,s),t.lockedAltRowTemplate=t._tmpl(o.altRowTemplate||o.rowTemplate,s,!0)}else t.rowTemplate=t._tmpl(o.rowTemplate,c),t.altRowTemplate=t._tmpl(o.altRowTemplate||o.rowTemplate,c,!0);t._hasDetails()&&(t.detailTemplate=t._detailTmpl(o.detailTemplate||"")),(t._group&&!gt(a)||!gt(a)&&!n.length||dt(i,function(e){return e.footerTemplate}).length)&&(t.footerTemplate=t._footerTmpl(i,a,"footerTemplate","k-footer-template")),l&&dt(i,function(e){return e.groupFooterTemplate}).length&&(a=e.map(l,function(e){return e.aggregates}),t.groupFooterTemplate=t._footerTmpl(c,a,"groupFooterTemplate","k-group-footer",s.length),o.scrollable&&s.length&&(t.lockedGroupFooterTemplate=t._footerTmpl(s,a,"groupFooterTemplate","k-group-footer"))),l&&(u.length||p.length)?(a=e.map(l,function(e){return e.aggregates}),t.groupHeaderColumnTemplate=t._groupHeaderTmpl(v(c),a,"groupHeaderColumnTemplate","k-grouping-row",s.length,p),o.scrollable&&s.length&&(t.lockedGroupHeaderColumnTemplate=t._groupHeaderTmpl(v(s),a,"groupHeaderColumnTemplate","k-grouping-row",0,u))):(t.groupHeaderColumnTemplate=null,t.lockedGroupHeaderColumnTemplate=null),t.options.noRecords&&(t.noRecordsTemplate=t._noRecordsTmpl())},_noRecordsTmpl:function(){var t,o,r,l='<div class="{0}">{1}</div>',n='<div class="k-grid-norecords-template"{1}>{0}</div>',a=this.options.scrollable&&!this.wrapper[0].style.height?' style="margin:0 auto;position:static;"':"",i={storage:{},count:0},s=e.extend({},Je.Template,this.options.templateSettings),d=s.paramName,c="";return t=this.options.noRecords.template?this.options.noRecords.template:Je.format(n,this.options.messages.noRecords,a),o=typeof t,"function"===o?(i.storage["tmpl"+i.count]=t,c+="#=this.tmpl"+i.count+"("+d+")#",i.count++):"string"===o&&(c+=t),r=Je.template(Je.format(l,po,c),s),i.count>0&&(r=e.proxy(r,i.storage)),r},_footerTmpl:function(e,t,o,n,a){var i,s,d,c,u,p=this,h=it({},Je.Template,p.options.templateSettings),f=h.paramName,g="",m={},_=0,k={},b=p._groups(),v=p.dataSource._emptyAggregates(t);for(g+='<tr class="'+n+'">',b>0&&!a&&(g+=r(b)),p._hasDetails()&&(g+='<td class="k-hierarchy-cell">&nbsp;</td>'),i=0,s=e.length;i<s;i++)u=e[i],d=u[o],c=typeof d,g+="<td"+l(u.footerAttributes)+">",d?(c!==Fo&&(k=v[u.field]?it({},h,{paramName:f+"['"+u.field+"']"}):{},d=Je.template(d,k)),m["tmpl"+_]=d,g+="#=this.tmpl"+_+"("+f+")#",_++):g+="&nbsp;",g+="</td>";return g+="</tr>",g=Je.template(g,h),_>0?ht(g,m):g},_groupHeaderTmpl:function(e,o,r,l,n,a){var i,s,d,c,u,p,h=this,f=it({},Je.Template,h.options.templateSettings),g=f.paramName,m="",_={},k=0,b={},v=h.dataSource._emptyAggregates(o),C=a.length?ut(a[0],e):-1;if(m+='<tr role="row" class="'+l+'">',n||(m+='# for (var i = 0; i < data.groupCells; i++) { #<td class="k-group-cell">&nbsp;</td># } #'),h._hasDetails()&&(m+='<td class="k-hierarchy-cell">&nbsp;</td>'),C<0)return m+=n?"":Pe(e.length),t;if(C<No&&a.length<=1&&!n)return m+=n?"":Pe(e.length),Je.template(m,f);for(C<No?(C=n?0:1,m+=n?"":Pe(C)):m+=n?We(C):Pe(C),i=C,s=e.length;i<s;i++)u=e[i],d=u[r],c=typeof d,u.sticky?(p=u.groupHeaderColumnTemplateClass||"",p||(p=u.groupHeaderColumnTemplateClass="group-header-column-template-"+Je.guid()),m+="<td class='"+bo+" "+p+"' style='"+(u.stickyStyle||"")+"'>"):m+="<td>",d?(c!==Fo&&(b=v[u.field]?it({},f,{paramName:g+"['"+u.field+"']"}):{},d=Je.template(d,b)),_["tmpl"+k]=d,m+="#=this.tmpl"+k+"("+g+")#",k++):m+="&nbsp;",m+="</td>";return m+="</tr>",m=Je.template(m,f),k>0?ht(m,_):m},_detailTmpl:function(e){var t=this,o="",l=it({},Je.Template,t.options.templateSettings),n=l.paramName,a={},i=0,s=t._groups(),d=v(le(t.columns)).length,c=typeof e;return o+='<tr class="k-detail-row">',s>0&&(o+=r(s)),o+='<td class="k-hierarchy-cell"></td><td class="k-detail-cell"'+(d?' colspan="'+d+'"':"")+">",c===Fo?(a["tmpl"+i]=e,o+="#=this.tmpl"+i+"("+n+")#",i++):o+=e,o+="</td></tr>",o=Je.template(o,l),i>0?ht(o,a):o},_hasDetails:function(){var e=this;return null!==e.options.detailTemplate||(e._events[Vt]||[]).length},_hasFilterRow:function(){var t=this.options.filterable,o=t&&typeof t.mode==Mo&&t.mode.indexOf("row")!=-1,r=this.columns,l=e.grep(r,function(e){return e.filterable===!1});return r.length&&l.length==r.length&&(o=!1),o},_details:function(){var t=this;if(t.options.scrollable&&t._hasDetails()&&Q(t.columns).length)throw Error("Having both detail template and locked columns is not supported");t.table.on(zo+Dt,".k-hierarchy-cell .k-i-expand, .k-hierarchy-cell .k-i-collapse",function(o){var r=e(this);return t._toggleDetails(r),o.preventDefault(),!1})},_toggleDetails:function(t,o){var r,l,n=this,a=t.closest("td.k-hierarchy-cell"),i=t.hasClass("k-i-expand"),s=t.closest("tr.k-master-row"),d=n.detailTemplate,c=n._hasDetails(),u=i?er:tr,p=!!i;t.toggleClass("k-i-expand",!i).toggleClass("k-i-collapse",i).attr(or,u),a.attr("aria-expanded",p),r=s.next(),c&&!r.hasClass("k-detail-row")&&(l=n.dataItem(s),r=e(d(l)).addClass(s.hasClass("k-alt")?"k-alt":"").insertAfter(s),n.angular("compile",function(){return{elements:r.get(),data:[{dataItem:l}]}}),n.trigger(Vt,{masterRow:s,detailRow:r,data:l,detailCell:r.find(".k-detail-cell")})),n.trigger(i?Yt:Xt,{masterRow:s,detailRow:r}),o?Be(r,i):r.toggle(i)},dataItem:function(t){if(t=e(t)[0],!t)return null;var o,r,l=this.tbody.children(),n=/k-grouping-row|k-detail-row|k-group-footer/,a=t.sectionRowIndex;for(r=a,o=0;o<a;o++)n.test(l[o].className)&&r--;return this._data[r]},expandRow:function(t,o){var r=e(t).find("> td .k-i-expand");r.length&&this._toggleDetails(r,o)},collapseRow:function(t,o){var r=e(t).find("> td .k-i-collapse");r.length&&this._toggleDetails(r,o)},_createHeaderCells:function(e,o){var r,n,a,i,s,d,c,u=this,p="",h=u.options.messages,f=le(u.columns),g=u.dataSource.group();for(r=0,i=e.length;r<i;r++)n=e[r].column||e[r],a=u._headerCellText(n),s=n.title,d="",c=ut(n,f),n.selectable?(p+="<th scope='col'"+l(n.headerAttributes),o&&!e[r].colSpan&&(p+=" rowspan='"+o+"'"),c>-1&&(p+=Je.attr("index")+"='"+c+"'"),a=n.headerTemplate?a:Je.template(pr)({}),p+=">"+a+"</th>"):n.command?(p+="<th scope='col'"+l(n.headerAttributes),o&&!e[r].colSpan&&(p+=" rowspan='"+o+"'"),c>-1&&(p+=Je.attr("index")+"='"+c+"'"),p+=">"+a+"</th>"):(n.field&&(d=Je.attr("field")+"='"+n.field+"' "),p+="<th scope='col' role='columnheader' "+d,p+=" aria-haspopup='true'",o&&!e[r].colSpan&&(p+=" rowspan='"+o+"'"),e[r].colSpan>1?(p+='colspan="'+(e[r].colSpan-W(n.columns))+'" ',p+=Je.attr("colspan")+"='"+e[r].colSpan+"'"):1===e[r].colSpan&&(p+=Je.attr("colspan")+"='"+e[r].colSpan+"'"),s&&(s=s&&(u.options.encodeTitles?Oe(s,!0):s),p+=Je.attr("title")+'="'+s+'" '),n.groupable!==t&&(p+=Je.attr("groupable")+"='"+n.groupable+"' "),Re(u,n)&&(p+="aria-label='"+(s||n.field)+" ",p+=Ie(g,n.field)?h.ungroupHeader:h.groupHeader,p+="' "),n.aggregates&&n.aggregates.length&&(p+=Je.attr("aggregates")+"='"+n.aggregates+"'"),c>-1&&(p+=Je.attr("index")+"='"+c+"'"),p+=l(n.headerAttributes),p+=">"+a+"</th>");return p},_appendLockedColumnContent:function(){var t,o,r,l,n,a=this.columns,i=this.table.find("colgroup"),s=i.find(Ht),d=e(),c=0,u=0;for(t=0,o=a.length;t<o;t++)if(a[t].locked)if(b(a[t])){for(l=1,a[t].columns&&(l=le(a[t].columns).length-W(a[t].columns)),l=l||1,n=0;n<l;n++)d=d.add(s.eq(t+u+n-c));u+=l-1}else c++;r=e('<div class="k-grid-content-locked"><table><colgroup></colgroup><tbody></tbody></table></div>'),i.detach(),r.find("colgroup").append(d),i.insertBefore(this.table.find("tbody")),this.lockedContent=r.insertBefore(this.content),this.lockedTable=r.children("table")},_appendLockedColumnFooter:function(){var t,o,r=this,l=r.footer,n=l.find(".k-footer-template>td"),a=l.find(".k-grid-footer-wrap>table>colgroup>col"),i=e('<div class="k-grid-footer-locked"><table><colgroup></colgroup><tbody><tr class="k-footer-template"></tr></tbody></table></div>'),s=r._groups(),d=e(),c=e();for(d=d.add(n.filter(".k-group-cell")),t=0,o=le(Q(r.columns)).length;t<o;t++)d=d.add(n.eq(t+s));for(c=c.add(a.filter(".k-group-col")),t=0,o=v(le(ee(r.columns))).length;t<o;t++)c=c.add(a.eq(t+s));d.appendTo(i.find("tr")),c.appendTo(i.find("colgroup")),r.lockedFooter=i.prependTo(l)},_appendLockedColumnHeader:function(t){var o,r,l,n,a,i,s,d,c,u,p,h=this,f=this.columns,g=[],m=0,_=e(),k=h._hasFilterRow(),v=0,C=e(),w=0,S=e(),T=h.thead.prev().find(Ht),x=h.thead.find("tr:first .k-header:not(.k-group-cell,.k-hierarchy-cell)"),H=h.thead.find(".k-filter-row").find("th:not(.k-group-cell,.k-hierarchy-cell)"),R=0;for(o=0,l=f.length;o<l;o++){if(f[o].locked){if(s=x.eq(o),w=le(f[o].columns||[]).length,b(f[o])){for(d=null,f[o].columns&&(d=w-W(f[o].columns)),d=d||1,c=0;c<d;c++)_=_.add(T.eq(o+R+c-m));R+=d-1}for(N([f[o]],se(s),g,0,0),w=w||1,u=0;u<w;u++)C=C.add(H.eq(v+u));v+=w}f[o].columns&&(m+=W(f[o].columns)),b(f[o])||m++}if(g.length){for(r='<div class="k-grid-header-locked" style="width:1px"><table><colgroup></colgroup><thead>',r+=Array(g.length+1).join("<tr></tr>"),r+=(k?'<tr class="k-filter-row"></tr>':"")+"</thead></table></div>",i=e(r),T=i.find("colgroup"),T.append(h.thead.prev().find("col.k-group-col").add(_)),n=i.find("thead tr:not(.k-filter-row)"),o=0,l=g.length;o<l;o++)S=y(g[o]),n.eq(o).append(h.thead.find("tr:eq("+o+") .k-group-cell").add(S));return p=G(this.thead),g.length<p&&B(i,p-g.length),a=i.find(".k-filter-row"),a.append(h.thead.find(".k-filter-row .k-group-cell").add(C)),this.lockedHeader=i.prependTo(t),this.thead.find(".k-group-cell").remove(),!0}return!1},_removeLockedContainers:function(){var e=this.lockedHeader.add(this.lockedContent).add(this.lockedFooter);Je.destroy(e),e.off(Dt).remove(),this.lockedHeader=this.lockedContent=this.lockedFooter=null,this.selectable=null},_thead:function(){var t,o,r,l,n,a,i,s,d,c=this,u=c.columns,p=c._hasDetails()&&u.length,h=c._hasFilterRow(),f="",g=c.table.find(">thead"),m=c.element.find("thead:first").length>0,_=c.options.messages.expandCollapseColumnHeader;if(g.length||(g=e("<thead/>").insertBefore(c.tbody)),c.lockedHeader&&c.thead?(o=c.thead.find("tr:has(th):not(.k-filter-row)").html(""),o.remove(),o=e(),c._removeLockedContainers()):o=c.element.find(m?"thead:first tr:has(th):not(.k-filter-row)":"tr:has(th):first"),o.length){for(t=0;t<u.length;t++)l=ut(u[t],le(u)),n=ae(o.parent()).filter("th:not(.k-group-cell):not(.k-hierarchy-cell)").eq(l),u[t].hidden&&l>=0&&(n[0].style.display="none");c._updateHeadersAttr(oe(u))}else if(o=g.children().first(),!o.length){for(r=[{rowSpan:1,cells:[],index:0}],c._prepareColumns(r,u),t=0;t<r.length;t++)f+="<tr>",p&&(f+='<th class="k-hierarchy-cell" scope="col">'+_+"</th>"),f+=c._createHeaderCells(r[t].cells,r[t].rowSpan),f+="</tr>";o=e(f)}h&&(a=e("<tr/>"),a.addClass("k-filter-row"),(p||o.find(".k-hierarchy-cell").length)&&a.prepend('<th class="k-hierarchy-cell" scope="col">&nbsp;</th>'),i=(c.thead||g).find(".k-filter-row"),i.length&&(Je.destroy(i),i.remove()),g.append(a)),o.children().length?p&&!o.find(".k-hierarchy-cell")[0]&&o.prepend('<th class="k-hierarchy-cell" scope="col">'+(_?_:"&nbsp;")+"</th>"):(f="",p&&(f+='<th class="k-hierarchy-cell" scope="col">&nbsp;</th>'),f+=c._createHeaderCells(u),o.html(f)),o.attr("role","row").find("th").addClass("k-header"),c.options.scrollable||g.addClass("k-grid-header"),o.find("script").remove().end().prependTo(g),c.thead&&c._destroyColumnAttachments(),this.angular("cleanup",function(){return{elements:g.find("th"+Tt).get()}}),this.angular("compile",function(){return{elements:g.find(zt).get(),data:st(u,function(e){return{column:e}})}}),c.thead=g.attr("role","rowgroup"),c._sortable(),c._filterable(),c._filterRow(),c._scrollable(),c._columnMenu(),d=this.options.scrollable&&Q(this.columns).length,d&&(s=c._appendLockedColumnHeader(c.thead.closest(".k-grid-header")),c._appendLockedColumnContent(),c.lockedContent.bind("DOMMouseScroll"+Dt+" mousewheel"+Dt,ht(c._wheelScroll,c)),Je.support.touch&&(c._lockedContentUserEvents=new Je.UserEvents(c.lockedContent,{move:function(e){c.content.scrollTop(c.content.scrollTop()+-e.y.delta),e.preventDefault()}})),c._updateLockedCols()),c._updateCols(),c._updateColumnCellIndex(),c._updateFirstColumnClass(),c._resizable(),c._draggable(),c._reorderable(),c._updateHeader(c._groups()),c._updateStickyColumns(),d&&(s&&c._syncLockedHeaderHeight(),c._applyLockedContainersWidth()),c.groupable&&c._attachGroupable()},_retrieveFirstColumn:function(t,o){var r,l=e();if(o.length&&t[0]){for(r=t[0];r.columns&&r.columns.length;)r=r.columns[0],o=o.filter(":not(:first())");l=l.add(o)}return l},_updateFirstColumnClass:function(){var t,o,r=this,l=r.columns||[],n=r._hasDetails()&&l.length;n||r._groups()||(t=r.thead.find(">tr:not(.k-filter-row):not(:first)"),l=J(l),o=r._retrieveFirstColumn(l,t),r._isLocked()&&(t=r.lockedHeader.find("thead>tr:not(.k-filter-row):not(:first)"),l=Q(r.columns),o=o.add(r._retrieveFirstColumn(l,t))),o.each(function(){var t=e(this).find("th");t.removeClass("k-first"),t.eq(0).addClass("k-first")}))},_prepareColumns:function(e,t,o,r){var l,n,a=r||e[e.length-1],i=e[a.index+1],s=0;for(l=0;l<t.length;l++)n={column:t[l],colSpan:0},a.cells.push(n),t[l].columns&&t[l].columns.length&&(i||(i={rowSpan:0,cells:[],index:e.length},e.push(i)),n.colSpan=t[l].columns.length,this._prepareColumns(e,t[l].columns,n,i),s+=n.colSpan-1,a.rowSpan=e.length-a.index);o&&(o.colSpan+=s)},_wheelScroll:function(e){var t,o,r;e.ctrlKey||(t=this.content,this.virtualScroll&&this.virtualScroll.rows&&(t=this.virtualScrollable.verticalScrollbar),o=t.scrollTop(),r=Je.wheelDeltaY(e),r&&(t[0].scrollHeight>t[0].clientHeight&&(t[0].scrollTop<t[0].scrollHeight-t[0].clientHeight&&r<0||t[0].scrollTop>0&&r>0)&&e.preventDefault(),t.scrollTop(o+-r)))},_isLocked:function(){return null!=this.lockedHeader},_updateHeaderCols:function(){var e=this.thead.parent().add(this.table);this._isLocked()?he(e,te(Z(this.columns)),this._hasDetails(),0):he(e,te(v(this.columns)),this._hasDetails(),0)},_updateColumnSorters:function(){var e,t,o,r,l,n=this,a=ae(n.thead),i=le(n.columns);if(n.options.sortable)for(r=0,l=a.length;r<l;r++)e=i[r],e.sortable!==!1&&!e.command&&e.field&&(t=a.eq(r),o=t.data("kendoColumnSorter"),o&&o.refresh())},_updateHeadersAttr:function(e){var t,o,r;if(e.length){for(t=this,o=0;o<e.length;o++)e[o].headerAttributes&&(r=t.element.find("[id='"+e[o].headerAttributes.id+"']"),r.attr("headers",e[o].headerAttributes.headers));t._updateHeadersAttr(oe(e))}},_updateCols:function(e){e=e||this.thead.parent().add(this.table),this._appendCols(e,this._isLocked())},_updateLockedCols:function(e){this._isLocked()&&(e=e||this.lockedHeader.find("table").add(this.lockedTable),he(e,te(ee(this.columns)),this._hasDetails(),this._groups()))},_appendCols:function(e,t){t?he(e,te(Z(this.columns)),this._hasDetails(),0):he(e,te(v(this.columns)),this._hasDetails(),this._groups())},_autoColumns:function(e){if(e&&e.toJSON){var t,o,r=this;e=e.toJSON(),o=!(r.table.find("tbody tr").length>0&&(!r.dataSource||!r.dataSource.transport));for(t in e)r.columns.push({field:t,encoded:o,headerAttributes:{id:Je.guid()}});r._thead(),r._templates()}},_rowsHtml:function(e,t){var o,r,l=this,n="",a=t.rowTemplate,i=t.altRowTemplate;for(o=0,r=e.length;o<r;o++)l._skipRerenderItemsCount>0?l._skipRerenderItemsCount--:n+=o%2?i(e[o]):a(e[o]),l._data.push(e[o]);return n},_groupData:function(e,t,o){var r,l=this,n=l._groupAggregatesDefaultObject||{},a=e.items,i=it({},n,e.aggregates),s=it({},{field:e.field,value:e.value,items:a,aggregates:i},e.aggregates[o?o.field:e.field]),d={};if(!t)for(r in i)d[r]=it({},i[r],{group:{field:e.field,value:e.value,items:a}});return it({},d,s)},_removeGroupIfEmpty:function(e){var t,o,r,l=this,n=l.dataSource._group.length;for(r=0;r<n;r++)e=e.prev(),t=+e.attr("data-group-item-count"),o=+e.attr("data-sub-group-count"),1!=t&&1!=o||e.hide()},_groupRowHtml:function(e,t,o,r,l,n,a){var i,s,d,c=this,u="",p=e.field,h=dt(le(c.columns),function(e){return e.field==p})[0]||{},f=v(c.columns)[0],g=f?f.groupHeaderColumnTemplate:null,m=h.groupHeaderTemplate?h.groupHeaderTemplate:g,_=(h.title&&(c.options.encodeTitles?Oe(h.title,!0):h.title)||p)+": "+me(e.value,h.format,h.values,h.encoded),k=e.currentItems||e.items,b=c._groups(),C=l.groupFooterTemplate,w=l.groupHeaderColumnTemplate,y=!c.dataSource._isGroupPaged()||c.dataSource._groupsState[e.uid];if(c.options.editable&&e.items&&e.items[0]&&e.items[0].isNew&&e.items[0].isNew()&&(y=!0),(l.groupFooterTemplate||l.groupHeaderColumnTemplate||h.groupHeaderTemplate)&&(d=c._groupData(e,!1,!(h.groupHeaderTemplate||!v(c.columns)[0].groupHeaderColumnTemplate)&&v(c.columns)[0])),m&&!n&&(_=typeof m===Fo?m(d):Je.template(m)(d)),c._skipRerenderItemsCount?r(t,o,_,y,e.uid,c.dataSource._isGroupPaged()):w?e.excludeHeader?e.excludeHeader=!1:u+=w(it({},d,{groupCells:o,colspan:b-o,text:_})):e.excludeHeader?e.excludeHeader=!1:u+=r(t,o,_,y,e.uid,c.dataSource._isGroupPaged()),y)if(e.hasSubgroups)for(i=0,s=k.length;i<s;i++)u+=c._groupRowHtml(k[i],n?t:t-1,o+1,r,l,n,a&&i===k.length-1);else u+=c._rowsHtml(k,l);return C&&(a?ut(e.value,c._skippedGroups)||c._skippedGroups.push(e.value):(c._skippedGroups.length&&c._skippedGroups[0]===e.value&&c._skippedGroups.shift(),c._skipRerenderItemsCount||(u+=C(d)))),u},collapseGroup:function(o){var r,l,n,a,i,s,d,c,u,p,h=this,f=o,g=this.options.groupable,m=g.showFooter,_=m?0:1,k=e();if(o=e(o),r=o.find(".k-group-cell").length,this.dataSource._isGroupPaged())return s=o.attr("data-group-uid"),d=h.dataSource._getGroupByUid(s),c=h.dataSource._calculateGroupsTotal([d],!0),h.dataSource._groupsState[s]=!1,u=h.dataSource._calculateGroupsTotal([d],!0),h.dataSource._serverGroupsTotal-=c-u,h._progress(!0),h.dataSource.range(h.dataSource._currentRangeStart,h.dataSource.take(),function(){h._progress(!1)},"collapseGroup"),t;for(this._isLocked()&&(o.closest("div").hasClass("k-grid-content-locked")?k=this.tbody.children("tr:eq("+o.index()+")").nextAll("tr"):(k=o.nextAll("tr"),o=this.lockedTable.find(">tbody>tr:eq("+o.index()+")"))),o.find(".k-i-collapse").addClass("k-i-expand").removeClass("k-i-collapse"),o.find("td[aria-expanded='true']:first").attr("aria-expanded",!1).find("a").attr(or,tr),o=o.nextAll("tr"),p=[],n=0,a=o.length;n<a&&(i=o.eq(n),l=i.find(".k-group-cell").length,i.hasClass("k-grouping-row")?_++:i.hasClass("k-group-footer")&&_--,!(l<=r||i.hasClass("k-group-footer")&&_<0));n++)k.length&&p.push(k[n]),p.push(i[0]);e(p).hide(),this.options.scrollable.endless&&this.content&&(clearTimeout(h._collapseGroupsTimeOut),h._collapseGroupsTimeOut=setTimeout(function(){h.content.scroll(),h._groupToCollapse=f}))},expandGroup:function(o){var r,l,n,a,i,s,d,c,u,p,h,f,g,m,_;if(o=e(o),r=this,l=r.options.groupable.showFooter,s=e(),u=[],p=1,n=o.find(".k-group-cell").length,this.dataSource._isGroupPaged())return h=o.attr("data-group-uid"),f=r.dataSource._getGroupByUid(h),g=r.dataSource._calculateGroupsTotal([f],!0),r.dataSource._groupsState[h]=!0,f.items&&f.items.length&&(m=r.dataSource._calculateGroupsTotal([f],!0),r.dataSource._serverGroupsTotal+=m-g),r._progress(!0),r.dataSource.range(r.dataSource._currentRangeStart,r.dataSource.take(),function(){r._progress(!1)},"expandGroup"),t;for(this._isLocked()&&(o.closest("div").hasClass("k-grid-content-locked")?s=this.tbody.children("tr:eq("+o.index()+")").nextAll("tr"):(s=o.nextAll("tr"),o=this.lockedTable.find(">tbody>tr:eq("+o.index()+")"))),o.find(".k-i-expand").addClass("k-i-collapse").removeClass("k-i-expand"),o.find("td[aria-expanded='false']:first").attr("aria-expanded",!0).find("a").attr(or,er),o=o.nextAll("tr"),d=0,c=o.length;d<c&&(a=o.eq(d),i=a.find(".k-group-cell").length,!(i<=n));d++)i!=n+1||a.hasClass("k-detail-row")||(a.show(),s.eq(d).show(),a.hasClass("k-grouping-row")&&a.find(".k-icon").hasClass("k-i-collapse")&&r.expandGroup(a),a.hasClass("k-master-row")&&a.find(".k-icon").hasClass("k-i-collapse")&&(a.next().show(),s.eq(d+1).show())),a.hasClass("k-grouping-row")&&(l&&u.push(a.is(":visible")),p++),a.hasClass("k-group-footer")&&(l&&(_=u.pop(),a.toggle(_),s.eq(d).toggle(_)),1==p?(a.show(),s.eq(d).show()):p--);0===n&&r.options.scrollable.endless&&this._isLocked()&&r._syncLockedContentHeight()},_updateHeader:function(t){var o=this,r=o._isLocked()?o.lockedHeader.find("thead"):o.thead,l=r.find("tr.k-filter-row").find("th.k-group-cell").length,n=r.find("tr:first").find("th.k-group-cell").length,a=r.children("tr:not(:first)").filter(function(){return!e(this).children(":visible").length});t>n?(e(Array(t-n+1).join('<th class="k-group-cell k-header" scope="col">'+o.options.messages.expandCollapseColumnHeader+"</th>")).prependTo(r.children("tr:not(.k-filter-row)")),o.element.is(":visible")&&a.find("th.k-group-cell").hide()):t<n&&r.find("tr").each(function(){e(this).find("th.k-group-cell").filter(":eq("+t+"),:gt("+t+")").remove()}),t>l&&e(Array(t-l+1).join('<th class="k-group-cell k-header" scope="col">&nbsp;</th>')).prependTo(r.find(".k-filter-row"))},_firstDataItem:function(e,t){return e&&t&&(e=e.hasSubgroups?this._firstDataItem(e.items[0],t):e.items[0]),e},_updateTablesWidth:function(){var t,o=this;o._isLocked()&&(t=e(">.k-grid-footer>.k-grid-footer-wrap>table",o.wrapper).add(o.thead.parent()).add(o.table),o._footerWidth=ye(t.eq(0)),t.width(o._footerWidth),t=e(">.k-grid-footer>.k-grid-footer-locked>table",o.wrapper).add(o.lockedHeader.find(">table")).add(o.lockedTable),t.width(ye(t.eq(0))))},hideColumn:function(o){var r,l,n,a,s,d,c,u,p,h,f,g=this,m=0,k=g.footer||g.wrapper.find(".k-grid-footer"),C=g.virtualScroll||{},w=g.columns,y=g.lockedHeader?ae(g.lockedHeader.find(">table>thead")).filter(_).length:0,S=dt(le(g.columns),function(e){return e.groupHeaderColumnTemplate});if(o="number"==typeof o?w[o]:at(o)?dt(P(w),function(e){return e===o})[0]:dt(P(w),function(e){return e.field===o})[0],o&&b(o)){if(h=g._columnVisibilitySetter(o),o.columns&&o.columns.length){for(d=L(o,w),h(o,!1),_e(i(e(">table>thead",g.lockedHeader),g.thead,">tr:eq("+d.row+")>th"),d.cell,!1),n=0;n<o.columns.length;n++)this.hideColumn(o.columns[n]);return g.trigger(jt,{column:o}),t}if(p=ut(o,v(le(w))),h(o,!1),g._setParentsVisibility(o,!1),g._templates(),g._updateCols(),g._updateLockedCols(),f=g.thead,c=p,g.lockedHeader&&y>p?f=g.lockedHeader.find(">table>thead"):c-=y,r=ae(f).filter(_).eq(c),r[0].style.display="none",_e(i(e(">table>thead",g.lockedHeader),g.thead,">tr.k-filter-row>th"),p,!1),k[0]&&(g._updateCols(k.find(">.k-grid-footer-wrap>table")),g._updateLockedCols(k.find(">.k-grid-footer-locked>table")),_e(k.find(".k-footer-template>td"),p,!1)),C.columns&&!o.locked)return g._updateContentWidth(),g.trigger(jt,{column:o}),t;if(g.lockedTable&&y>p?ke(g.lockedTable.find(">tbody>tr"),p):ke(g.tbody.children(),p-y),g.lockedTable)g._updateTablesWidth(),g._applyLockedContainersWidth(),g._syncLockedContentHeight(),g._syncLockedHeaderHeight(),g._syncLockedFooterHeight();else{for(a=g.thead.prev().find("col"),n=0,u=a.length;n<u;n+=1)if(s=a[n].style.width,a[n].className.indexOf("k-hierarchy-col")>-1)m+=rt(a[n]);else if(a[n].className.indexOf("k-group-col")>-1)m+=rt(a[n]);else{if(!s||s.indexOf("%")!=-1){m=0;break}m+=parseInt(s,10)}l=e(">.k-grid-header table:first,>.k-grid-footer table:first",g.wrapper).add(g.table),g._footerWidth=null,m&&(l.each(function(){this.style.width=m+"px"}),g._footerWidth=m,g._setContentWidth())}g._updateFirstColumnClass(),g._updateStickyColumns(),S.length>0&&g._renderGroupRows(),g.trigger(jt,{column:o})}},_setParentsVisibility:function(t,o){var r,l,n,a,s,d=this,c=d.columns,p=[],h=d._columnVisibilitySetter(t),f=o?function(e){return v(e.columns).length&&e.hidden}:function(e){return!v(e.columns).length&&!e.hidden};if(u(t,c,p)&&p.length)for(r=p.length-1;r>=0;r--)l=p[r],n=z(l,c),a=i(e(">table>thead",this.lockedHeader),this.thead,">tr:eq("+n.row+")>th:not(.k-group-cell):not(.k-hierarchy-cell)").eq(n.cell),f(l)&&(h(l,o),a[0].style.display=o?"":"none"),a.filter("["+Je.attr("colspan")+"]").length&&(s=parseInt(a.attr(Je.attr("colspan")),10),a[0].colSpan=s-W(l.columns)||1)},_updateContentWidth:function(){var e=this,t=e.table.add(e.thead.parent());t.css({width:q(te(Z(e.columns)))}),e.refresh()},showColumn:function(o){var r,l,n,a,s,d,c,u,p,h,f,g,m,_,k=this,v=k.columns,C=k.virtualScroll||{},w=k.footer||k.wrapper.find(".k-grid-footer"),y=k.lockedHeader?ae(k.lockedHeader.find(">table>thead")).length:0,S=dt(le(k.columns),function(e){return e.groupHeaderColumnTemplate});if("number"==typeof o?(h=o,o=v[o]):at(o)?e.each(P(v),function(e,t){if(t===o)return o=t,h=e,!1}):e.each(P(v),function(e,t){if(t.field===o)return o=t,h=e,!1}),o&&!b(o)){if(m=k._columnVisibilitySetter(o),o.columns&&o.columns.length){for(c=z(o,v),f=P(k.options.columns)[h],m(o,!0),_e(i(e(">table>thead",k.lockedHeader),k.thead,">tr:eq("+c.row+")>th"),c.cell,!0),r=0;r<o.columns.length;r++)f.columns[r].hidden||this.showColumn(o.columns[r]);return k.trigger($t,{column:o}),t}if(g=ut(o,le(v)),m(o,!0),k._setParentsVisibility(o,!0),k._templates(),k._updateCols(),k._updateLockedCols(),_=k.thead,d=g,k.lockedHeader&&y>g?_=k.lockedHeader.find(">table>thead"):d-=y,n=ae(_).eq(d),n[0].style.display="",_e(i(e(">table>thead",k.lockedHeader),k.thead,">tr.k-filter-row>th"),g,!0),w[0]&&(k._updateCols(w.find(">.k-grid-footer-wrap>table")),k._updateLockedCols(w.find(">.k-grid-footer-locked>table")),_e(w.find(".k-footer-template>td"),g,!0)),C.columns&&!o.locked)return k._updateContentWidth(),k.trigger($t,{column:o}),t;if(k.lockedTable&&y>g?Ce(k.lockedTable.find(">tbody>tr"),g):Ce(k.tbody.children(),g-y),k.lockedTable)k._updateTablesWidth(),k._applyLockedContainersWidth(),k._syncLockedContentHeight(),k._syncLockedHeaderHeight();else if(a=e(">.k-grid-header table:first,>.k-grid-footer table:first",k.wrapper).add(k.table),o.width){for(s=0,p=k.thead.prev().find("col"),r=0,l=p.length;r<l;r+=1)if(u=p[r].style.width,p[r].className.indexOf("k-hierarchy-col")>-1)s+=rt(p[r]);else if(p[r].className.indexOf("k-group-col")>-1)s+=rt(p[r]);else{if(u.indexOf("%")>-1){s=0;break}s+=parseInt(u,10)}k._footerWidth=null,s&&(a.each(function(){this.style.width=s+"px"}),k._footerWidth=s,k._setContentWidth())}else a.width("");k._updateFirstColumnClass(),k._updateStickyColumns(),S.length>0&&k._renderGroupRows(),
k.trigger($t,{column:o})}},_columnVisibilitySetter:function(e){var t=e||{};return w(t.media)?p:f},_buildSkeleton:function(){var e,t,o,r=this.virtualCols?this.virtualCols:te(this.columns),l=this.dataSource.pageSize()||this.dataSource.total(),n="";for(this._hasVirtualColumns()&&(e=parseInt(this.content.find("tr:first td:first").attr("colspan"),10)),t=0;t<l;t++){for(n+="<tr>",o=0;o<r.length;o++)n+=e&&!o?"<td colspan='"+e+"'><span class='k-skeleton k-skeleton-text k-skeleton-pulse'></span></td>":"<td><span class='k-skeleton k-skeleton-text k-skeleton-pulse'></span></td>";n+="</tr>"}return n},_progress:function(e){var t,o=this.element,r=this.options.scrollable&&this.options.scrollable.endless,l=this.options.loaderType,n=this.options.scrollable&&this.options.scrollable.virtual;n?o=this.content:this._editContainer&&"popup"===this._editMode()?o=this._editContainer:this.lockedContent||r?o=this.wrapper:this.element.is("table")?o=this.element.parent():this.content&&this.content.length&&(o=this.content),"skeleton"==l?e?(t=this._buildSkeleton(),o.find("tbody").empty().append(t)):o.find(".k-skeleton").closest("tbody").empty():r&&e?Je.ui.progress(o,e,{height:this.content.height(),top:this.content[0].offsetTop,opacity:!0}):Je.ui.progress(o,e)},_resize:function(e,t){this._syncLockedContentHeight(),this._syncLockedHeaderHeight(),this.content&&(this._setContentWidth(),this._setContentHeight()),this.lockedTable&&this._syncLockedScroll(),this.virtualScrollable&&(t||this._rowHeight)&&(t&&(this._rowHeight=null),this.virtualScrollable.repaintScrollbar()),this.pager&&this.pager.element&&this.pager.resize(t),this._anyStickyColumns()&&this._updateStickyColumns(!1)},_isActiveInTable:function(){var t=tt();return!!t&&(this.table[0]===t||e.contains(this.table[0],t)||this._isLocked()&&(this.lockedTable[0]===t||e.contains(this.lockedTable[0],t)))},refresh:function(t){var o,r,l,n=this,a=n.dataSource.view(),i=n.options.navigatable,s=n.virtualScroll||{},d=e(n.current()),c=!1,u=(n.dataSource.group()||[]).length,p=u+te(v(n.columns)).length;t&&"itemchange"===t.action&&(n.editable||n.options.scrollable.endless)&&("popup"!=this._editMode()||"popup"===this._editMode()&&!n._editableIsClosing)||(s.columns&&n._templates(),t&&"remove"===t.action&&n.editable&&n.editable.options.model&&ut(n.editable.options.model,t.items)>-1&&n.editable.options.model.unbind(Kt,n._modelChangeHandler),t=t||{},n.trigger("dataBinding",{action:t.action||"rebind",index:t.index,items:t.items})||(t.action===ro&&n._isVirtualEditable()&&(n._destroyEditable(),n._clearEditableState()),n._angularItems("cleanup"),n._endlessFetchInProgress||(i&&(n._isActiveInTable()||n._editContainer&&n._editContainer.data("kendoWindow"))&&(c=d.is("th"),o=c?d.parent().children(":not(.k-group-cell)").index(d[0]):Math.max(n.cellIndex(d),0)),n._destroyEditable()),n.options.scrollable&&n.options.scrollable.endless?(clearTimeout(n._progressTimeOut),n._progressTimeOut=setTimeout(function(){n._endlessFetchInProgress||n._progress(!1)},100)):n._progress(!1),n._hideResizeHandle(),n._data=[],n.columns.length||(n._autoColumns(n._firstDataItem(a[0],u)),p=u+n.columns.length),n._group=u>0||n._group,n._group&&(n._templates(),n._updateCols(),n._updateLockedCols(),n._virtualColScroll||n._updateHeader(u),n._group=u>0,n._groupRows=be(a)),n.content&&(r=Je.scrollLeft(n.content)),l=n._skipRerenderItemsCount,n._renderContent(a,p,u),n.options.scrollable&&n.options.scrollable.endless&&this.lockedContent&&(n._skipRerenderItemsCount=l),n._renderLockedContent(a,p,u),n._virtualColScroll||(n._footer(),n._renderNoRecordsContent(),n._togglePagerVisibility(),n._setContentHeight(),n._setContentWidth(n.content&&r)),n.lockedTable&&(s.rows?n.content.find(">.k-virtual-scrollable-wrap").trigger("scroll"):n.touchScroller?n.touchScroller.movable.trigger("change"):(n.wrapper.one("scroll",function(e){e.stopPropagation()}),n.content.trigger("scroll"))),n._endlessFetchInProgress||n._restoreCurrent(o,c),n.touchScroller&&n.touchScroller.contentResized(),n.selectable&&n.selectable.resetTouchEvents(),n._muteAngularRebind(function(){n._angularItems("compile")}),n._checkBoxSelection&&n._toggleHeaderCheckState(!1),n.options.persistSelection&&(n.selectable&&!Je.ui.Selectable.parseOptions(n.options.selectable).cell||n._checkBoxSelection)&&(n.items().length||n.dataSource._isGroupPaged())&&n._restoreSelection(),n.trigger(Jt)))},_restoreCurrent:function(o,r){var l,n,a,i,s;if(!(o===t||o<0)){if(this._removeCurrent(),r)this._setCurrent(this.thead.find("th:not(.k-group-cell)").eq(o));else{if(l=0,n=this.virtualScroll||{},this._rowVirtualIndex?l=n.rows?this.virtualScrollable.position(this._rowVirtualIndex):this._rowVirtualIndex:o=0,a=e(),this.lockedTable&&(a=this.lockedTable.find(">tbody>tr").eq(l)),a=a.add(this.tbody.children().eq(l)),this._hasVirtualColumns()&&(i=parseInt(a.find("td:first").attr("colspan"),10),o=this._virtualCellIndex-(i>1?i-1:0)),s=a.find(">td:not(.k-group-cell):not(.k-hierarchy-cell)").eq(o),!s.length||o<0)return;this._hasVirtualColumns()?this._setCurrent(s,!0,!0):this._setCurrent(s)}this._current&&He(this._current.closest("table")[0],!0)}},_restoreSelection:function(){var e,t=this,o=t.items(),r=ft(t.dataSource.options.schema.model)?t.dataSource.options.schema.model.fn.idField:t.dataSource.options.schema.model.id;e=dt(o,function(e){var o=t.dataItem(e)[r];if(t._selectedIds[o])return e}),t.select(e)},_angularItems:function(e){Je.ui.DataBoundWidget.fn._angularItems.call(this,e),"cleanup"!==e||this.dataSource&&this.dataSource.options.endless||this._cleanupDetailItems(),this._angularGroupItems(e),this._angularGroupFooterItems(e)},_cleanupDetailItems:function(){var e=this;e._hasDetails()&&(e.angular("cleanup",function(){return{elements:e.tbody.children(".k-detail-row")}}),e.tbody.find(".k-detail-cell").empty())},_angularGroupItems:function(t){var o=this,r=o.tbody;o.lockedContent&&(r=o.lockedTable.find("tbody")),o._group&&o.angular(t,function(){return{elements:r.children(".k-grouping-row"),data:e.map(be(o.dataSource.view()),function(e){return{dataItem:e}})}})},_angularGroupFooterItems:function(t){var o=this,r=o.tbody;o.lockedContent&&(r=o.element),o._group&&o.groupFooterTemplate&&o.angular(t,function(){return{elements:r.find(".k-group-footer"),data:e.map(ve(o.dataSource.view()),function(e){return{dataItem:e}})}})},_renderContent:function(e,t,o){var r,l,n,a,i=this,s="",d=null!=i.lockedContent,c=null,u=i.options.scrollable,p={rowTemplate:i.rowTemplate,altRowTemplate:i.altRowTemplate,groupFooterTemplate:i.groupFooterTemplate,groupHeaderColumnTemplate:i.groupHeaderColumnTemplate};if(u&&u.endless&&!i.dataSource.options.endless&&(i._skipRerenderItemsCount=0,i.content&&(i.content[0].scrollTop=0)),c=i._skipRerenderItemsCount>0,t=d?t-te(ee(i.columns)).length:t,o>0)for(t=d?t-o:t,i.detailTemplate&&t++,i.groupFooterTemplate&&(i._groupAggregatesDefaultObject=i.dataSource.aggregates()),i.options.scrollable.endless&&(a=i.dataSource.flatView().length),r=0,l=e.length;r<l;r++)i._skippedGroups||(i._skippedGroups=[]),n=a&&r===e.length-1&&a!==i.dataSource.total(),s+=i._groupRowHtml(e[r],t,0,d?Ve:qe,p,d,n);else s+=i._rowsHtml(e,p);c?(i.tbody.append(s),clearTimeout(i._endlessFetchTimeOut),i._endlessFetchTimeOut=setTimeout(function(){i._groupToCollapse&&(i.collapseGroup(i._groupToCollapse),i._groupToCollapse=null)}),i._endlessFetchInProgress=null):i.tbody=de(i.tbody,i.table,s,this.options.$angular)},_renderGroupRows:function(){var t,o,r,l,n,a,i,s,d,c,u,p,h,f,g,m,_,k=this,b=k._groupRows,C=k.wrapper.find(".k-grouping-row"),w=k._groups(),y=null!=k.lockedContent;C.each(function(C,S){f=e(S),c=f.closest("table").parent(),u=c.is("."+Lt),o=te(u?v(Q(k.columns)):v(J(k.columns))),g=f.find("."+Ft).length,y?(t=u?qe:Ve,r=u?o.length+w-g:o.length):(t=qe,r=o.length+w-g),l=C>=b.length?b[C-b.length]:b[C],n=l.field,a=dt(le(k.columns),function(e){return e.field==n})[0]||{},_=!(a.groupHeaderTemplate||!v(k.columns)[0].groupHeaderColumnTemplate)&&v(k.columns)[0],i=a.groupHeaderTemplate?a.groupHeaderTemplate:v(k.columns)[0].groupHeaderColumnTemplate,s=(a.title&&(k.options.encodeTitles?Oe(a.title,!0):a.title)||n)+": "+me(l.value,a.format,a.values,a.encoded),w=w,d=k._groupData(l,!1,_),m=u?k.lockedGroupHeaderColumnTemplate:k.groupHeaderColumnTemplate,i&&(s=typeof i===Fo?i(d):Je.template(i)(d)),p=f.prev().length?f.prev():f.parent(),h=e(m?m(it({},d,{groupCells:g,colspan:w-g,text:s})):t(r,g,s)),p.is("tbody")?p.prepend(h):p.after(h),f.remove()})},_renderLockedContent:function(e,t,o){var r,l,n,a="",i=null,s={rowTemplate:this.lockedRowTemplate,altRowTemplate:this.lockedAltRowTemplate,groupFooterTemplate:this.lockedGroupFooterTemplate,groupHeaderColumnTemplate:this.lockedGroupHeaderColumnTemplate};if(this.lockedContent){if(n=this.lockedTable,i=this._skipRerenderItemsCount>0,o>0)for(t-=v(le(J(this.columns))).length,r=0,l=e.length;r<l;r++)a+=this._groupRowHtml(e[r],t,0,qe,s,!1,this.options.scrollable.endless&&r===e.length-1);else a=this._rowsHtml(e,s);i?n.children("tbody").append(a):de(n.children("tbody"),n,a,this.options.$angular),this._syncLockedContentHeight()}},_togglePagerVisibility:function(){this.options.pageable.alwaysVisible===!1&&this.wrapper.find(".k-grid-pager").toggle(this.dataSource.total()>=this.dataSource.pageSize())},_adjustRowsHeight:function(e,t){var o,r,l,n,a=e[0].rows,i=a.length,s=t[0].rows,d=e.add(t),c=d.length,u=[];for(o=0;o<i&&s[o];o++)a[o].style.height&&(a[o].style.height=s[o].style.height="");for(o=0;o<i&&s[o];o++)r=a[o].offsetHeight,l=s[o].offsetHeight,n=0,r>l?n=r:r<l&&(n=l),u.push(n);for(o=0;o<c;o++)d[o].style.display="none";for(o=0;o<i;o++)u[o]&&(a[o].style.height=s[o].style.height=u[o]+1+"px");for(o=0;o<c;o++)d[o].style.display=""}}),Je.ExcelMixin&&Je.ExcelMixin.extend(Qe.prototype),Je.PDFMixin&&(Je.PDFMixin.extend(Qe.prototype),Qe.prototype._drawPDF_autoPageBreak=function(o){function r(){p&&s!==t?(u.one("change",l),u.page(s)):(d.refresh(),l())}function l(){f.appendTo(document.body);var t=e.extend({},d.options.pdf,{_destructive:!0,progress:function(e){o.notify({page:e.page,pageNumber:e.pageNum,progress:.5+e.pageNum/e.totalPages/2,totalPages:e.totalPages})}});Je.drawing.drawDOM(a,t).always(function(){f.remove()}).then(function(e){c.resolve(e),d.toggleUnexportableColumns(d.columns,!0)}).fail(function(e){c.reject(e)})}function n(){var e=u.page(),t=p?u.totalPages():1;i.append(h.children("tr:not(.k-detail-row)")),e<t?u.page(e+1):(u.unbind("change",n),r())}var a,i,s,d=this,c=new e.Deferred,u=d.dataSource,p=d.options.pdf.allPages,h=d.wrapper.find('table[role$="grid"] > tbody').first(),f=e("<div>").css({position:"absolute",left:-1e4,top:-1e4});return d.toggleUnexportableColumns(d.columns),a=d.wrapper.clone().css({height:"auto",width:"auto"}).appendTo(f),a.find(".k-grid-content").css({height:"auto",width:"auto",overflow:"visible"}),a.find('table[role$="grid"], .k-grid-footer table').css({height:"auto",width:"100%",overflow:"visible"}),a.find(".k-grid-pager, .k-grid-toolbar, .k-grouping-header").remove(),a.find(".k-grid-header, .k-grid-footer, .k-auto-scrollable").css({paddingRight:0}),this._initPDFProgress(o),i=a.find('table[role$="grid"] > tbody').first().empty(),s=u.page(),p?(u.bind("change",n),u.page(1)):n(),c.promise()},Qe.prototype.toggleUnexportableColumns=function(e,t){var o,r,l,n,a,i=e.length;for(a=0;a<i;a++)o=e[a],r=o.exportable,t?o._toggledDuringExport?(o._toggledDuringExport=!1,o.hidden?this.showColumn(o):this.hideColumn(o)):o.columns&&this.toggleUnexportableColumns(o.columns,t):("object"==typeof o.exportable&&(r=o.exportable.pdf),l=!o.hidden&&r!==!1,n=o.hidden&&r===!0,r=l||n,r||o.hidden?r&&o.hidden?(o._toggledDuringExport=!0,this.showColumn(o)):r&&o.columns&&this.toggleUnexportableColumns(o.columns):(o._toggledDuringExport=!0,this.hideColumn(o)))},Qe.prototype._drawPDF=function(o){function r(){i&&d!==t?(a.unbind("change",l),a.one("change",function(){n.resolve(s)}),a.page(d)):n.resolve(s)}function l(){c.toggleUnexportableColumns(c.columns),c._drawPDFShadow({width:c.wrapper.width()},{avoidLinks:c.options.pdf.avoidLinks}).done(function(e){var t=a.page(),l=i?a.totalPages():1,n={page:e,pageNumber:t,progress:t/l,totalPages:l};c.toggleUnexportableColumns(c.columns,!0),o.notify(n),s.append(n.page),t<l?a.page(t+1):r()}).fail(function(e){n.reject(e)})}var n,a,i,s,d,c=this;return c.options.pdf.paperSize&&"auto"!=c.options.pdf.paperSize?c._drawPDF_autoPageBreak(o):(n=new e.Deferred,a=c.dataSource,i=c.options.pdf.allPages,this._initPDFProgress(o),s=new Je.drawing.Group,d=a.page(),i?(a.bind("change",l),a.page(1)):l(),n.promise())},Qe.prototype._initPDFProgress=function(t){var o,r=e("<div class='k-loading-pdf-mask'><div class='k-loading-color'></div></div>");r.prepend(this.wrapper.clone().css({position:"absolute",top:0,left:0})),this.wrapper.append(r),o=e("<div class='k-loading-pdf-progress'>").appendTo(r).kendoProgressBar({type:"chunk",chunkCount:10,min:0,max:1,value:0}).data("kendoProgressBar"),t.progress(function(e){o.value(e.progress)}).always(function(){Je.destroy(r),r.remove()})}),Ye.plugin(Qe),Ye.plugin(je)}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(e,t,o){(o||t)()});
//# sourceMappingURL=kendo.grid.min.js.map
