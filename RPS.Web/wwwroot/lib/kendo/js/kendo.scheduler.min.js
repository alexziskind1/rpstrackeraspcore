/** 
 * Kendo UI v2021.2.616 (http://www.telerik.com/kendo-ui)                                                                                                                                               
 * Copyright 2021 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.                                                                                      
 *                                                                                                                                                                                                      
 * Kendo UI commercial licenses may be obtained at                                                                                                                                                      
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  
 * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       

*/
!function(e,define){define("util/text-metrics.min",["kendo.core.min"],e)}(function(){!function(e){function t(e){return(e+"").replace(s,l)}function i(e){var t,i=[];for(t in e)i.push(t+e[t]);return i.sort().join("")}function n(e){var t,i=2166136261;for(t=0;t<e.length;++t)i+=(i<<1)+(i<<4)+(i<<7)+(i<<8)+(i<<24),i^=e.charCodeAt(t);return i>>>0}function a(){return{width:0,height:0,baseline:0}}function o(e,t,i){return u.current.measure(e,t,i)}var r,s,l,d,c,u;window.kendo.util=window.kendo.util||{},r=kendo.Class.extend({init:function(e){this._size=e,this._length=0,this._map={}},put:function(e,t){var i=this._map,n={key:e,value:t};i[e]=n,this._head?(this._tail.newer=n,n.older=this._tail,this._tail=n):this._head=this._tail=n,this._length>=this._size?(i[this._head.key]=null,this._head=this._head.newer,this._head.older=null):this._length++},get:function(e){var t=this._map[e];if(t)return t===this._head&&t!==this._tail&&(this._head=t.newer,this._head.older=null),t!==this._tail&&(t.older&&(t.older.newer=t.newer,t.newer.older=t.older),t.older=this._tail,t.newer=null,this._tail.newer=t,this._tail=t),t.value}}),s=/\r?\n|\r|\t/g,l=" ",d={baselineMarkerSize:1},"undefined"!=typeof document&&(c=document.createElement("div"),c.style.cssText="position: absolute !important; top: -4000px !important; width: auto !important; height: auto !important;padding: 0 !important; margin: 0 !important; border: 0 !important;line-height: normal !important; visibility: hidden !important; white-space: pre!important;"),u=kendo.Class.extend({init:function(t){this._cache=new r(1e3),this.options=e.extend({},d,t)},measure:function(e,o,r){var s,l,d,u,p,h,f,v,m;if(void 0===r&&(r={}),void 0===e||null===e)return a();if(s=i(o),l=n(e+s),d=this._cache.get(l))return d;u=a(),p=r.box||c,h=this._baselineMarker().cloneNode(!1);for(f in o)v=o[f],void 0!==v&&(p.style[f]=v);return m=r.normalizeText!==!1?t(e):e+"",p.textContent=m,p.appendChild(h),document.body.appendChild(p),m.length&&(u.width=p.offsetWidth-this.options.baselineMarkerSize,u.height=p.offsetHeight,u.baseline=h.offsetTop+this.options.baselineMarkerSize),u.width>0&&u.height>0&&this._cache.put(l,u),p.parentNode.removeChild(p),u},_baselineMarker:function(){var e=document.createElement("div");return e.style.cssText="display: inline-block; vertical-align: baseline;width: "+this.options.baselineMarkerSize+"px; height: "+this.options.baselineMarkerSize+"px;overflow: hidden;",e}}),u.current=new u,kendo.deepExtend(kendo.util,{LRUCache:r,TextMetrics:u,measureText:o,objectKey:i,hashKey:n,normalizeText:t})}(window.kendo.jQuery)},"function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()}),function(e,define){define("kendo.scheduler.min",["kendo.dropdownlist.min","kendo.editable.min","kendo.multiselect.min","kendo.window.min","kendo.datetimepicker.min","kendo.scheduler.recurrence.min","kendo.scheduler.view.min","kendo.scheduler.dayview.min","kendo.scheduler.agendaview.min","kendo.scheduler.monthview.min","kendo.scheduler.timelineview.min","kendo.scheduler.yearview.min","kendo.dialog.min","kendo.pane.min","kendo.pdf.min","kendo.switch.min"],e)}(function(){return function(e,t){function i(e,t){return t=t||"",e.startTimezone&&(t=e.startTimezone,e.endTimezone&&(t+=" | "+e.endTimezone)),t}function n(e,t){var i=t.timezone;i&&(e[F.attr("timezone")]=i)}function a(e,t){var i,n=t.model.fields[t.field].validation;n&&(i=n.validDateValidator,i&&Z(i)&&i.message&&(e[F.attr("validDate-msg")]=i.message))}function o(e,t){var i,n=t.model.fields[t.field].validation;n&&(i=n.dateCompare,i&&Z(i)&&i.message&&(e[F.attr("dateCompare-msg")]=i.message))}function r(e,t){return function(i){return i=e(i),l(i,"apply",t),i||[]}}function s(e,t){return function(i){return i&&("[object Array]"===te.call(i)||i instanceof F.data.ObservableArray||(i=[i])),l(i,"remove",t,!0),i=e(i),i||[]}}function l(e,t,i,n){var a,o,r,s,l;for(e=e||[],o=0,r=e.length;o<r;o++)a=e[o],s=a.start?a.start.getTimezoneOffset():null,l=a.start?a.end.getTimezoneOffset():null,n?a.startTimezone||a.endTimezone?i?(a.start=F.timezone.convert(a.start,a.startTimezone||a.endTimezone,i),a.end=F.timezone.convert(a.end,a.endTimezone||a.startTimezone,i),a.start=F.timezone[t](a.start,i),a.end=F.timezone[t](a.end,i)):(a.start=F.timezone[t](a.start,a.startTimezone||a.endTimezone),a.end=F.timezone[t](a.end,a.endTimezone||a.startTimezone)):i&&(a.start=F.timezone[t](a.start,i),a.end=F.timezone[t](a.end,i)):a.startTimezone||a.endTimezone?(a.start=F.timezone[t](a.start,a.startTimezone||a.endTimezone),a.end=F.timezone[t](a.end,a.endTimezone||a.startTimezone),i&&(a.start=F.timezone.convert(a.start,a.startTimezone||a.endTimezone,i),a.end=F.timezone.convert(a.end,a.endTimezone||a.startTimezone,i))):i&&(a.start=F.timezone[t](a.start,i),a.end=F.timezone[t](a.end,i)),n&&delete a.uid,"remove"===t&&a.start&&s&&s!==a.start.getTimezoneOffset()&&(a.start=new Date(a.start.getTime()+6e4*(s-a.start.getTimezoneOffset()))),"remove"===t&&a.end&&l&&l!==a.end.getTimezoneOffset()&&(a.end=new Date(a.end.getTime()+6e4*(l-a.end.getTimezoneOffset())));return e}function d(e,t){for(var i,n=e.length,a=0;a<n;a++)if(i=e[a],i.uid===t)return i}function c(e,t,i){return e=i?F.timezone.convert(e,t,i):F.timezone.remove(e,t)}function u(e){var t,i;return!(e.filter("[name=start]").length&&e.filter("[title=Start]").length||e.filter("[name=end]").length&&e.filter("[title=End]").length||e.filter(".k-recur-until").length)||(i=F.widgetInstance(e,F.ui),i?(t=F.parseDate(e.val(),i.options.format),!!t&&i.value()):(t=F.parseDate(e.val()),!!t))}function p(e){var t,i,n,a,o,r,s,l,d,u,p,h;return!(e.filter("[name=end]").length&&(t=e.closest(".k-scheduler-edit-form"),i=t.find("[name=start]:visible"),n=t.find("[name=end]:visible"),n[0]&&i[0]&&(r=F.widgetInstance(i,F.ui),s=F.widgetInstance(n,F.ui),l=t.data("kendoEditable"),d=l?l.options.model:null,r&&s?(a=r.value(),o=s.value()):(a=F.parseDate(i.val()),o=F.parseDate(n.val())),a&&o)))||(d&&(u=i.attr(F.attr("timezone")),p=d.startTimezone,h=d.endTimezone,p=p||h,h=h||p,p&&(a=c(a,p,u),o=c(o,h,u))),a<=o)}function h(e){var t,i,n,a,o,r;return!(e.filter(".k-recur-until").length&&(t=F.widgetInstance(e,F.ui),i=t.value(),n=e.closest(".k-scheduler-edit-form"),a=n.find("[name=start]:visible"),a[0]&&(r=F.widgetInstance(a,F.ui),o=r?r.value():F.parseDate(a.val()),o&&i)))||o<=i}function f(e,t,i,n){for(var a=e.length,o=[],r=0;r<a;r++)o=o.concat(e[r].expand(t,i,n));return o}function v(e,t){delete e.name,delete e.prefix,delete e.remove,delete e.edit,delete e.add,delete e.navigate;for(var i in t)e[i]=t[i];return e}function m(t){var i=g(t.model,t.field);return function(t,n){e('<textarea name="description" class="k-textarea" title="'+n.title+'"/>').attr(i).appendTo(t)}}function g(t,i){var n,a,o=(t.fields||t)[i],r=["url","email","number","date","boolean"],s=o?o.validation:{},l=F.attr("type"),d=e.inArray,c={};for(n in s)a=s[n],d(n,r)>=0?c[l]=n:F.isFunction(a)||(c[n]=Z(a)?a.value||n:a),c[F.attr(n+"-msg")]=a.message;return c}function _(e,i,n,a){var o,r=e.value(),s=Array.isArray(r);o=s?JSON.parse(JSON.stringify(r)):[""+r],e.dataSource.data().forEach(function(r){if(null===r[n]||r[n]===t||r[n]==i)r.set(ke,!1);else{var l=r.get(a);r.set(ke,!0),(o.indexOf(l)>=0||o.indexOf(""+l)>=0)&&(s?o.splice(o.indexOf(l),1):(e.value(null),e.trigger(ce)))}}),s&&o.length<r.length&&(e.value(o),e.trigger(ce))}function k(e,t,i,n){var a=e.closest(".k-edit-form-container").find("[data-"+F.ns+"bind='value:"+n+"']"),o=a.getKendoDropDownList();o?o.bind(ce,function(e){var n=e.sender.value();_(t,n,i.dataParentValueField,i.dataValueField)}):a.on(ce,function(e){var n=e.target.value;_(t,n,i.dataParentValueField,i.dataValueField)})}function b(e,i,n){var a,o=i.find(be),r=i.val(),s=Array.isArray(r);a=s?JSON.parse(JSON.stringify(r)):[r],e.dataSource.view().forEach(function(r,l){var d,c=F.getter(e.dataParentValueField)(r),u=null===c||c===t||c==n;u?o[l].removeAttribute(ke):(o[l].setAttribute(ke,ke),d=""+r.get(e.dataValueField),a.indexOf(d)>=0&&(s?a.splice(a.indexOf(d),1):(i.val(null),i.trigger(ce))))}),s&&a.length<r.length&&(i.val(a),i.trigger(ce))}function w(t,i,n){var a=g(i,t.field);return function(o){var r;n&&setTimeout(function(){_(r,i[n],t.dataParentValueField,t.dataValueField),k(o,r,t,n)}),r=e(F.format('<select data-{0}bind="value:{1}" title="'+i.title+'">',F.ns,t.field)).appendTo(o).attr(a).kendoDropDownList({dataTextField:t.dataTextField,dataValueField:t.dataValueField,dataSource:t.dataSource.data(),valuePrimitive:t.valuePrimitive,optionLabel:"None",template:F.format('<span #= data.disabled ? "data-disabled": ""#><span class="k-scheduler-mark" style="background-color:#= data.{0}?{0}:"none" #"></span>#={1}#</span>',t.dataColorField,t.dataTextField),select:function(e){e.dataItem.disabled&&e.preventDefault()},dataBound:function(t){var i=t.sender.list.find("li");i.each(function(t,i){var n=e(i);n.find("[data-disabled]").length>0&&n.addClass("k-state-disabled")})}}).data("kendoDropDownList")}}function y(t,i,n){var a=g(i,t.field);return function(o){var r,s,l,d="",c=t.dataSource.view();for(r=0,s=c.length;r<s;r++)d+=F.format('<option value="{0}">{1}</option>',F.getter(t.dataValueField)(c[r]),F.getter(t.dataTextField)(c[r]));l=e(F.format('<select data-{0}bind="value:{1}">{2}</select>',F.ns,t.field,d)).appendTo(o).attr(a),n&&setTimeout(function(){var e=o.closest(".k-stretched-view").find("[data-"+F.ns+"bind='value:"+n+"']"),a=i[n];b(t,l,a),e.on(ce,function(e){var i=e.target.value;b(t,l,i)})})}}function z(t,i,n){var a=g(i,t.field);return function(o){var r;n&&setTimeout(function(){_(r,i[n],t.dataParentValueField,t.dataValueField),k(o,r,t,n)}),r=e(F.format('<select data-{0}bind="value:{1}">',F.ns,t.field)).appendTo(o).attr(a).kendoMultiSelect({dataTextField:t.dataTextField,dataValueField:t.dataValueField,dataSource:t.dataSource.data(),valuePrimitive:t.valuePrimitive,itemTemplate:F.format('<span #= data.disabled ? "data-disabled": "" #><span class="k-scheduler-mark" style="background-color:#= data.{0}?{0}:"none" #"></span>#={1}#</span>',t.dataColorField,t.dataTextField),tagTemplate:F.format('<span class="k-scheduler-mark" style="background-color:#= data.{0}?{0}:"none" #"></span>#={1}#',t.dataColorField,t.dataTextField),select:function(e){e.dataItem.disabled&&e.preventDefault()},dataBound:function(t){var i=t.sender.list.find("li");i.each(function(t,i){var n=e(i);n.find("[data-disabled]").length>0&&n.addClass("k-state-disabled")})}}).data("kendoMultiSelect")}}function T(t,i,n){var a=g(i,t.field);return function(o){var r,s,l,d="",c=t.dataSource.view();for(r=0,s=c.length;r<s;r++)d+=F.format('<option value="{0}">{1}</option>',F.getter(t.dataValueField)(c[r]),F.getter(t.dataTextField)(c[r]));l=e(F.format('<select data-{0}bind="value:{1}" multiple="multiple">{2}</select>',F.ns,t.field,d)).appendTo(o).attr(a),n&&setTimeout(function(){var e=o.closest(".k-stretched-view").find("[data-"+F.ns+"bind='value:"+n+"']"),a=i[n];b(t,l,a),e.on(ce,function(e){var i=e.target.value;b(t,l,i)})})}}function D(e,t){var i,n=e.end.getTime()-e.start.getTime(),a=new Date(e.start.getTime());return F.date.setTime(a,t),i=new Date(a.getTime()),F.date.setTime(i,n,!0),{start:a,end:i}}var S,x,E,R,C,V,P,M,O,A,I,B,F=window.kendo,H=F.date,W=H.MS_PER_DAY,N=H.getDate,L=F.date.getMilliseconds,K=F.recurrence,U=e.extend({F10:121},F.keys),q=F.ui,Y=q.Widget,$=q.DataBoundWidget,j="string",Q=q.Popup,J=q.Calendar,X=F.data.DataSource,Z=e.isPlainObject,G=e.extend,ee=e.proxy,te=Object.prototype.toString,ie=e.isArray,ne=".kendoScheduler",ae="click",oe="mousedown",re=F.support.pointers?"pointerdown":"touchstart",se=F.support.pointers?"pointermove":"touchmove",le=F.support.pointers?"pointerup":"touchend",de=F.support.mousemove,ce="change",ue="progress",pe="error",he="cancel",fe="remove",ve="resetSeries",me="save",ge="add",_e="edit",ke="disabled",be="option",we="k-state-focused",ye="k-state-expanded",ze=".k-scheduler-views",Te="k-event-inverse",De=/(?:value:start|value:end)(?:,|$)/,Se=N(new Date),xe=",",Ee=/\;/g,Re="recurrenceException",Ce="Are you sure you want to delete this event?",Ve="Do you want to delete only this event occurrence or the whole series?",Pe="Do you want to edit only this event occurrence or the whole series?",Me="Are you sure you want to delete this event occurrence?",Oe="Are you sure you want to reset the whole series?",Ae="Are you sure you want to delete the whole series?",Ie='<button type="button" class="k-button #=className#" #=attr#><span class="k-button-text">#=text#</span></button>',Be=F.template('<select class="k-dropdown k-views-dropdown">#for (var view in views) {#<option value="#= view #">${views[view].title}</option>#}#</select>'),Fe=F.template('<div class="k-scheduler-toolbar k-toolbar"># if (pdf) { #<button class="k-button k-pdf"><span class="k-icon k-i-file-pdf"></span><span class="k-button-text">${messages.pdf}</span></button># } #<span class="k-scheduler-navigation k-button-group"><button class="k-button k-nav-today" title="${messages.today}"><span class="k-button-text">${messages.today}</span></button><button class="k-button k-button-icon k-icon-button k-nav-prev" title="${messages.previous}" aria-label="${messages.previous}"><span class="k-icon k-i-arrow-60-left"></span></button><button class="k-button k-button-icon k-icon-button k-nav-next" title="${messages.next}" aria-label="${messages.next}"><span class="k-icon k-i-arrow-60-right"></span></button></span><a role="button" href="\\#" class="k-nav-current"><span class="k-icon k-i-calendar"></span><span class="k-sm-date-format" data-#=ns#bind="text: formattedShortDate"></span><span class="k-lg-date-format" data-#=ns#bind="text: formattedDate"></span></a><span class="k-spacer k-toolbar-spacer"></span># if (search) { #<span class="k-scheduler-search k-textbox"><input autocomplete="off" placeholder="${messages.search}" title="${messages.search}" class="k-input k-scheduler-search-input" /><span class="k-input-icon"><span class="k-icon k-i-search"></span></span></span># } ## if (viewsCount === 1) { #<a role="button" data-#=ns#name="#=view#" href="\\#" class="k-button k-button-icon k-icon-button k-scheduler-refresh"><span class="k-icon k-i-reload"></span></a># } else { #<span class="k-scheduler-views-wrapper"><span class="k-scheduler-views k-button-group"># for (var view in views) { #<button type="button" class="k-button k-view-#= view.toLowerCase() #" data-#=ns#name="#=view#">${views[view].title}</button># } #</span></span># } #</div>'),He=F.template('<div class="k-scheduler-toolbar k-toolbar"><span class="k-scheduler-tools k-button-group"># if (pdf) { #<button type="button" class="k-button k-icon-button k-button-icon k-pdf"><span class="k-icon k-i-file-pdf"></span></button># } #<button type="button" class="k-button k-icon-button k-button-icon k-nav-calendar"><span class="k-icon k-i-calendar"></span></button># if (editable) { #<button type="button" class="k-button k-icon-button k-button-icon k-create-event"><span class="k-icon k-i-plus"></span></button># } #</span><span class="k-spacer k-toolbar-spacer"></span># if (search) { #<span class="k-scheduler-search k-textbox"><input autocomplete="off" placeholder="${messages.search}" title="${messages.search}" class="k-scheduler-search-input" /><span class="k-input-icon"><span class="k-icon k-i-search"></span></span></span># } ##if(viewsCount === 1){#<a role="button" data-#=ns#name="#=view#" href="\\#" class="k-button k-button-icon k-icon-button k-scheduler-refresh"><span class="k-icon k-i-reload"></span></a>#} else {#<select class="k-dropdown k-scheduler-mobile-views">#for(var view in views){#<option class="k-view-#= view.toLowerCase() #" value="#=view#">${views[view].title}</option>#}#</select>#}#</div><div class="k-scheduler-toolbar k-toolbar"><span class="k-scheduler-navigation"><button class="k-button k-button-icon k-icon-button k-nav-prev"><span class="k-icon k-i-arrow-chevron-left"></span></button><span class="k-state-default k-nav-current"><span class="k-m-date-format" data-#=ns#bind="text: formattedMobileDate"></span><span class="k-y-date-format" data-#=ns#bind="text: formattedYear"></span></span><button class="k-button k-button-icon k-icon-button k-nav-next"><span class="k-icon k-i-arrow-chevron-right"></span></button></span></div>'),We=function(t,i){var r={name:i.field,title:i.title},s=i.model.isAllDay,l=F.attr("validate")+"='"+!s+"'",d=F.attr("validate")+"='"+s+"'";n(r,i),a(r,i),o(r,i),e('<input type="datetime-local" required '+F.attr("type")+'="datetime-local" '+F.attr("bind")+'="value:'+i.field+', invisible:isAllDay" '+l+"/>").attr(r).appendTo(t),e('<input type="date" required '+F.attr("type")+'="date" '+F.attr("bind")+'="value:'+i.field+',visible:isAllDay" '+d+"/>").attr(r).appendTo(t),e("<span "+F.attr("for")+'="'+i.field+'" class="k-invalid-msg"/>').hide().appendTo(t)},Ne=function(t,i){var r={name:i.field,title:i.title},s=i.model.isAllDay,l=F.attr("validate")+"='"+!s+"' ",d=F.attr("validate")+"='"+s+"' ";n(r,i),a(r,i),o(r,i),e('<input type="text" required '+F.attr("type")+'="date" '+F.attr("role")+'="datetimepicker" '+F.attr("bind")+'="value:'+i.field+',invisible:isAllDay" '+l+"/>").attr(r).appendTo(t),e('<input type="text" required '+F.attr("type")+'="date" '+F.attr("role")+'="datepicker" '+F.attr("bind")+'="value:'+i.field+',visible:isAllDay" '+d+"/>").attr(r).appendTo(t),e("<span "+F.attr("bind")+'="text: '+i.field+'Timezone"></span>').appendTo(t),"end"===i.field&&e("<span "+F.attr("bind")+'="text: startTimezone, invisible: endTimezone"></span>').appendTo(t),e("<span "+F.attr("for")+'="'+i.field+'" class="k-invalid-msg"/>').hide().appendTo(t)},Le=function(t,i){e("<div "+F.attr("bind")+'="value:'+i.field+'" />').attr({name:i.field}).appendTo(t).kendoRecurrenceEditor({start:i.model.start,timezone:i.timezone,messages:i.messages})},Ke=function(t,i){e("<div "+F.attr("bind")+'="value:'+i.field+'" />').attr({name:i.field}).appendTo(t).kendoMobileRecurrenceEditor({start:i.model.start,timezone:i.timezone,messages:i.messages,pane:i.pane,value:i.model[i.field]})},Ue=function(t,i){e('<input type="checkbox" data-role="switch"'+F.attr("bind")+'="value:'+i.field+'" />').appendTo(t)},qe=function(t,n){var a=i(n.model,n.messages.noTimezone);e('<span class="k-timezone-label"></span>').text(a).appendTo(t),e('<span class="k-icon k-i-arrow-chevron-right"></span>').appendTo(t),t.closest("li.k-item label").click(n.click)},Ye=function(t,i){e('<a href="#" class="k-button" data-bind="invisible:isAllDay">'+i.messages.timezoneEditorButton+"</a>").click(i.click).appendTo(t)},$e=function(t,i){e('<div class="k-mobiletimezoneeditor" '+F.attr("bind")+'="value:'+i.field+'" />').attr({name:i.field}).appendTo(t).kendoMobileTimezoneEditor({optionLabel:i.noTimezone})},je=function(i,n){var a=n.visible||n.visible===t;e("<div "+F.attr("bind")+'="value:'+n.field+'" />').attr({name:n.field}).toggle(a).appendTo(i).kendoTimezoneEditor({optionLabel:n.noTimezone,title:n.title})},Qe=F.Class.extend({init:function(t,i){var n=t.timezone;this.reader=i,i.model&&(this.model=i.model),this.timezone=n,this.data=r(e.proxy(this.data,this),n),this.serialize=s(e.proxy(this.serialize,this),n)},errors:function(e){return this.reader.errors(e)},parse:function(e){return this.reader.parse(e)},data:function(e){return this.reader.data(e)},total:function(e){return this.reader.total(e)},groups:function(e){return this.reader.groups(e)},aggregates:function(e){return this.reader.aggregates(e)},serialize:function(e){return this.reader.serialize(e)}}),Je=F.data.Model.define({init:function(e){var t=this;F.data.Model.fn.init.call(t,e),t._defaultId=t.defaults[t.idField]},_time:function(e){var t=this[e],i="_"+e+"Time";return this[i]?this[i]-F.date.toUtcTime(F.date.getDate(t)):L(t)},_date:function(e){var t="_"+e+"Time";return this[t]?this[t]-this._time(e):F.date.getDate(this[e])},clone:function(t,i){var n=this.uid,a=new this.constructor(e.extend({},this.toJSON(),t));return i||(a.uid=n),a},duration:function(){var e=this.end,t=this.start,i=(e.getTimezoneOffset()-t.getTimezoneOffset())*F.date.MS_PER_MINUTE;return e-t-i},expand:function(e,t,i){return K?K.expand(this,e,t,i):[this]},update:function(e){for(var t in e)this.set(t,e[t]);this._startTime&&this.set("_startTime",F.date.toUtcTime(this.start)),this._endTime&&this.set("_endTime",F.date.toUtcTime(this.end))},isMultiDay:function(){return this.isAllDay||this.duration()>=F.date.MS_PER_DAY},isException:function(){return!this.isNew()&&this.recurrenceId},isOccurrence:function(){return this.isNew()&&this.recurrenceId},isRecurring:function(){return!(!this.recurrenceRule&&!this.recurrenceId)},isRecurrenceHead:function(){return!(!this.id||!this.recurrenceRule)},toOccurrence:function(t){return t=e.extend(t,{recurrenceException:null,recurrenceRule:null,recurrenceId:this.id||this.recurrenceId}),t[this.idField]=this.defaults[this.idField],this.clone(t,!0)},toJSON:function(){var e=F.data.Model.fn.toJSON.call(this);return e.uid=this.uid,delete e._startTime,delete e._endTime,e},shouldSerialize:function(e){return F.data.Model.fn.shouldSerialize.call(this,e)&&"_defaultId"!==e},set:function(e,t){var i,n,a,o=this.isAllDay||!1;F.data.Model.fn.set.call(this,e,t),"isAllDay"==e&&t!=o&&(i=F.date.getDate(this.start),n=new Date(this.end),a=F.date.getMilliseconds(n),0===a&&t&&(a=W),this.set("start",i),t===!0?(F.date.setTime(n,-a),n<i&&(n=i)):F.date.setTime(n,W-a),this.set("end",n))},id:"id",fields:{id:{type:"number"},title:{defaultValue:"",type:"string"},start:{type:"date",validation:{required:!0,validDate:{value:u}}},startTimezone:{type:"string"},end:{type:"date",validation:{required:!0,validDate:{value:u},dateCompare:{value:p}}},endTimezone:{type:"string"},recurrenceRule:{defaultValue:"",type:"string",validation:{validDate:{value:u},untilDateCompare:{value:h}}},recurrenceException:{defaultValue:"",type:"string"},isAllDay:{type:"boolean",defaultValue:!1},description:{type:"string"}}}),Xe=X.extend({init:function(e){X.fn.init.call(this,G(!0,{},{schema:{modelBase:Je,model:Je}},e)),this.reader=new Qe(this.options.schema,this.reader)},expand:function(e,t){var i,n=this.view(),a={};return e&&t&&(i=t.getTimezoneOffset(),t=new Date(t.getTime()+W-1),t.getTimezoneOffset()!==i&&(t=F.timezone.apply(t,i)),a={logic:"or",filters:[{logic:"and",filters:[{field:"start",operator:"gte",value:e},{field:"end",operator:"gte",value:e},{field:"start",operator:"lte",value:t}]},{logic:"and",filters:[{field:"start",operator:"lte",value:new Date(e.getTime()+W-1)},{field:"end",operator:"gte",value:e}]}]},n=new F.data.Query(f(n,e,t,this.reader.timezone)).filter(a).toArray()),n},cancelChanges:function(e){e&&e.isOccurrence()&&this._removeExceptionDate(e),X.fn.cancelChanges.call(this,e)},insert:function(e,t){if(t){if(!(t instanceof Je)){var i=t;t=this._createNewModel(),t.accept(i)}return(!this._pushCreated&&t.isRecurrenceHead()||t.recurrenceId)&&(t=t.recurrenceId?t:t.toOccurrence(),this._addExceptionDate(t)),X.fn.insert.call(this,e,t)}},pushCreate:function(e){this._pushCreated=!0,X.fn.pushCreate.call(this,e),this._pushCreated=!1},remove:function(e){return e.isRecurrenceHead()?this._removeExceptions(e):e.isRecurring()&&this._addExceptionDate(e),X.fn.remove.call(this,e)},_removeExceptions:function(e){for(var t=this.data().slice(0),i=t.shift(),n=e.id;i;)i.recurrenceId===n&&X.fn.remove.call(this,i),i=t.shift();e.set(Re,"")},_removeExceptionDate:function(e){var t,i,n,a;e.recurrenceId&&(t=this.get(e.recurrenceId),t&&(i=e.defaults.start,n=RegExp("(\\"+xe+"?)"+K.toExceptionString(i,this.reader.timezone)),a=(t.recurrenceException||"").replace(Ee,xe).replace(/\,$/,""),n.test(a)?t.set(Re,a.replace(n,"")):(i=e.start,n=RegExp("(\\"+xe+"?)"+K.toExceptionString(i,this.reader.timezone)),t.set(Re,a.replace(n,"")))))},_addExceptionDate:function(e){var t,i=e.start,n=this.reader.timezone,a=this.get(e.recurrenceId),o=(a.recurrenceException||"").replace(Ee,xe).replace(/\,$/,"");K.isException(o,i,n)||(t=K.toExceptionString(i,n),e.defaults.start=i,a.set(Re,o+(o&&t?xe:"")+t))}});Xe.create=function(e){(ie(e)||e instanceof F.data.ObservableArray)&&(e={data:e});var t=e||{},i=t.data;if(t.data=i,!(t instanceof Xe)&&t instanceof F.data.DataSource)throw Error("Incorrect DataSource type. Only SchedulerDataSource instances are supported");return t instanceof Xe?t:new Xe(t)},G(!0,F.data,{SchedulerDataSource:Xe,SchedulerDataReader:Qe,SchedulerEvent:Je}),S={update:{text:"Save",className:"k-primary k-scheduler-update"},canceledit:{text:"Cancel",className:"k-scheduler-cancel"},destroy:{text:"Delete",imageClass:"k-i-close",className:"k-primary k-scheduler-delete",iconClass:"k-icon"}},x={mobile:{dateRange:We,timezonePopUp:qe,timezone:$e,recurrence:Ke,description:m,multipleResources:T,resources:y,isAllDay:Ue},desktop:{dateRange:Ne,timezonePopUp:Ye,timezone:je,recurrence:Le,description:m,multipleResources:z,resources:w}},E=F.Observable.extend({init:function(e,t){F.Observable.fn.init.call(this),this.element=e,this.options=G(!0,{},this.options,t),this.createButton=this.options.createButton,this.toggleDateValidationHandler=ee(this._toggleDateValidation,this)},_toggleDateValidation:function(t){if("isAllDay"==t.field){var i,n,a,o=this.container,r=this.editable.options.model.isAllDay,s=F.attr("bind");o.find("["+s+"*=end],["+s+"*=start]").each(function(){i=e(this),De.test(i.attr(s))&&(n=i.is("["+F.attr("role")+"=datetimepicker],[type*=datetime]"),a=r!==n,i.attr(F.attr("validate"),a))})}},fields:function(e,t){var i,n,a,o,r,s,l=this,d=l.options.messages,c=l.options.timezone,u=function(e){e.preventDefault(),l._initTimezoneEditor(t,this)},p=[{field:"title",title:d.editor.title},{field:"start",title:d.editor.start,editor:e.dateRange,timezone:c},{field:"end",title:d.editor.end,editor:e.dateRange,timezone:c},{field:"isAllDay",title:d.editor.allDayEvent,editor:e.isAllDay}],h=function(e){return!!e[n.dataParentValueField]};F.timezone.windows_zones&&(p.push({field:"timezone",title:d.editor.timezone,editor:e.timezonePopUp,click:u,messages:d.editor,model:t}),p.push({field:"startTimezone",title:d.editor.startTimezone,editor:e.timezone,noTimezone:d.editor.noTimezone}),p.push({field:"endTimezone",title:d.editor.endTimezone,editor:e.timezone,noTimezone:d.editor.noTimezone})),t.recurrenceId||p.push({field:"recurrenceRule",title:d.editor.repeat,editor:e.recurrence,timezone:c,messages:d.recurrenceEditor,pane:this.pane}),"description"in t&&p.push({field:"description",title:d.editor.description,editor:e.description({model:t,field:"description"})});for(i=0;i<this.options.resources.length;i++)n=this.options.resources[i],a=n.dataSource.view(),o=a.some(h),o&&(r=this.options.resources[i-1],r&&(s=r.field)),p.push({field:n.field,title:n.title,editor:n.multiple?e.multipleResources(n,t,s):e.resources(n,t,s)});return p},end:function(){return this.editable.end()},_buildDesktopEditTemplate:function(e,t,i){var n,a,o,r,s=this.options.messages,l=G({},F.Template,this.options.templateSettings),d=l.paramName,c="";for(n=0,a=t.length;n<a;n++)o=t[n],"startTimezone"===o.field&&(c+='<div class="k-popup-edit-form k-scheduler-edit-form k-scheduler-timezones" style="display:none">',c+='<div class="k-edit-form-container">',c+='<div class="k-edit-label"></div>',c+='<div class="k-edit-field"><label class="k-check"><input class="k-timezone-toggle" type="checkbox" />'+s.editor.separateTimezones+"</label></div>"),c+='<div class="k-edit-label"><label for="'+o.field+'">'+(o.title||o.field||"")+"</label></div>",!e.editable||e.editable(o.field)?(i.push(o),c+="<div "+F.attr("container-for")+'="'+o.field+'" class="k-edit-field"></div>'):(r="#:",o.field?(o=F.expr(o.field,d),r+=o+"==null?'':"+o):r+="''",r+="#",r=F.template(r,l),c+='<div class="k-edit-field">'+r(e)+"</div>"),"endTimezone"===o.field&&(c+=this._createEndTimezoneButton());return c},_buildMobileEditTemplate:function(e,t,i){var n,a,o,r,s=this.options.messages,l=G({},F.Template,this.options.templateSettings),d=l.paramName,c="";for(c+='<ul class="k-listgroup k-listgroup-flush">',n=0,a=t.length;n<a;n++)o=t[n],"timezone"!==o.field&&"recurrenceRule"!==o.field||(c+='</ul><ul class="k-listgroup k-listgroup-flush">'),"startTimezone"===o.field&&(c+='<div class="k-popup-edit-form k-scheduler-edit-form k-scheduler-timezones" style="display:none">',c+='<ul class="k-listgroup k-listgroup-flush">',c+='<li class="k-item k-listgroup-item">',c+='<label class="k-label k-listgroup-form-row">',c+='<span class="k-item-title k-listgroup-form-row">'+s.editor.separateTimezones+"</span>",c+='<span class="k-listgroup-form-field-wrapper">',c+='<input class="k-timezone-toggle" data-role="switch" type="checkbox" />',c+="</span>",c+="</label>",c+="</li>"),!e.editable||e.editable(o.field)?(c+='<li class="k-item k-listgroup-item">',c+="timezone"===o.field?'<label class="k-label k-listgroup-form-row" data-bind="css: { k-state-disabled: isAllDay }">':'<label class="k-label k-listgroup-form-row">',c+='<span class="k-item-title k-listgroup-form-field-label">'+(o.title||o.field||"")+"</span>",i.push(o),c+='<div class="k-listgroup-form-field-wrapper" '+F.attr("container-for")+'="'+o.field+'"></div>',c+="</label></li>"):(r="#:",c+='<li class="k-item k-listgroup-item">',c+='<label class="k-label k-no-click k-listgroup-form-row">',c+='<span class="k-item-title k-listgroup-form-field-label">'+(o.title||o.field||"")+"</span>",o.field?(o=F.expr(o.field,d),r+=o+"==null?'':"+o):r+="''",r+="#",r=F.template(r,l),c+='<span class="k-no-editor k-listgroup-form-field-wrapper">'+r(e)+"</span>",c+="</label></li>"),"recurrenceRule"===o.field&&(c+='</ul><ul class="k-listgroup k-listgroup-flush">'),"endTimezone"===o.field&&(c+="</ul></div>");return c+="</ul>"},_buildEditTemplate:function(e,t,i,n){var a=G({},F.Template,this.options.templateSettings),o=this.options.editable.template,r="";return o?(typeof o===j&&(o=F.unescape(o)),r+=F.template(o,a)(e)):r+=n?'<div data-role="content">'+this._buildMobileEditTemplate(e,t,i)+"</div>":this._buildDesktopEditTemplate(e,t,i),r},_createEndTimezoneButton:function(){return"</ul></div>"},_revertTimezones:function(e){e.set("startTimezone",this._startTimezone),e.set("endTimezone",this._endTimezone),delete this._startTimezone,delete this._endTimezone}}),R=E.extend({init:function(){E.fn.init.apply(this,arguments),this.pane=F.Pane.wrap(this.element,{viewEngine:{viewOptions:{renderOnInit:!0,wrap:!1,wrapInSections:!0,detachOnHide:!1,detachOnDestroy:!1}}}),this.pane.element.parent().css("height",this.options.height),this.view=this.pane.view()},options:{animations:{left:"slide",right:"slide:right"}},destroy:function(){this.close(),this.unbind(),this.pane.destroy()},_initTimezoneEditor:function(t){var n,a=this,o=a.pane,r=a.options.messages,s=a.timezoneView,l=s?s.content.find(".k-scheduler-timezones"):a.container.find(".k-scheduler-timezones"),d=l.find("input.k-timezone-toggle").data("kendoSwitch"),c=l.find("li.k-item:not(.k-zonepicker):last"),u=function(e){if("startTimezone"===e.field){var i=t.startTimezone;d.enable(i),i||(c.hide(),t.set("endTimezone",""),d.value(!1))}};a._startTimezone=t.startTimezone||"",a._endTimezone=t.endTimezone||"",s||(n='<div data-role="view" class="k-popup-edit-form k-scheduler-edit-form"><div data-role="header" class="k-header"><a href="\\#" class="k-header-cancel k-scheduler-cancel k-link" title="'+r.cancel+'"aria-label="'+r.cancel+'"><span class="k-icon k-i-arrow-chevron-left"></span></a>'+r.editor.timezoneTitle+'<a href="\\#" class="k-header-done k-scheduler-update k-link" title="'+r.save+'" aria-label="'+r.save+'"><span class="k-icon k-i-check"></span></a></div><div data-role="content"></div>',this.timezoneView=s=o.append(n),s.contentElement.append(l.show()),s.element.on(ae+ne,".k-scheduler-cancel, .k-scheduler-update",function(n){var s,l;n.preventDefault(),n.stopPropagation(),e(this).hasClass("k-scheduler-cancel")&&a._revertTimezones(t),s=a._editPane,l=i(t,r.editor.noTimezone),s.content.find(".k-timezone-label").text(l),o.navigate(s,a.options.animations.right)}),d.bind(ce,function(e){c.toggle(e.checked),t.set("endTimezone","")}),t.bind(ce,u)),d.value(!!t.endTimezone),d.enable(!!t.startTimezone),t.endTimezone?c.show():c.hide(),o.navigate(s,a.options.animations.left)},showDialog:function(t){var i=t.buttons.map(function(e){return{text:e.text,action:e.click}});i.push({text:this.options.messages.cancel,
primary:!0}),e("<div />").appendTo(document.body).kendoDialog({close:function(){this.destroy()},modal:{preventScroll:!0},closable:!1,title:!1,content:t.text,actions:i})},editEvent:function(t){var i,n,a,o,r,s,l,d=this.pane,c="",u=this.options.messages,p=u.save,h=u.destroy,f=u.cancel,v=u.editor.editorTitle,m=u.resetSeries;return c+='<div data-role="view" class="k-popup-edit-form k-scheduler-edit-form"'+F.attr("uid")+'="'+t.uid+'"><div data-role="header" class="k-header"><a href="\\#" class="k-header-cancel k-scheduler-cancel k-link" title="'+f+'"aria-label="'+f+'"><span class="k-icon k-i-arrow-chevron-left"></span></a>'+v+'<a href="\\#" class="k-header-done k-scheduler-update k-link" title="'+p+'" aria-label="'+p+'"><span class="k-icon k-i-check"></span></a></div>',i=this.fields(x.mobile,t),n=this,a=[],c+=this._buildEditTemplate(t,i,a,!0),c+="</div>",o=d.append(c),!t.isNew()&&this.options.editable&&this.options.editable.destroy!==!1&&t.isRecurrenceHead()&&t.recurrenceException&&(r='<ul class="k-edit-buttons k-listgroup k-listgroup-flush"><li class="k-item k-listgroup-item"><span class="k-scheduler-resetSeries k-link k-label" aria-label="'+m+'">'+m+"</span></li></ul>",o.contentElement.append(r)),!t.isNew()&&this.options.editable&&this.options.editable.destroy!==!1&&(s='<ul class="k-edit-buttons k-listgroup k-listgroup-flush"><li class="k-item k-listgroup-item"><span class="k-scheduler-delete k-link k-label" aria-label="'+h+'">'+h+"</span></li></ul>",o.contentElement.append(s)),this._editPane=o,l=this.container=o.element,this.editable=l.kendoEditable({fields:a,model:t,clearContainer:!1,target:n.options.target,validateOnBlur:!0}).data("kendoEditable"),this.trigger("edit",{container:l,model:t})?this.trigger("cancel",{container:l,model:t}):(l.on(ae+ne,"a.k-scheduler-edit, a.k-scheduler-cancel, a.k-scheduler-update, span.k-scheduler-delete, span.k-scheduler-resetSeries",function(i){var a,o;i.preventDefault(),i.stopPropagation(),a=e(this),a.hasClass("k-scheduler-edit")?d.navigate(this._editPane,n.options.animations.right):(o="cancel",a.hasClass("k-scheduler-update")?o="save":a.hasClass("k-scheduler-delete")?o="remove":a.hasClass("k-scheduler-resetSeries")&&(o=ve),n.trigger(o,{container:l,model:t}))}),d.navigate(o,n.options.animations.left),t.bind(ce,n.toggleDateValidationHandler)),this.editable},_views:function(){return this.pane.element.find(F.roleSelector("view")).not(this.view.element)},close:function(){var e,t,i,n;if(this.container){for(this.pane.navigate("",this.options.animations.right),e=this._views(),i=0,n=e.length;i<n;i++)t=e.eq(i).data("kendoView"),t&&t.purge();e.remove(),this.container=null,this.editable&&(this.editable.options.model.unbind(ce,this.toggleDateValidationHandler),this.editable.destroy(),this.editable=null),this.timezoneView=null}}}),C=E.extend({destroy:function(){this.close(),this.unbind()},editEvent:function(t){var i,n,a,o=this,r=o.options.editable,s="<div "+F.attr("uid")+'="'+t.uid+'" class="k-popup-edit-form k-scheduler-edit-form"><div class="k-edit-form-container">',l=o.options.messages,d=l.save,c=l.cancel,u=l.destroy,p=l.resetSeries,h=this.fields(x.desktop,t),f=[];return s+=this._buildEditTemplate(t,h,f,!1),n=Z(r)?r.window:{},s+='<div class="k-edit-buttons k-state-default">',s+=this.createButton({name:"update",text:d,attr:i})+this.createButton({name:"canceledit",text:c,attr:i}),!t.isNew()&&r.destroy!==!1&&t.isRecurrenceHead()&&t.recurrenceException&&(s+=this.createButton({name:"resetSeries",text:p,attr:i})),t.isNew()&&!t.isRecurring()||r.destroy===!1||(s+=this.createButton({name:"delete",text:u,attr:i})),s+="</div></div></div>",a=this.container=e(s).appendTo(o.element).eq(0).kendoWindow(G({modal:!0,resizable:!1,draggable:!0,title:l.editor.editorTitle,visible:!1,close:function(e){e.userTriggered&&o.trigger(he,{container:a,model:t})&&e.preventDefault()}},n)),o.editable=a.kendoEditable({fields:f,model:t,clearContainer:!1,validateOnBlur:!0,target:o.options.target}).data("kendoEditable"),o.trigger(_e,{container:a,model:t})?o.trigger(he,{container:a,model:t}):(a.data("kendoWindow").center().open(),a.on(ae+ne,"button.k-scheduler-cancel",function(e){e.preventDefault(),e.stopPropagation(),o.trigger(he,{container:a,model:t})}),a.on(ae+ne,"button.k-scheduler-update",function(e){e.preventDefault(),e.stopPropagation(),o.trigger("save",{container:a,model:t})}),a.on(ae+ne,"button.k-scheduler-delete",function(e){e.preventDefault(),e.stopPropagation(),o.trigger(fe,{container:a,model:t})}),a.on(ae+ne,"button.k-scheduler-resetSeries",function(e){e.preventDefault(),e.stopPropagation(),o.trigger(ve,{container:a,model:t})}),F.cycleForm(a),t.bind(ce,o.toggleDateValidationHandler)),o.editable},close:function(){var e=this,t=function(){e.editable&&(e.editable.options.model.unbind(ce,e.toggleDateValidationHandler),e.editable.destroy(),e.editable=null,e.container=null),e.popup&&(e.popup.destroy(),e.popup=null)};e.editable?(e._timezonePopup&&e._timezonePopup.data("kendoWindow")&&(e._timezonePopup.data("kendoWindow").destroy(),e._timezonePopup=null),e.container.is(":visible")?e.container.data("kendoWindow").bind("deactivate",t).close():t()):t()},_createEndTimezoneButton:function(){var e=this.options.messages,t="";return t+='<div class="k-edit-buttons k-state-default">',t+=this.createButton({name:"savetimezone",text:e.save})+this.createButton({name:"canceltimezone",text:e.cancel}),t+="</div></div></div>"},showDialog:function(t){var i,n,a,o=F.format("<div class='k-popup-edit-form'><div class='k-edit-form-container'><p class='k-popup-message'>{0}</p>",t.text);for(o+='<div class="k-edit-buttons k-state-default">',i=0;i<t.buttons.length;i++)o+=this.createButton(t.buttons[i]);o+="</div></div></div>",n=this.element,this.popup&&this.popup.destroy(),a=this.popup=e(o).appendTo(n).eq(0).on(ae,".k-button",function(i){i.preventDefault(),a.close();var n=e(i.currentTarget).index();t.buttons[n].click()}).kendoWindow({modal:!0,resizable:!1,draggable:!1,title:t.title,visible:!1,close:function(){this.destroy(),n.focus()}}).getKendoWindow(),a.center().open()},_initTimezoneEditor:function(e,t){var i,n=this,a=n.container.find(".k-scheduler-timezones"),o=a.find("input.k-timezone-toggle"),r=a.find(".k-edit-label:last").add(a.find(".k-edit-field:last")),s=a.find(".k-scheduler-savetimezone"),l=a.find(".k-scheduler-canceltimezone"),d=n._timezonePopup,c=function(t){if("startTimezone"===t.field){var i=e.startTimezone;o.prop(ke,!i),i||(r.hide(),e.set("endTimezone",""),o.prop("checked",!1))}};n._startTimezone=e.startTimezone,n._endTimezone=e.endTimezone,d||(n._timezonePopup=d=a.kendoWindow({modal:!0,resizable:!1,draggable:!0,title:n.options.messages.editor.timezoneEditorTitle,visible:!1,close:function(i){e.unbind(ce,c),i.userTriggered&&n._revertTimezones(e),t&&t.focus()}}),o.click(function(){r.toggle(o.prop("checked")),e.set("endTimezone","")}),s.click(function(e){e.preventDefault(),i.close()}),l.click(function(t){t.preventDefault(),n._revertTimezones(e),i.close()}),e.bind(ce,c)),o.prop("checked",e.endTimezone).prop(ke,!e.startTimezone),e.endTimezone?r.show():r.hide(),i=d.data("kendoWindow"),i.center().open()}}),V=$.extend({init:function(t,i){var n=this;Y.fn.init.call(n,t,i),n.options.views&&n.options.views.length||(n.options.views=["day","week"]),n.resources=[],n._initModel(),n._wrapper(),n._views(),n._toolbar(),n._dataSource(),n._resources(),n._resizeHandler=function(){n.resize()},n.wrapper.on(oe+ne+" selectstart"+ne,function(t){e(t.target).is(":kendoFocusable")||t.preventDefault()}),n.options.editable&&n.options.editable.resize!==!1&&n._resizable(),n._movable(),n._bindResize(),n.options.messages&&n.options.messages.recurrence&&(K.options=n.options.messages.recurrence),n._selectable(),n._touchHandlers(),n._ariaId=F.guid(),n._createEditor()},_bindResize:function(){e(window).on("resize"+ne,this._resizeHandler)},_unbindResize:function(){e(window).off("resize"+ne,this._resizeHandler)},dataItems:function(){var i,n,a,o,r,s=this,l=s.items(),d=s._data,c=e.map(l,function(t){return e(t).attr("data-uid")}),u={},p=c.length;for(i=0;i<p;i++)u[c[i]]=null;for(a=d.length,i=0;i<a;i++)o=d[i],u[o.uid]!==t&&(u[o.uid]=o);r=[];for(n in u)r.push(u[n]);return r},_isMobile:function(){var e=this.options;return e.mobile===!0&&F.support.mobileOS||"phone"===e.mobile||"tablet"===e.mobile},_isTouch:function(e){return/touch/.test(e.type)||e.originalEvent&&/touch/.test(e.originalEvent.pointerType)},_isInverseColor:function(e){return e.hasClass(Te)},_groupsByResource:function(e,t,i,n,a){var o,r,s,l,d,c,u;if(i||(i=[]),o=e[0]){for(s=o.dataSource.view(),l=0,d=0;d<s.length;d++)c=F.getter(o.dataValueField)(s[d]),u=t+l+d,r=this._groupsByResource(e.slice(1),u,i,c,o.field),r[o.field]=c,l=r.groupIndex,a&&n&&(r[a]=n),1===e.length&&(r.groupIndex=t+d,i.push(r));return r}return{}},data:function(){return this._data},select:function(i){var n,a,o,r,s,l,d,c,u,p,h=this,f=h.view(),v=h._selection,m=f.groups;if(i===t)return o=f._selectedSlots,v?(v&&v.events&&(a=h._selectedEvents()),{start:v.start,end:v.end,events:a,slots:o,resources:f._resourceBySlot(v)}):[];if(!i)return h._selection=null,h._old=null,f.clearSelection(),t;if(e.isArray(i)&&(i={events:i.splice(0)}),i.resources){s=[],l=[],f.groupedResources&&h._groupsByResource(f.groupedResources,0,l);for(r in i.resources)s.push({field:r,operator:"eq",value:i.resources[r]});n=new F.data.Query(l).filter(s).toArray()}return i.events&&i.events.length?(h._selectEvents(i.events,n),h._select(),t):(m&&i.start&&i.end&&(d=N(f._startDate),c=F.date.addDays(N(f._endDate),1),i.start<c&&d<=i.end&&(u=n&&n.length?m[n[0].groupIndex]:m[0],u.timeSlotCollectionCount()||(i.isAllDay=!0),p=u.ranges(i.start,i.end,i.isAllDay,!1),p.length&&(h._selection={start:F.timezone.toLocalDate(p[0].start.start),end:F.timezone.toLocalDate(p[p.length-1].end.end),groupIndex:p[0].start.groupIndex,index:p[0].start.index,isAllDay:p[0].start.isDaySlot,events:[]},h._select()))),t)},_selectEvents:function(e,t){var i,n,a,o,r,s,l,d,c=this,u=c.view(),p=u.groups,h=e.length,f=t&&t.length,v=c._ctrlKey;for(c._ctrlKey=!0,i=0;i<h;i++)if(p&&f){for(n=p[t[0].groupIndex],a=[],o=n.timeSlotCollectionCount(),r=n.daySlotCollectionCount(),s=0;s<o;s++)a=a.concat(n.getTimeSlotCollection(s).events());for(l=0;l<r;l++)a=a.concat(n.getDaySlotCollection(l).events());a=new F.data.Query(a).filter({field:"element[0].getAttribute('data-uid')",operator:"eq",value:e[i]}).toArray(),a[0]&&c._createSelection(a[0].element)}else d=u.element.find(F.format(".k-event[data-uid={0}], .k-task[data-uid={0}]",e[i])),d.length&&c._createSelection(d[0]);c._ctrlKey=v},_touchHandlers:function(){var t,i,n,a,o,r=this,s=r.wrapper,l=e.proxy(r._touchMove,r);s.on(re+ne,".k-scheduler-header-all-day td, .k-scheduler-content td, .k-event",function(e){var n=r.wrapper.find(".k-scheduler-content");r._isTouch(e)&&(n.stop(!0,!1),r._touchPosX=t=r._tapPosition(e,"X"),r._touchPosY=i=r._tapPosition(e,"Y"),r._userTouched=!0,r.view()._scrolling=!1,o=Date.now(),s.on(se+ne,".k-scheduler-header-all-day td, .k-scheduler-content td, .k-event",l))}),s.on(le+ne,".k-scheduler-header-all-day td, .k-scheduler-content td, .k-event",function(e){var d,c,u;r._isTouch(e)&&(d=Date.now()-o,c=r.wrapper.find(".k-scheduler-content"),u=-r._amplitude*(3e3/d),n=r._tapPosition(e,"X"),a=r._tapPosition(e,"Y"),r._dragging||(r.options.selectable&&(Math.abs(n-t)<=10||Math.abs(a-i)<=10)&&r._mouseDownSelection(e),!F.support.kineticScrollNeeded&&d<200&&Math.abs(n-t)>10&&c.animate({scrollTop:c[0].scrollTop+u}),s.off(se+ne,".k-scheduler-header-all-day td, .k-scheduler-content td",l)))})},_selectable:function(){var t,i=this,n=i.wrapper;i.options.selectable&&(i._tabindex(),n.on(oe+ne,".k-scheduler-header-all-day td, .k-scheduler-content td, .k-event, .k-scheduler-body td .k-link",function(e){i._isTouch(e)||i._mouseDownSelection(e)}),t=e.proxy(i._mouseMove,i),n.on(oe+ne,".k-scheduler-header-all-day td, .k-scheduler-content td",function(e){var a=e.which,o=e.button,r=a&&3===a||o&&2==o;i._isTouch(e)||r||n.on(de+ne,".k-scheduler-header-all-day td, .k-scheduler-content td",t)}),n.on("mouseup"+ne+" mousecancel"+ne,function(){n.off(de+ne,".k-scheduler-header-all-day td, .k-scheduler-content td",t)}),n.on("focus"+ne,function(){i._selection||i._userTouched||i._selectFirstSlot(),i._select()}),n.on("focusout"+ne,function(t){i._ctrlKey=i._shiftKey=!1,e(t.relatedTarget).closest(ze).length||i.toolbar.find(ze).removeClass(ye)}),n.on("keydown"+ne,ee(i._keydown,i)),n.on("keyup"+ne,function(e){i._ctrlKey=e.ctrlKey,i._shiftKey=e.shiftKey}))},_mouseDownSelection:function(e){var t=e.which,i=e.button,n=t&&3===t||i&&2==i;n||(e.ctrlKey&&(this._ctrlKey=e.ctrlKey),e.shiftKey&&(this._shiftKey=e.shiftKey),this._createSelection(e.currentTarget)),F._activeElement()!==this.wrapper.get(0)?F.focusElement(this.wrapper):this._select(),this.toolbar&&this.toolbar.find("."+we).removeClass(we)},_selectFirstSlot:function(){var e=this.wrapper.find(".k-scheduler-content").find("td:first")||this.wrapper.find(".k-scheduler-body").find(".k-link:first");this._createSelection(e)},_select:function(){var t,i,n,a,o,r=this,s=r.view(),l=r.wrapper,d=s.current(),c=r._selection,u=r._old?r._old.selection:null,p=r._old?r._old.eventsLength:null;if(c&&(d&&(d.removeAttribute("id"),d.removeAttribute("aria-label"),l.removeAttr("aria-activedescendant")),s.select(c),d=s.current(),d&&(u!==d||c.events&&p!==c.events.length))){if(t=e(d).data("uid"),r._old&&t&&t===e(r._old.selection).data("uid")&&c.events&&r._old.eventsLength===c.events.length)return;n=c,a=r._selectedEvents(),o=s._selectedSlots,a[0]?(n=a[0]||c,i=F.format(r.options.messages.ariaEventLabel,n.title,n.start,n.start)):i=F.format(r.options.messages.ariaSlotLabel,n.start,n.end),d.setAttribute("id",r._ariaId),d.setAttribute("aria-label",i),l.attr("aria-activedescendant",r._ariaId),r._old={selection:d,eventsLength:a.length},r.trigger(ce,{start:c.start,end:c.end,events:a,slots:o,resources:s._resourceBySlot(c)})}},_selectedEvents:function(){for(var e,t=this._selection.events,i=t.length,n=0,a=[];n<i;n++)e=this.occurrenceByUid(t[n]),e&&a.push(e);return a},_tapPosition:function(e,t){return/touch/.test(e.type)?(e.originalEvent||e).changedTouches[0]["page"+t]:e["page"+t]},_touchMove:function(e){var t=this,i=t.wrapper.find(".k-scheduler-content"),n=i[0].scrollHeight>i[0].clientHeight,a=i[0].scrollWidth>i[0].clientWidth,o=t._tapPosition(e,"Y"),r=t._tapPosition(e,"X"),s=i[0].scrollTop-Math.round(o-t._touchPosY),l=i[0].scrollLeft-Math.round(r-t._touchPosX),d=n&&Math.abs(o-t._touchPosY)>10,c=a&&Math.abs(o-t._touchPosY)>10;t._dragging||F.support.kineticScrollNeeded||!t._isTouch(e)||(d||c)&&(t._amplitude=Math.round(o-t._touchPosY),t._touchPosY=o,t._touchPosX=r,i.animate({scrollTop:s,scrollLeft:l},0),t.view()._scrolling=!0)},_mouseMove:function(t){var i=this;clearTimeout(i._moveTimer),i._isTouch(t)||(i._moveTimer=setTimeout(function(){var n,a,o,r=i.view(),s=i._selection;s&&(n=r.selectionByElement(e(t.currentTarget)),n&&s.groupIndex===n.groupIndex&&(a=n.startDate(),o=n.endDate(),a>=s.end?s.backward=!1:o<=s.start&&(s.backward=!0),s.backward?s.start=a:s.end=o,i._select()))},5))},_viewByIndex:function(e){var t,i=this.views;for(t in i){if(!e)return t;e--}},_keydown:function(i){var n,a,o,r,s,l=this,d=i.keyCode,c=l.view(),u=c.options.editable,p=l._selection,h=e.extend(p),f=16===d||18===d||17===d||91===d||92===d,v="> .k-button,.k-scheduler-navigation > .k-button,.k-nav-current,.k-views-dropdown:visible,.k-scheduler-views > .k-button",m=l.toolbar.find(v),g=l.toolbar.find(ze),_=e(i.target).closest(ze).length||l.toolbar.find(".k-scheduler-views .k-state-focused").length,k=g.children().index(l.toolbar.find("."+we)),b=F.support.isRtl(l.element),w=e(i.target).is(".k-views-dropdown"),y=b?-1:1;if(k==-1&&(k=g.children().index(l.toolbar.find(".k-state-selected"))),l._ctrlKey=i.ctrlKey,l._shiftKey=i.shiftKey,d===U.F10)return l._focusToolbar(),i.preventDefault(),t;if(d===U.TAB){if(l.toolbar.find("."+we).length)return n=m.index(l.toolbar.find("."+we)),a=i.shiftKey?m[n-1]:m[n+1],l.toolbar.find("."+we).removeClass(we),a?(e(a).addClass(we).focus(),l._focusedView=null,i.preventDefault(),t):(l.element.focus(),i.preventDefault(),t)}else if(d===U.ENTER||d===U.SPACEBAR){if(_&&l._focusedView&&!l._focusedView.hasClass("k-state-selected"))return o=l._focusedView.data().name,l.trigger("navigate",{view:o,action:"changeView",date:l.date()})||l.view(o),i.preventDefault(),t;if(l.toolbar.find("."+we+":visible").length)return l.toolbar.find("."+we+":visible").click(),i.preventDefault(),t}else if(i.altKey&&d===U.DOWN&&!w){if(l.toolbar.find("."+we+":visible").length)return l.toolbar.find("."+we+":visible").click(),i.preventDefault(),t}else{if(d===U.RIGHT&&_)return e(l.toolbar.find("."+we)).removeClass(we),l._focusedView=e(b?k-1===0?g.children(":last"):g.children()[k+1*y]:k+1===g.children().length?g.children(":first"):g.children()[k+1*y]),l._focusedView.focus().addClass(we),i.preventDefault(),t;if(d===U.LEFT&&_)return e(l.toolbar.find("."+we)).removeClass(we),l._focusedView=e(b?k+1===g.children().length?g.children(":first"):g.children()[k-1*y]:k-1<0?g.children(":last"):g.children()[k-1*y]),l._focusedView.focus().addClass(we),i.preventDefault(),t;if(i.altKey&&d===U.DOWN&&l.toolbar.find(".k-nav-current").hasClass(we))return l._showCalendar(),i.preventDefault(),t;if(i.altKey&&d===U.DOWN&&w)return;if(d===U.ESC&&l.popup&&l.popup.visible())return l.popup.close(),i.preventDefault(),t}if(!f){if(!p)return l._selectFirstSlot(),l._select(),l.element.focus(),t;if("year"===l._selectedViewName)return c.move(p,d)&&(l.toolbar.find("."+we).removeClass(we),l._select()),p&&l._adjustSelectedDate(),i.preventDefault(),t;if(d===U.TAB){if(!c.moveToEvent(p,i.shiftKey))return l._focusToolbar(),i.preventDefault(),t;l._select(),document.activeElement.getAttribute("id")!==l.element.attr("id")&&l.element.focus(),i.preventDefault()}else d===U.ENTER||d===U.SPACEBAR?p.events.length&&u?u.update!==!1&&l.editEvent(p.events[0]):u&&u.create!==!1&&(p.isAllDay&&(p=e.extend({},p,{end:F.date.addDays(p.end,-1)})),i.preventDefault(),l.addEvent(G({},p,c._resourceBySlot(p)))):d===U.DELETE&&u!==!1&&u.destroy!==!1?l.removeEvent(p.events[0]):d>=49&&d<=57?(r=l._viewByIndex(d-49),r&&!l.trigger("navigate",{view:r,action:"changeView",date:l.date()})&&l.view(r)):c.move(p,d,i.shiftKey)&&(c.inRange(p)?(l._select(),e(document.activeElement).blur(),l.toolbar.find("."+we).removeClass(we),l.wrapper.focus()):(s=l.date().getTime()>p.start.getTime()?"previous":"next",l.trigger("navigate",{view:l._selectedViewName,action:s,date:p.start})?(p.start=h.start,p.end=h.end):l.date(p.start)),i.preventDefault());l._adjustSelectedDate()}},_focusToolbar:function(){this.toolbar.find(".k-button:first").focus().addClass(we)},_createSelection:function(t){var i,n,a=this._selection;t=e(t),t.is(".k-event")&&(i=t.attr(F.attr("uid")),a&&a.events.indexOf(i)!==-1&&!this._ctrlKey)||(a&&(this._ctrlKey||this._shiftKey)||(a=this._selection={events:[],groupIndex:0}),n=this.view().selectionByElement(t),n&&(a.groupIndex=n.groupIndex||0),i&&(n=d(this._data,i)),n&&n.uid&&(i=[n.uid]),this._updateSelection(n,i),this._adjustSelectedDate())},_updateSelection:function(e,i,n){var a,o,r,s=this._selection;e&&s&&(a=this.view(),e.uid&&(e=a._updateEventForSelection(e)),this._shiftKey&&s.start&&s.end?(o=e.end<s.end,s.end=e.endDate?e.endDate():e.end,o&&a._timeSlotInterval&&F.date.setTime(s.end,-a._timeSlotInterval())):(s.start=e.startDate?e.startDate():e.start,s.end=e.endDate?e.endDate():e.end),s.isAllDay="isDaySlot"in e?e.isDaySlot:e.isAllDay,null!==n&&n!==t&&(s.groupIndex=n),s.index=e.index,this._ctrlKey?(r=i&&i.length?s.events.indexOf(i[0]):-1,r>-1?s.events.splice(r,1):s.events=s.events.concat(i||[])):s.events=i||[])},options:{name:"Scheduler",date:Se,editable:!0,autoBind:!0,snap:!0,mobile:!1,timezone:"",allDaySlot:!0,min:new Date(1900,0,1),max:new Date(2099,11,31),toolbar:null,workWeekStart:1,workWeekEnd:5,workDays:null,showWorkHours:!1,startTime:Se,endTime:Se,currentTimeMarker:{updateInterval:1e4,useLocalTimezone:!0},footer:{},messages:{today:"Today",pdf:"Export to PDF",save:"Save",cancel:"Cancel",destroy:"Delete",resetSeries:"Reset Series",deleteWindowTitle:"Delete event",next:"Next",previous:"Previous",ariaSlotLabel:"Selected from {0:t} to {1:t}",ariaEventLabel:"{0} on {1:D} at {2:t}",search:"Search...",views:{day:"Day",week:"Week",workWeek:"Work Week",agenda:"Agenda",month:"Month",timeline:"Timeline",timelineWeek:"Timeline Week",timelineWorkWeek:"Timeline Work Week",timelineMonth:"Timeline Month",year:"Year"},recurrenceMessages:{deleteWindowTitle:"Delete Recurring Item",resetSeriesWindowTitle:"Reset Series",deleteWindowOccurrence:"Delete current occurrence",deleteWindowSeries:"Delete the series",editWindowTitle:"Edit Recurring Item",editWindowOccurrence:"Edit current occurrence",editWindowSeries:"Edit the series"},editable:{confirmation:Ce},editor:{title:"Title",start:"Start",end:"End",allDayEvent:"All day event",description:"Description",repeat:"Repeat",timezone:"Timezone",startTimezone:"Start timezone",endTimezone:"End timezone",separateTimezones:"Use separate start and end time zones",timezoneEditorTitle:"Timezones",timezoneEditorButton:"Time zone",timezoneTitle:"Time zones",noTimezone:"No timezone",editorTitle:"Event"}},height:null,width:null,resources:[],group:{resources:[],orientation:"horizontal"},views:[],selectable:!1},events:[fe,_e,he,me,"add","dataBinding","dataBound","moveStart","move","moveEnd","resizeStart","resize","resizeEnd","navigate",ce],destroy:function(){var t,i,n,a=this;if(Y.fn.destroy.call(a),a.dataSource&&(a.dataSource.unbind(ce,a._refreshHandler),a.dataSource.unbind(ue,a._progressHandler),a.dataSource.unbind(pe,a._errorHandler)),a._resourceRefreshHandler)for(i=0;i<a.resources.length;i++)n=a.resources[i].dataSource,n.unbind(ce,a._resourceRefreshHandler),n.unbind(ue,a._resourceProgressHandler),n.unbind(pe,a._resourceErrorHandler);a.calendar&&(a.calendar.destroy(),a.popup.destroy()),a.view()&&a.view().destroy(),a._editor&&a._editor.destroy(),this._moveDraggable&&this._moveDraggable.destroy(),this._resizeDraggable&&this._resizeDraggable.destroy(),t=a.element.add(a.wrapper).add(a.toolbar).add(a.popup),t.off(ne),clearTimeout(a._moveTimer),a._model=null,a.toolbar=null,a.element=null,e(window).off("resize"+ne,a._resizeHandler),F.destroy(a.wrapper)},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.options.autoBind&&e.fetch?e.fetch():ie(e)&&this.view(this._selectedView)},items:function(){var e=this.wrapper.find(".k-scheduler-content"),t=this.view();return t&&"agenda"===t.options.name?e.find(".k-task"):e.find(".k-event").add(this.wrapper.find(".k-scheduler-header-wrap").find(".k-scheduler-header-all-day").siblings())},_movable:function(){var i,n,a,o,r,s,l,d,c,u,p=this,h=0,f=[],v=[],m=p._isMobile(),g=p.options.editable&&p.options.editable.move!==!1,_=p.options.editable&&p.options.editable.resize!==!1;(g||_&&m)&&(p._dragging=!1,m&&F.support.mobileOS.android&&(h=5),p._moveDraggable=new F.ui.Draggable(p.element,{distance:h,filter:".k-event",ignore:".k-resize-handle",holdToDrag:m,autoScroll:!0}),g&&p._moveDraggable.bind("dragstart",function(e){var r,h,v,m,g=p.view(),_=e.currentTarget,k=p._isTouch(e);if(p._dragging=!0,!g.options.editable||g.options.editable.move===!1)return p._dragging=!1,e.preventDefault(),t;if(k&&!_.hasClass("k-event-active"))return p._dragging=!1,p.element.find(".k-event-active").removeClass("k-event-active"),e.preventDefault(),t;if(s=p.occurrenceByUid(_.attr(F.attr("uid"))),l=s.clone(),u=s.clone(),l.update(g._eventOptionsForMove(l)),l.inverseColor=p._isInverseColor(_),f=[],p._selection)for(r=p._selection.events,h=0;h<r.length;h++)v=p.occurrenceByUid(r[h]).clone(),m=this.element.find('div.k-event[data-uid="'+v.uid+'"]').eq(0),v.update(g._eventOptionsForMove(v)),m.length&&(v.inverseColor=p._isInverseColor(m)),f.push(v);else f.push(l);i=g._slotByPosition(e.x.startLocation,e.y.startLocation),a=g._resourceBySlot(i),c=o=i.startOffset(e.x.startLocation,e.y.startLocation,p.options.snap),n=i,d=i,i&&!p.trigger("moveStart",{event:s})||e.preventDefault()}).bind("drag",function(t){var a,u,h,m,g,_=p.view(),k=_._slotByPosition(t.x.location,t.y.location);if(k){if(r=k.startOffset(t.x.location,t.y.location,p.options.snap),k.isDaySlot!==i.isDaySlot)if(k.isDaySlot!==d.isDaySlot)for(m=e(i.element).index(),g=e(k.element).parent().children().eq(m),i=_._slotByPosition(g.offset().left,g.offset().top),o=i.startOffset(t.x.location,t.y.location,!0),v=f.map(function(e){return e.clone()}),h=0;h<f.length;h++)f[h].isAllDay!=k.isDaySlot&&(f[h].isAllDay=k.isDaySlot,f[h].end=F.date.getDate(f[h].start),f[h].start=F.date.getDate(f[h].start),k.isDaySlot||(F.date.setTime(f[h].start,F.date.getMilliseconds(_.startTime())),F.date.setTime(f[h].end,F.date.getMilliseconds(_.startTime())+_._timeSlotInterval())));else i=e.extend(!0,{},d),o=c,f=v;for(a=r-o,h=0;h<f.length;h++)_._updateMoveHint(f[h],k.groupIndex,a);if(u=D(l,a),p.trigger("move",{event:s,slot:{element:k.element,start:k.startDate(),end:k.endDate(),isDaySlot:k.isDaySlot},resources:_._resourceBySlot(k),start:u.start,end:u.end}))for(h=0;h<f.length;h++)_._updateMoveHint(f[h],k.groupIndex,a);else n=k}}).bind("dragend",function(t){var i,c,u,h,m,g,_,k,b,w;if(p.view()._removeMoveHint(),i=r-o,c=D(l,i),u=c.start,h=c.end,p._dragging=!1,m=p.view()._resourceBySlot(n),g=p.trigger("moveEnd",{event:s,slot:{element:n.element,start:n.startDate(),end:n.endDate()},start:u,end:h,resources:m}),!g&&(s.start.getTime()!==u.getTime()||s.end.getTime()!==h.getTime()||d.isDaySlot!==n.isDaySlot||F.stringify(m)!==F.stringify(a))){for(p._isMultiDrag=f.length>1,_=0;_<f.length;_++)k=f[_],c=D(k,i),b=p.view()._eventOptionsForMove(k),w=e.extend({isAllDay:k.isAllDay,start:c.start,end:c.end},b,m),p._updateEvent(null,k,w);p._isMultiDrag&&(p.dataSource.sync(),p._isMultiDrag=!1)}t.currentTarget.removeClass("k-event-active"),this.cancelHold(),f=[],v=[]}).bind("dragcancel",function(){p.view()._removeMoveHint(),this.cancelHold(),f=[],v=[]}),p._moveDraggable.bind("hold",function(e){p._isTouch(e)&&(p.element.find(".k-event-active").removeClass("k-event-active"),p.options.selectable&&p._createSelection(e.currentTarget),e.currentTarget.addClass("k-event-active"))}))},_resizable:function(){function t(e){var t,i={"k-resize-e":"east","k-resize-w":"west","k-resize-n":"north","k-resize-s":"south"};for(t in i)if(e.hasClass(t))return i[t]}var i,n,a,o,r,s=this,l=0;s._isMobile()&&F.support.mobileOS.android&&(l=5),s._resizeDraggable=new F.ui.Draggable(s.element,{distance:l,filter:".k-resize-handle",autoScroll:!0,dragstart:function(t){var l=e(t.currentTarget),d=l.closest(".k-event"),c=d.attr(F.attr("uid")),u=s.view();s._dragging=!0,a=s.occurrenceByUid(c),o=a.clone(),u._updateEventForResize(o),r=u._slotByPosition(t.x.startLocation,t.y.startLocation),s.trigger("resizeStart",{event:a})&&t.preventDefault(),i=F.date.toUtcTime(o.start),n=F.date.toUtcTime(o.end)},drag:function(l){var d,c,u,p,h,f;r&&(d=e(l.currentTarget),c=t(d),u=s.view(),p=u._slotByPosition(l.x.location,l.y.location),p&&r.groupIndex==p.groupIndex&&(r=p,h=i,f=n,"south"==c?!r.isDaySlot&&r.end-F.date.toUtcTime(o.start)>=u._timeSlotInterval()&&(n=o.isAllDay?r.startOffset(l.x.location,l.y.location,s.options.snap):r.endOffset(l.x.location,l.y.location,s.options.snap)):"north"==c?!r.isDaySlot&&F.date.toUtcTime(o.end)-r.start>=u._timeSlotInterval()&&(i=r.startOffset(l.x.location,l.y.location,s.options.snap)):"east"==c?r.isDaySlot&&F.date.toUtcTime(F.date.getDate(r.endDate()))>=F.date.toUtcTime(F.date.getDate(o.start))?n=o.isAllDay?r.startOffset(l.x.location,l.y.location,s.options.snap):r.endOffset(l.x.location,l.y.location,s.options.snap):!r.isDaySlot&&r.end-F.date.toUtcTime(o.start)>=u._timeSlotInterval()&&(n=r.endOffset(l.x.location,l.y.location,s.options.snap)):"west"==c&&(r.isDaySlot&&F.date.toUtcTime(F.date.getDate(o.end))>=F.date.toUtcTime(F.date.getDate(r.startDate()))?i=r.startOffset(l.x.location,l.y.location,s.options.snap):!r.isDaySlot&&F.date.toUtcTime(o.end)-r.start>=u._timeSlotInterval()&&(i=r.startOffset(l.x.location,l.y.location,s.options.snap))),s.trigger("resize",{event:a,slot:{element:r.element,start:r.startDate(),end:r.endDate()},start:F.timezone.toLocalDate(i),end:F.timezone.toLocalDate(n),resources:u._resourceBySlot(r)})?(i=h,n=f):u._updateResizeHint(o,r.groupIndex,i,n)))},dragend:function(l){var d,c=e(l.currentTarget),u=new Date(o.start.getTime()),p=new Date(o.end.getTime()),h=t(c);s._dragging=!1,s.view()._removeResizeHint(),"south"==h?p=F.timezone.toLocalDate(n):"north"==h?u=F.timezone.toLocalDate(i):"east"==h?p=r.isDaySlot?F.date.getDate(F.timezone.toLocalDate(n)):F.timezone.toLocalDate(n):"west"==h&&(r.isDaySlot?(u=new Date(F.timezone.toLocalDate(i)),u.setHours(0),u.setMinutes(0)):u=F.timezone.toLocalDate(i)),d=s.trigger("resizeEnd",{event:a,slot:{element:r.element,start:r.startDate(),end:r.endDate()},start:u,end:p,resources:s.view()._resourceBySlot(r)}),!d&&p.getTime()>=u.getTime()&&(o.start.getTime()==u.getTime()&&o.end.getTime()==p.getTime()||(s.view()._updateEventForResize(a),s._updateEvent(h,a,{start:u,end:p}))),r=null,a=null},dragcancel:function(){s._dragging=!1,s.view()._removeResizeHint(),r=null,a=null}})},_updateEvent:function(e,t,i){var n,a=this,o=function(t,n){var o;try{a._preventRefresh=!0,t.update(i),a._convertDates(t),o=t.start,e&&t.duration()%W===0&&0===o.getHours()&&0===o.getMinutes()&&0===o.getSeconds()&&0===o.getMilliseconds()&&t.set("isAllDay",!0)}finally{a._preventRefresh=!1}a.trigger(me,{event:t})||(n&&n(),a._isMultiDrag||a.dataSource.sync())},r=function(e){return e.recurrenceRule?a.dataSource.getByUid(e.uid):a.dataSource.get(e.recurrenceId)},s=function(){var n,s,l=r(t);"south"!=e&&"north"!=e||(i.start&&(n=F.date.getDate(l.start),F.date.setTime(n,L(i.start)),i.start=n),i.end&&(s=F.date.getDate(l.end),F.date.setTime(s,L(i.end)),i.end=s)),a.dataSource._removeExceptions(l),o(l)},l=function(){var e=r(t),i=function(){a._convertDates(e),a._selection&&a._selection.events.push(s)},n=e.toOccurrence({start:t.start,end:t.end}),s=n.uid;o(a.dataSource.add(n),i)};t.recurrenceRule||t.isOccurrence()?(n=a.options.messages.recurrenceMessages,a._showRecurringDialog(t,l,s,{title:n.editWindowTitle,text:n.editRecurring?n.editRecurring:Pe,occurrenceText:n.editWindowOccurrence,seriesText:n.editWindowSeries})):o(a.dataSource.getByUid(t.uid))},_modelForContainer:function(t){return t=e(t).closest("["+F.attr("uid")+"]"),this.dataSource.getByUid(t.attr(F.attr("uid")))},showDialog:function(e){this._editor.showDialog(e)},focus:function(){this.wrapper.focus()},_confirmation:function(e,t,i){var n,a,o,r,s,l=this.options.editable;l===!0||l.confirmation!==!1?(n=this.options.messages,a=n.deleteWindowTitle,o=typeof l.confirmation===j?l.confirmation:n.editable.confirmation,this._isEditorOpened()&&t.isRecurring()&&(r=this.options.messages.recurrenceMessages,a=r.deleteWindowTitle,o=t.isException()||t.isNew()?r.deleteRecurringConfirmation?r.deleteRecurringConfirmation:Me:r.deleteSeriesConfirmation?r.deleteSeriesConfirmation:Ae,i&&(a=r.resetSeriesWindowTitle,o=r.resetSeriesConfirmation?r.resetSeriesConfirmation:Oe)),s=[{name:"destroy",text:i?n.resetSeries:n.destroy,click:function(){e()}}],this._isMobile()&&F.Pane||s.push({name:"canceledit",text:n.cancel,click:function(){e(!0)}}),this._unbindResize(),this.showDialog({model:t,text:o,title:a,buttons:s}),this._bindResize()):e()},addEvent:function(e){var t,i,n=this._editor.editable,a=this.dataSource;e=e||{},i=this.trigger("add",{event:e}),!i&&(n&&n.end()||!n)&&(this.cancelEvent(),e&&e.toJSON&&(e=e.toJSON()),t=a.add(e),t&&(this.cancelEvent(),this._editEvent(t)))},saveEvent:function(){var e,t,i,n,a,o,r=this,s=r._editor,l=r.dataSource;if(s&&(e=s.editable,t=s.container,i=r._modelForContainer(t),t&&e&&e.end()&&!r.trigger(me,{container:t,event:i}))){if(!i.isOccurrence()&&i.recurrenceException&&!i.recurrenceRule){for(n=l.data(),a=n.length-1;a>=0;a-=1)o=n[a],o&&o.recurrenceId===i.id&&l.remove(o);i.set("recurrenceException","")}i.dirty||i.isOccurrence()||r._convertDates(i,"remove"),l.sync()}},cancelEvent:function(){var e,t=this._editor,i=t.container;
i&&(e=this._modelForContainer(i),e&&e.isOccurrence()&&(this._convertDates(e,"remove"),this._convertDates(this.dataSource.get(e.recurrenceId),"remove")),this.dataSource.cancelChanges(e),t.close())},editEvent:function(e){var t="string"==typeof e?this.occurrenceByUid(e):e;t&&(this.cancelEvent(),t.isRecurring()?this._editRecurringDialog(t):this._editEvent(t))},_editEvent:function(e){this._preventRefresh=!0,this._unbindResize(),this._createPopupEditor(e),this._bindResize()},_editRecurringDialog:function(e){var t=this,i=function(){e.isException()?t._editEvent(e):t.addEvent(e)},n=function(){e.recurrenceId&&(e=t.dataSource.get(e.recurrenceId)),t._editEvent(e)},a=t.options.messages.recurrenceMessages;t._showRecurringDialog(e,i,n,{title:a.editWindowTitle,text:a.editRecurring?a.editRecurring:Pe,occurrenceText:a.editWindowOccurrence,seriesText:a.editWindowSeries})},_showRecurringDialog:function(e,t,i,n){var a=this.options.editable,o=Z(a)?a.editRecurringMode:"dialog";"occurrence"===o||this._isMultiDrag?t():"series"===o?i():(this._unbindResize(),this.showDialog({model:e,title:n.title,text:n.text,buttons:[{text:n.occurrenceText,click:t},{text:n.seriesText,click:i}]}),this._bindResize())},_createButton:function(e){var t=e.template||Ie,i=typeof e===j?e:e.name||e.text,n={className:"k-scheduler-"+(i||"").replace(/\s/g,""),text:i,attr:""};if(!(i||Z(e)&&e.template))throw Error("Custom commands should have name specified");return Z(e)?(e.className&&(e.className+=" "+n.className),"edit"===i&&Z(e.text)&&(e=G(!0,{},e),e.text=e.text.edit),n=G(!0,n,S[i],e)):n=G(!0,n,S[i]),F.template(t)(n)},_convertDates:function(e,t){var i=this.dataSource.reader.timezone,n=e.startTimezone,a=e.endTimezone,o=e.start,r=e.start;t=t||"apply",n=n||a,a=a||n,n&&(i?"apply"===t?(o=F.timezone.convert(e.start,i,n),r=F.timezone.convert(e.end,i,a)):(o=F.timezone.convert(e.start,n,i),r=F.timezone.convert(e.end,a,i)):(o=F.timezone[t](e.start,n),r=F.timezone[t](e.end,a)),e._set("start",o),e._set("end",r))},_createEditor:function(){var e,i=this;e=i._editor=this._isMobile()&&F.Pane?new R(this.wrapper,G({},this.options,{target:this,timezone:i.dataSource.reader.timezone,resources:i.resources,createButton:ee(this._createButton,this)})):new C(this.wrapper,G({},this.options,{target:this,createButton:ee(this._createButton,this),timezone:i.dataSource.reader.timezone,resources:i.resources})),e.bind("cancel",function(e){return i.trigger("cancel",{container:e.container,event:e.model})?(e.preventDefault(),t):(i._preventRefresh=!1,i.cancelEvent(),i._attemptRefresh&&i.refresh(),i.focus(),t)}),e.bind("edit",function(e){i.trigger(_e,{container:e.container,event:e.model})&&e.preventDefault()}),e.bind("save",function(){i._preventRefresh=!1,i.saveEvent()}),e.bind("remove",function(e){i._preventRefresh=!1,i.removeEvent(e.model)}),e.bind("resetSeries",function(e){i._confirmation(function(t){i._preventRefresh=!1,t||(i.dataSource._removeExceptions(e.model),i.saveEvent())},e.model,!0)})},_createPopupEditor:function(e){var t=this._editor;e.isNew()&&!e.isOccurrence()||(e.isOccurrence()&&this._convertDates(e.recurrenceId?this.dataSource.get(e.recurrenceId):e),this._convertDates(e)),this.editable=t.editEvent(e)},removeEvent:function(e){var t=this,i="string"==typeof e?t.occurrenceByUid(e):e;i&&(i.isRecurring()?t._deleteRecurringDialog(i):t._confirmation(function(e){e||t._removeEvent(i)},i))},occurrenceByUid:function(e){var t=this.dataSource.getByUid(e);return t||(t=d(this._data,e)),t},occurrencesInRange:function(e,t){return new F.data.Query(this._data).filter({logic:"or",filters:[{logic:"and",filters:[{field:"start",operator:"gte",value:e},{field:"end",operator:"gte",value:e},{field:"start",operator:"lt",value:t}]},{logic:"and",filters:[{field:"start",operator:"lte",value:e},{field:"end",operator:"gt",value:e}]}]}).toArray()},_removeEvent:function(e){this.trigger(fe,{event:e})||this.dataSource.remove(e)&&this.dataSource.sync()},_deleteRecurringDialog:function(e){var t,i,n,a,o,r,s,l=this,d=e,c=l.options.editable,u=Z(c)?c.editRecurringMode:"dialog",p=function(){var e=d.recurrenceId?d:d.toOccurrence(),t=l.dataSource.get(e.recurrenceId);l._convertDates(t),l._removeEvent(e)},h=function(){d.recurrenceId&&(d=l.dataSource.get(d.recurrenceId)),l._removeEvent(d)},f=function(){l.dataSource.remove(d),l.dataSource.sync()};("dialog"!=u||l._isEditorOpened())&&(t=function(){l._confirmation(function(e){e||p()},d)},i=function(){l._confirmation(function(e){e||h()},d)},n=function(){l._confirmation(function(e){e||f()},d)}),a=i||h,o=t||p,r=n||f,l._isEditorOpened()?e.isException()?o():e.isNew()?r():a():(s=l.options.messages.recurrenceMessages,l._showRecurringDialog(e,o,a,{title:s.deleteWindowTitle,text:s.deleteRecurring?s.deleteRecurring:Ve,occurrenceText:s.deleteWindowOccurrence,seriesText:s.deleteWindowSeries}))},_isEditorOpened:function(){return!!this._editor.container},_unbindView:function(e){var t=this;t.angular("cleanup",function(){return{elements:t.items()}}),e.destroy()},_bindView:function(e){var t=this;t.options.editable&&(t._viewRemoveHandler&&e.unbind(fe,t._viewRemoveHandler),t._viewRemoveHandler=function(e){t.removeEvent(e.uid)},e.bind(fe,t._viewRemoveHandler),t._viewAddHandler&&e.unbind(ge,t._viewAddHandler),t._viewAddHandler=function(e){t.addEvent(e.eventInfo)},e.bind(ge,this._viewAddHandler),t._viewEditHandler&&e.unbind(_e,t._viewEditHandler),t._viewEditHandler=function(e){t.editEvent(e.uid)},e.bind(_e,this._viewEditHandler)),t._viewNavigateHandler&&e.unbind("navigate",t._viewNavigateHandler),t._viewNavigateHandler=function(e){var i,n;e.action?t.trigger("navigate",{view:e.view,isWorkDay:e.isWorkDay,action:e.action,date:e.date})||t.date(e.date):e.view&&(i="isWorkDay"in e,n=i?"changeWorkDay":"changeView",t.trigger("navigate",{view:e.view,isWorkDay:e.isWorkDay,action:n,date:e.date})||(i&&(t._workDayMode=e.isWorkDay),t._selectView(e.view),t.date(e.date)))},e.bind("navigate",t._viewNavigateHandler),t._viewActivateHandler&&e.unbind("activate",t._viewActivateHandler),t._viewActivateHandler=function(){var e=this;t._selection&&(e.constrainSelection(t._selection),t._select(),t._adjustSelectedDate())},e.bind("activate",t._viewActivateHandler)},_selectView:function(e){var t,i,n,a=this;e&&a.views[e]&&(a._selectedView&&a._unbindView(a._selectedView),a._selectedView=a._renderView(e),a._selectedViewName=e,a._viewsCount>1&&!a._isMobile()?(t=a.toolbar.find(".k-views-dropdown"),i=a.toolbar.find(".k-scheduler-views > .k-button"),0===a.toolbar.find(".k-views-dropdown").length&&(a.toolbar.find(".k-scheduler-views-wrapper").prepend(Be({views:a.views,view:e,ns:F.ns})),t=a.toolbar.find(".k-views-dropdown")),t.val(e),i.removeClass("k-state-selected"),i.filter(".k-view-"+e.replace(/\./g,"\\.").toLowerCase()).addClass("k-state-selected")):(n=a.toolbar.find(".k-scheduler-mobile-views"),n.find("[value="+e.replace(/\./g,"\\.")+"]").prop("selected","selected")))},view:function(e){var i=this;return e?(i._selectView(e),i.rebind(),t):i._selectedView},viewName:function(){return this.view().name},_renderView:function(e){var t=this._initializeView(e);return this._bindView(t),(F.support.mouseAndTouchPresent||F.support.pointers)&&(t.content.css("-ms-touch-action","pinch-zoom"),t.content.css("touch-action","pinch-zoom")),this._model.set("formattedDate",t.dateForTitle()),this._model.set("formattedShortDate",t.shortDateForTitle()),this._model.set("formattedMobileDate",t.mobileDateForTitle?t.mobileDateForTitle():t.shortDateForTitle()),this._model.set("formattedYear",F.format("{0:yyyy}",t.startDate())),t},resize:function(e){var t=this.getSize(),i=this._size,n=this.view();n&&n.groups&&(!e&&i&&t.width===i.width&&t.height===i.height||(this.refresh({action:"resize"}),this._size=t))},_adjustSelectedDate:function(){var e=this._model.selectedDate,t=this._selection,i=t.start;i&&!F.date.isInDateRange(e,N(i),N(t.end))&&e.setFullYear(i.getFullYear(),i.getMonth(),i.getDate())},_initializeView:function(e){var t,i,n,a=this.views[e];if(a){if(t=Z(a),i={},n=a.type,typeof n===j&&(n=F.getter(a.type)(window)),t&&a.workDays&&a.workDays.length&&(i.workDays=a.workDays),!n)throw Error("There is no such view");a=new n(this.wrapper,v(G(!0,{},this.options,t?a:{},{resources:this.resources,date:this.date(),startTime:F.parseDate(a.startTime)||F.parseDate(this.options.startTime),endTime:F.parseDate(a.endTime)||F.parseDate(this.options.endTime),showWorkHours:this._workDayMode}),i))}return a},_views:function(){var e,t,i,n,a,o,r,s,l,d=this.options.views;for(this.views={},this._viewsCount=0,r=0,s=d.length;r<s;r++)l=!1,e=d[r],n=Z(e),n?(o=a=e.type?e.type:e,typeof o!==j&&(a=e.name||e.title,l=!0)):o=a=e,t=P[a],t&&!l&&(e.type=t.type,t.title=this.options.messages.views[a],"day"===t.type?t.messages={allDay:this.options.messages.allDay}:"agenda"===t.type&&(t.messages={event:this.options.messages.event,date:this.options.messages.date,time:this.options.messages.time})),e=G({title:a},t,n?e:{}),a&&(this.views[a]=e,this._viewsCount++,i&&!e.selected||(i=a));i&&(this._selectedViewName=i)},rebind:function(){var i=this,n=i.resources,a=[];return i._preventRebind?(i._preventRebind=!1,t):(i.options.autoBind===!1&&n&&n.length>0?(n.forEach(function(e){0===e.dataSource.data().length&&(i._preventRebind=!0,a.push(e.dataSource.fetch()))}),e.when.apply(null,a).then(function(){i.dataSource.fetch(),i._preventRebind=!1})):i.dataSource.fetch(),t)},_dataSource:function(){var e=this,t=e.options,i=t.dataSource;i=ie(i)?{data:i}:i,!t.timezone||i instanceof Xe?i instanceof Xe&&(t.timezone=i.options.schema?i.options.schema.timezone:""):i=G(!0,i,{schema:{timezone:t.timezone}}),e.dataSource&&e._refreshHandler?e.dataSource.unbind(ce,e._refreshHandler).unbind(ue,e._progressHandler).unbind(pe,e._errorHandler):(e._refreshHandler=ee(e.refresh,e),e._progressHandler=ee(e._requestStart,e),e._errorHandler=ee(e._error,e)),e.dataSource=F.data.SchedulerDataSource.create(i).bind(ce,e._refreshHandler).bind(ue,e._progressHandler).bind(pe,e._errorHandler),e.options.dataSource=e.dataSource},_error:function(){this._progress(!1)},_requestStart:function(){this._progress(!0)},_progress:function(e){var t=this.element.find(".k-scheduler-content");F.ui.progress(t,e)},_resources:function(){var t,i,n,a,o,r=this,s=r.options.resources,l=[];for(t=0;t<s.length;t++){if(i=s[t],n=i.field,a=i.name||n,o=i.dataSource,!n||!o)throw Error('The "field" and "dataSource" options of the scheduler resource are mandatory.');r.resources.push({field:n,name:a,title:i.title||n,dataTextField:i.dataTextField||"text",dataValueField:i.dataValueField||"value",dataColorField:i.dataColorField||"color",dataParentValueField:i.dataParentValueField||"parentValue",valuePrimitive:null==i.valuePrimitive||i.valuePrimitive,multiple:i.multiple||!1,dataSource:r._resourceDataSource(o,a,l)})}r.options.autoBind?e.when.apply(null,l).then(function(){r.view(r._selectedViewName)}):r._selectView(r._selectedViewName)},_resourceDataSource:function(e,t,i){var n=this,a=ie(e)?{data:e}:e,o=F.data.DataSource.create(a);return n.options.autoBind?i.push(o.fetch(function(){n._bindResourceEvents(this,t)})):n._bindResourceEvents(o,t),o},_bindResourceEvents:function(e,t){var i=this,n=i.options.group&&i.options.group.resources.length,a=n&&i.options.group.resources.indexOf(t)>-1;!i._resourceRefreshHandler&&a&&(i._resourceRefreshHandler=ee(i._refreshResource,i),i._resourceErrorHandler=ee(i._error,i)),a&&e.bind(ce,i._resourceRefreshHandler).bind(pe,i._resourceErrorHandler)},_refreshResource:function(){var e=this,t=e._editor&&e._editor.editable||e._preventRefresh;t||e.view(e._selectedViewName)},_initModel:function(){var e=this;e._model=F.observable({selectedDate:new Date(this.options.date),formattedDate:"",formattedShortDate:""}),e._model.bind(ce,function(t){"selectedDate"===t.field&&e.view(e._selectedViewName)})},_wrapper:function(){var e=this,t=e.options,i=t.height,n=t.width;e.wrapper=e.element.addClass("k-widget k-scheduler k-floatwrap").attr("role","grid").attr("aria-multiselectable",!0),e._isMobile()&&e.wrapper.addClass("k-scheduler-mobile"),i&&e.wrapper.height(i),n&&e.wrapper.width(n)},date:function(e){return null!=e&&N(e)>=N(this.options.min)&&N(e)<=N(this.options.max)&&this._model.set("selectedDate",e),N(this._model.get("selectedDate"))},_toolbar:function(){var t,i,n=this,a=n.options,o=[];a.toolbar&&(o=e.isArray(a.toolbar)?a.toolbar:[a.toolbar]),t=this._isMobile()?He:Fe,i=e(t({messages:a.messages,pdf:e.grep(o,function(e){return"pdf"==e||"pdf"==e.name}).length>0,search:e.grep(o,function(e){return"search"==e||"search"==e.name}).length>0,ns:F.ns,view:n._selectedViewName,views:n.views,viewsCount:n._viewsCount,editable:n.options.editable})),n.wrapper.append(i),n.toolbar=i,F.bind(n.toolbar,n._model),i.on(ae+ne,".k-pdf",function(e){e.preventDefault(),n.saveAsPDF()}),i.on("input"+ne,".k-scheduler-search-input",F.throttle(function(e){n.dataSource.filter({logic:"or",filters:[{field:"title",operator:"contains",value:e.target.value},{field:"description",operator:"contains",value:e.target.value}]})},250)),i.on(ae+ne,".k-create-event",function(e){e.preventDefault(),n.addEvent()}),i.on(ae+ne,".k-nav-calendar",function(e){e.preventDefault(),n._showCalendar(e.target)}),i.on(ae+ne,".k-scheduler-navigation > .k-button",function(t){var i,a=e(this),o=new Date(n.date()),r="",s=new Date,l=n.options.timezone;e(t.target).is("input")||(t.preventDefault(),a.hasClass("k-nav-today")?(r="today",l?(i=F.timezone.offset(s,l),o=F.timezone.convert(s,s.getTimezoneOffset(),i)):o=s):a.hasClass("k-nav-next")?(r="next",o=n.view().nextDate()):a.hasClass("k-nav-prev")&&(r="previous",o=n.view().previousDate()),n.trigger("navigate",{view:n._selectedViewName,action:r,date:o})||n.date(o))}),i.on(ae+ne,".k-nav-current",function(e){e.preventDefault(),n._isMobile()||n._showCalendar()}),i.on(ae+ne,".k-scheduler-views > .k-button, .k-scheduler-refresh",function(t){t.preventDefault();var i=e(this).attr(F.attr("name"));n.toolbar.find(".k-scheduler-views > .k-button").removeClass(we),n.trigger("navigate",{view:i,action:"changeView",date:n.date()})||n.view(i)}),i.on(ce+ne,".k-views-dropdown, .k-scheduler-mobile-views",function(){var e=this.value;n.trigger("navigate",{view:e,action:"changeView",date:n.date()})||n.view(e)})},_showCalendar:function(t){var i=this,n=t||i.toolbar.find(".k-nav-current"),a=e('<div class="k-calendar-container"><div class="k-scheduler-calendar"></div></div>');i.popup||(i.popup=new Q(a,{anchor:n,activate:function(){i.popup&&i.calendar&&(i.popup._toggleResize(!1),i.calendar.element.find("table").focus(),i.popup._toggleResize(!0))},open:function(){i.calendar||(i.calendar=new J(this.element.find(".k-scheduler-calendar"),{change:function(){var e=this.value();i.trigger("navigate",{view:i._selectedViewName,action:"changeDate",date:e})||(i.date(e),i.popup.close()),i._isMobile()||(i._selectedView.element.focus(),i.toolbar.find(".k-nav-current").focus().addClass(we))},min:i.options.min,max:i.options.max})),i.calendar.element.on("keydown"+ne,function(e){e.keyCode!==U.ESC&&e.keyCode!==U.TAB||(i.popup.close(),i._selectedView.element.focus(),i.toolbar.find(".k-nav-current").focus().addClass(we))}),i.calendar.setOptions({start:"year"===i._selectedViewName?"decade":"month",depth:"year"===i._selectedViewName?"decade":"month"}),i.calendar.value(i.date())},copyAnchorStyles:!1})),i.popup.open()},refresh:function(e){var i=this,n=this.view(),a=e&&"itemchange"===e.action&&(this._editor.editable||this._preventRefresh)||"signalr"===this.dataSource.options.type&&this._preventRefresh;if(this._progress(!1),this.angular("cleanup",function(){return{elements:i.items()}}),e=e||{},n)return a?(this._attemptRefresh="signalr"===this.dataSource.options.type,t):(this.trigger("dataBinding",{action:e.action||"rebind",index:e.index,items:e.items})||(e&&"resize"===e.action||!this._editor||this._editor.close(),this._data=this.dataSource.expand(n.startDate(),n.visibleEndDate()),n.refreshLayout(),n.render(this._data),this.trigger("dataBound"),this._attemptRefresh=!1),t)},slotByPosition:function(e,t){var i,n=this.view();return n._slotByPosition?(i=n._slotByPosition(e,t),i?{startDate:i.startDate(),endDate:i.endDate(),groupIndex:i.groupIndex,element:i.element,isDaySlot:i.isDaySlot}:null):null},slotByElement:function(t){var i=e(t).offset();return this.slotByPosition(i.left,i.top)},resourcesBySlot:function(e){return this.view()._resourceBySlot(e)}}),P={day:{type:"kendo.ui.DayView"},week:{type:"kendo.ui.WeekView"},workWeek:{type:"kendo.ui.WorkWeekView"},agenda:{type:"kendo.ui.AgendaView"},month:{type:"kendo.ui.MonthView"},timeline:{type:"kendo.ui.TimelineView"},timelineWeek:{type:"kendo.ui.TimelineWeekView"},timelineWorkWeek:{type:"kendo.ui.TimelineWorkWeekView"},timelineMonth:{type:"kendo.ui.TimelineMonthView"},year:{type:"kendo.ui.YearView"}},q.plugin(V),F.PDFMixin&&(F.PDFMixin.extend(V.prototype),M="k-scheduler-pdf-export",V.fn._drawPDF=function(t){var i,n,a,o=this.wrapper,r=o[0].style.cssText;return o.css({width:o.width(),height:o.height()}),o.addClass(M),i=this,n=new e.Deferred,a=o.find(".k-scheduler-content").find("table").css("table-layout","auto"),setTimeout(function(){a.css("table-layout","fixed"),i.resize(!0),i._drawPDFShadow({},{avoidLinks:i.options.pdf.avoidLinks}).done(function(e){var i={page:e,pageNumber:1,progress:1,totalPages:1};t.notify(i),n.resolve(i.page)}).fail(function(e){n.reject(e)}).always(function(){o[0].style.cssText=r,o.removeClass(M),i.resize(!0),i.resize(!0)})}),n}),O=Y.extend({init:function(e,t){var i=this,n=F.timezone.windows_zones;if(!n||!F.timezone.zones_titles)throw Error("kendo.timezones.min.js is not included.");Y.fn.init.call(i,e,t),i.wrapper=i.element,i._zonesQuery=new F.data.Query(n),i._zoneTitleId=F.guid(),i._zoneTitlePicker(),i._zonePicker(),i._zoneTitle.bind("cascade",function(){this.value()||i._zone.wrapper.hide()}),i._zone.bind("cascade",function(){i._value=this.value(),i.trigger(ce)}),i.value(i.options.value)},options:{name:"TimezoneEditor",value:"",optionLabel:"No timezone"},events:[ce],_zoneTitlePicker:function(){var t=this,i=e('<input id="'+t._zoneTitleId+'" aria-label="'+t.options.title+'"/>').appendTo(t.wrapper);t._zoneTitle=new F.ui.DropDownList(i,{dataSource:F.timezone.zones_titles,dataValueField:"other_zone",dataTextField:"name",optionLabel:t.options.optionLabel})},_zonePicker:function(){var t=this,i=e('<input aria-label="'+t.options.title+'"/>').appendTo(this.wrapper);t._zone=new F.ui.DropDownList(i,{dataValueField:"zone",dataTextField:"territory",dataSource:t._zonesQuery.data,cascadeFrom:t._zoneTitleId,dataBound:function(){t._value=this.value(),this.wrapper.toggle(this.dataSource.view().length>1)}}),t._zone.wrapper.hide()},destroy:function(){Y.fn.destroy.call(this),F.destroy(this.wrapper)},value:function(e){var i,n=this;return e===t?n._value:(i=n._zonesQuery.filter({field:"zone",operator:"eq",value:e}).data[0],i?(n._zoneTitle.value(i.other_zone),n._zone.value(i.zone)):n._zoneTitle.select(0),t)}}),q.plugin(O),A=F.template('<option value="#=other_zone#">#=name#</option>'),I=F.template('<option value="#=zone#">#=territory#</option>'),B=Y.extend({init:function(e,t){var i=this,n=F.timezone.windows_zones;if(!n||!F.timezone.zones_titles)throw Error("kendo.timezones.min.js is not included.");Y.fn.init.call(i,e,t),i.wrapper=i.element,i._zonesQuery=new F.data.Query(n),i._zoneTitlePicker(),i._zonePicker(),i.value(i.options.value)},options:{name:"MobileTimezoneEditor",optionLabel:"No timezone",value:""},events:[ce],_bindZones:function(e){var t=e?this._filter(e):[];this._zone.html(this._options(t,I))},_filter:function(e){return this._zonesQuery.filter({field:"other_zone",operator:"eq",value:e}).data},_options:function(e,t,i){var n=0,a="",o=e.length;for(i&&(a+=t({other_zone:"",name:i}));n<o;n++)a+=t(e[n]);return a},_zoneTitlePicker:function(){var t=this,i=t._options(F.timezone.zones_titles,A,t.options.optionLabel);t._zoneTitle=e("<select>"+i+"</select>").appendTo(t.wrapper).change(function(){var e=this.value,i=t._zonePickerLabel,n=i.find("select");t._bindZones(e),e&&n.children().length>1?i.show():i.hide(),t._value=t._zone[0].value,t.trigger(ce)})},_zonePicker:function(){var t=this;t._zonePickerLabel=e("<li class='k-item k-listgroup-item k-zonepicker' style='display:none'><label class='k-label k-listgroup-form-row'><span class='k-item-title k-listgroup-form-field-label'></span><div class='k-listgroup-form-field-wrapper'></div></label></li>"),t._zone=e("<select></select>").appendTo(t._zonePickerLabel.find("div")).change(function(){t._value=this.value,t.trigger(ce)}),this.wrapper.closest(".k-item").after(t._zonePickerLabel),t._bindZones(t._zoneTitle.val()),t._value=t._zone[0].value},destroy:function(){Y.fn.destroy.call(this),F.destroy(this.wrapper)},value:function(e){var i,n=this,a=n._zone,o="",r="";return e===t?n._value:(i=n._zonesQuery.filter({field:"zone",operator:"eq",value:e}).data[0],i&&(r=i.zone,o=i.other_zone),n._zoneTitle.val(o),n._bindZones(o),a.val(r),r=a[0].value,r&&a.children.length>1?n._zonePickerLabel.show():n._zonePickerLabel.hide(),n._value=r,t)}}),q.plugin(B)}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(e,t,i){(i||t)()});
//# sourceMappingURL=kendo.scheduler.min.js.map
